<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
                "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
<head>
  <title>Description of plt</title>
  <meta name="keywords" content="plt">
  <meta name="description" content="- plt package by Paul Mennen">
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
  <meta name="generator" content="m2html v1.5 &copy; 2003-2005 Guillaume Flandin">
  <meta name="robots" content="index, follow">
  <link type="text/css" rel="stylesheet" href="../m2html.css">
</head>
<body>
<a name="_top"></a>
<div><a href="../index.html">Home</a> &gt;  <a href="#">src</a> &gt; plt.m</div>

<!--<table width="100%"><tr><td align="left"><a href="../index.html"><img alt="<" border="0" src="../left.png">&nbsp;Master index</a></td>
<td align="right"><a href="index.html">Index for .\src&nbsp;<img alt=">" border="0" src="../right.png"></a></td></tr></table>-->

<h1>plt
</h1>

<h2><a name="_name"></a>PURPOSE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>- plt package by Paul Mennen</strong></div>

<h2><a name="_synopsis"></a>SYNOPSIS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="box"><strong>function [Volv1,Volv2] = plt(varargin); </strong></div>

<h2><a name="_description"></a>DESCRIPTION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre class="comment"> - plt package by Paul Mennen

 plt.m:   An alternative to plot and plotyy (version 11May10) by Paul Mennen
 Author:  Paul Mennen (paul@mennen.org)
          Copyright (c) 2010, Paul Mennen</pre></div>

<!-- crossreference -->
<h2><a name="_cross"></a>CROSS-REFERENCE INFORMATION <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
This function calls:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>	- plt package by Paul Mennen</li></ul>
This function is called by:
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>	- plt package by Paul Mennen</li><li><a href="sosPlots.html" class="code" title="">sosPlots</a>	- object used to create detailed plots of SOS optimization</li></ul>
<!-- crossreference -->

<h2><a name="_subfunctions"></a>SUBFUNCTIONS <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<ul style="list-style-image:url(../matlabicon.gif)">
<li><a href="#_sub1" class="code">function fixMark()</a></li><li><a href="#_sub2" class="code">function r2 = plt2nd(v)</a></li><li><a href="#_sub3" class="code">function r = get8192(h,prop)</a></li><li><a href="#_sub4" class="code">function evalQ(a)</a></li><li><a href="#_sub5" class="code">function evalRep(a,rep)</a></li><li><a href="#_sub6" class="code">function r = evalRep2(a,rep)</a></li><li><a href="#_sub7" class="code">function v = s2d(s)</a></li><li><a href="#_sub8" class="code">function v = s2i(s)</a></li></ul>

<h2><a name="_source"></a>SOURCE CODE <a href="#_top"><img alt="^" border="0" src="../up.png"></a></h2>
<div class="fragment"><pre>0001 <span class="comment">% - plt package by Paul Mennen</span>
0002 <span class="comment">%</span>
0003 <span class="comment">% plt.m:   An alternative to plot and plotyy (version 11May10) by Paul Mennen</span>
0004 <span class="comment">% Author:  Paul Mennen (paul@mennen.org)</span>
0005 <span class="comment">%          Copyright (c) 2010, Paul Mennen</span>
0006 
0007 <span class="comment">% This code is covered by the BSD license (note by BCA).</span>
0008 
0009 
0010 <a name="_sub0" href="#_subfunctions" class="code">function [Volv1,Volv2] = plt(varargin);</a>
0011 
0012 <span class="keyword">global</span> copia;
0013 
0014 Volv1 = 0;
0015 
0016 <span class="keyword">if</span> ~nargin
0017   eval(<span class="string">'evalin(''base'',''pltdef'','''')'</span>);
0018   w = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'select'</span>,<span class="string">'base'</span>,<span class="string">'who'</span>);
0019   lix = length(w);  b = zeros(1,lix);
0020   opcion = [];
0021   wstruct = {}; ws=0;
0022   rnsion = 6;
0023   <span class="keyword">for</span> k=1:lix
0024     a = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'select'</span>,<span class="string">'base'</span>,w{k});
0025     <span class="keyword">if</span> length(w{k})&gt;6 &amp; findstr(w{k},<span class="string">'pltopt'</span>) opcion = [opcion a]; <span class="keyword">end</span>;
0026     <span class="keyword">if</span> strcmp(w{k},<span class="string">'TraceIDlen'</span>) rnsion = a;  <span class="keyword">end</span>;
0027     <span class="keyword">if</span> isnumeric(a) &amp; length(a)&gt;3 b(k)=1;
0028     <span class="keyword">elseif</span> isstruct(a) &amp; numel(a)==1
0029       f = fieldnames(a);
0030       <span class="keyword">for</span> fn=1:length(f)
0031         g = getfield(a,f{fn});
0032         <span class="keyword">if</span> isnumeric(g) &amp; length(g)&gt;3 ws=ws+1; wstruct{ws} = [w{k} <span class="string">'.'</span> f{fn}]; <span class="keyword">end</span>;
0033       <span class="keyword">end</span>;
0034     <span class="keyword">end</span>;
0035   <span class="keyword">end</span>;
0036   w = [w(logical(b)); wstruct'];  nov = length(w);
0037   <span class="keyword">if</span> nov&lt;2 disp(<span class="string">'Not enough vectors to plot'</span>); <span class="keyword">return</span>; <span class="keyword">end</span>;
0038   spix = get(0,<span class="string">'screenpix'</span>);
0039   Sfuente = (196-spix)/10;
0040   spix = spix/80 - .2;
0041   espaciV = round(20 * spix);
0042   espaciH = round(200 * spix);
0043   set(0,<span class="string">'units'</span>,<span class="string">'pix'</span>);  ssz = get(0,<span class="string">'screensize'</span>);
0044   fct = fix((ssz(4)-110)/espaciV);
0045   nov1 = nov+3;  fct = ceil(nov1/fct);
0046   nr = ceil(nov1/fct);
0047   wid = fct*espaciH+20; hei = nr*espaciV+40;
0048   fig = figure(<span class="string">'menu'</span>,<span class="string">'none'</span>,<span class="string">'number'</span>,<span class="string">'off'</span>,<span class="string">'name'</span>,<span class="string">'PLT select'</span>,<span class="string">'color'</span>,<span class="string">'black'</span>,<span class="keyword">...</span>
0049                <span class="string">'Invert'</span>,<span class="string">'on'</span>,<span class="string">'pos'</span>,[ssz(3)-wid-5 ssz(4)-hei-65 wid hei]);
0050   axes(<span class="string">'xli'</span>,[0 fct],<span class="string">'yli'</span>,[0 nr]-.5,<span class="string">'pos'</span>,[.02/fct 0 1 1],<span class="keyword">...</span>
0051        <span class="string">'color'</span>,<span class="string">'black'</span>,<span class="string">'xcol'</span>,<span class="string">'black'</span>,<span class="string">'ycol'</span>,<span class="string">'black'</span>);
0052   hb = hei-25;
0053   set([uicontrol(<span class="string">'str'</span>,<span class="string">'Plot'</span>,    <span class="string">'pos'</span>,[  5 hb 40 21],<span class="string">'call'</span>,<span class="string">'plt select plot;'</span>);
0054        uicontrol(<span class="string">'str'</span>,<span class="string">'CloseAll'</span>,<span class="string">'pos'</span>,[ 60 hb 60 21],<span class="string">'call'</span>,<span class="string">'plt close;'</span>);
0055        uicontrol(<span class="string">'str'</span>,<span class="string">'Help'</span>,    <span class="string">'pos'</span>,[135 hb 40 21],<span class="string">'call'</span>,<span class="string">'plt(''helpv'',0);'</span>);
0056       ],<span class="string">'units'</span>,<span class="string">'nor'</span>,<span class="string">'fontsi'</span>,Sfuente);
0057   absc=nr-3; x=0;
0058   set([text(0,absc+1.1,<span class="string">'Right click on desired x vectors'</span>);
0059        text(0,absc+.45, <span class="string">'Left click on desired y vectors'</span>);
0060        text(0,absc-.2, <span class="string">'Double click for right hand axis'</span>);
0061       ],<span class="string">'fonta'</span>,<span class="string">'ita'</span>,<span class="string">'fontsi'</span>,9,<span class="string">'color'</span>,[.5 .5 1]);
0062   txt = zeros(nov,1); sz1=txt; sz2=txt; len=txt; nvec=txt; sxy=txt; yderecho=txt;
0063   <span class="keyword">for</span> k=1:nov
0064     absc = absc-1;  <span class="keyword">if</span> absc&lt;0 absc=nr-1; x=x+1;  <span class="keyword">end</span>;
0065     sz = size(<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'select'</span>,<span class="string">'base'</span>,w{k}));
0066     sz1(k)  = sz(1);
0067     sz2(k)  = sz(2);
0068     len(k)  = max(sz);
0069     nvec(k) = min(sz);
0070     txt(k) = text(x,absc,<span class="string">' '</span>);
0071     set(txt(k),<span class="string">'ButtonD'</span>,[<span class="string">'plt(''select'','</span> int2str(k) <span class="string">');'</span>]);
0072   <span class="keyword">end</span>;
0073   set(fig,<span class="string">'use'</span>,[txt sz1 sz2 len nvec sxy yderecho]);
0074   setappdata(fig,<span class="string">'w'</span>,w);
0075   setappdata(fig,<span class="string">'opt'</span>,opcion);
0076   setappdata(fig,<span class="string">'IDlen'</span>,rnsion);
0077   <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'select'</span>,<span class="string">'text'</span>);
0078   <span class="keyword">return</span>;
0079 <span class="keyword">end</span>;
0080 
0081 y1 = varargin{1};
0082 <span class="keyword">if</span> ~ischar(y1) y1=<span class="string">'none'</span>; <span class="keyword">end</span>;
0083 <span class="keyword">if</span> y1(1)==<span class="string">'g'</span> y1(1)=<span class="string">'G'</span>;  <span class="keyword">end</span>;
0084 <span class="keyword">switch</span> sum(y1)
0085 <span class="keyword">case</span> 640
0086   v2 = varargin{2};
0087   <span class="keyword">if</span> isnumeric(v2) | v2(1) ~= <span class="string">'b'</span>
0088       w = getappdata(gcf,<span class="string">'w'</span>);  e = get(gcf,<span class="string">'use'</span>);
0089       len = e(:,4); sxy = e(:,6); nov = length(len);
0090       xk = []; <span class="keyword">for</span> k=1:nov <span class="keyword">if</span> sxy(k)&lt;0 xk = [xk k]; <span class="keyword">end</span>; <span class="keyword">end</span>;
0091   <span class="keyword">end</span>;
0092   <span class="keyword">switch</span> sum(v2)
0093     <span class="keyword">case</span> 411, Volv1 = eval([<span class="string">'evalin(''base'','''</span> varargin{3} <span class="string">''');'</span>]);
0094     <span class="keyword">case</span> 453,
0095       lnxk = length(xk);
0096       <span class="keyword">for</span> k=1:nov
0097         s = w{k};  <span class="keyword">if</span> length(s)&gt;20 s=s(1:20); <span class="keyword">end</span>;
0098         s = strrep(s,<span class="string">'_'</span>,<span class="string">'\_'</span>);
0099         s = [s <span class="string">'  ('</span> int2str(e(k,2)) <span class="string">','</span> int2str(e(k,3)) <span class="string">')'</span>];
0100         <span class="keyword">if</span> sxy(k) s = [s <span class="string">' \leftarrow '</span>]; s2 = int2str(abs(sxy(k)));  <span class="keyword">end</span>;
0101         c = [1 1 1];
0102         <span class="keyword">if</span> lnxk
0103           <span class="keyword">if</span> lnxk==1 s2 = <span class="string">''</span>; <span class="keyword">end</span>;
0104           <span class="keyword">if</span> ~sxy(k)
0105             <span class="keyword">if</span> ~length(find(len(xk)==len(k))) c = .5*c; <span class="keyword">end</span>;
0106           <span class="keyword">elseif</span> sxy(k)&lt;0                 c = [.9 .3 .3]; s = [s <span class="string">'x'</span> s2];
0107           <span class="keyword">else</span>
0108             <span class="keyword">if</span> e(k,7)               c = [ 1 .6 .2]; s = [s <span class="string">'y'</span> s2 <span class="string">'R'</span>];
0109                       <span class="keyword">else</span>                c = [ 1  1  0]; s = [s <span class="string">'y'</span> s2];
0110                       <span class="keyword">end</span>;
0111           <span class="keyword">end</span>;
0112         <span class="keyword">else</span> <span class="keyword">if</span> e(k,5) ~= 1 c = .5*c; <span class="keyword">end</span>;
0113         <span class="keyword">end</span>;
0114         <span class="keyword">if</span> c(3)==.5 | c(3)==1 bold = <span class="string">'norm'</span>; <span class="keyword">else</span> bold = <span class="string">'bold'</span>;  <span class="keyword">end</span>;
0115         set(e(k,1),<span class="string">'color'</span>,c,<span class="string">'fontw'</span>,bold,<span class="string">'str'</span>,s);
0116       <span class="keyword">end</span>;
0117     <span class="keyword">case</span> 447
0118       <span class="keyword">if</span> ~max(sxy) <span class="keyword">return</span>; <span class="keyword">end</span>;
0119       opcion       = getappdata(gcf,<span class="string">'opt'</span>);
0120       rnsion = getappdata(gcf,<span class="string">'IDlen'</span>);
0121       opt = [];
0122       <span class="keyword">for</span> k=1:length(opcion)
0123         t = opcion{k};
0124         <span class="keyword">if</span>   isnumeric(t) v = num2str(t);
0125              <span class="keyword">if</span> length(t)&gt;1 v = [<span class="string">'['</span> v <span class="string">']'</span>]; <span class="keyword">end</span>;
0126         <span class="keyword">else</span> v = [<span class="string">''''''</span> t <span class="string">''''''</span>];
0127         <span class="keyword">end</span>;
0128         opt = [opt v <span class="string">','</span>];
0129       <span class="keyword">end</span>;
0130       <span class="keyword">if</span> length(xk)==1 x = w{find(sxy&lt;0)}; <span class="keyword">else</span> x = <span class="string">'X axis'</span>; <span class="keyword">end</span>;
0131       derecho = [];
0132       ny = 0;
0133       nvL = 0; nvR = 0;
0134       func = [<span class="string">'plt(''''LabelX'''','''''</span> x <span class="string">''''','</span>];
0135       id = <span class="string">'''''TraceID'''',['''''</span>;
0136       <span class="keyword">for</span> k=1:nov
0137         <span class="keyword">if</span> sxy(k)&gt;0
0138           nvec = e(k,5);
0139           x = w{find(sxy==-sxy(k))};  absc = w{k};
0140           s2 = strrep(absc,<span class="string">'_'</span>,<span class="string">'\_'</span>);
0141           ss = strrep(absc,<span class="string">'_'</span>,<span class="string">''</span>);
0142           nn = rnsion - (nvec&gt;1);  s = [];
0143           <span class="keyword">if</span> length(ss) &gt; nn
0144             sp = findstr(ss,<span class="string">'.'</span>);
0145             <span class="keyword">if</span> length(sp)
0146               nn1 = min(sp-1,floor((nn-1)/2));
0147               nn2 = min(nn-nn1-1,length(ss)-sp);
0148               nn1 = nn - nn2 - 1;
0149               ss = ss([1:nn1-1 sp-1:sp+nn2-1 end]);
0150             <span class="keyword">else</span>
0151               ss = [ss(1:nn-1) ss(end)];
0152             <span class="keyword">end</span>;
0153           <span class="keyword">end</span>;
0154           <span class="keyword">while</span> length(ss) &lt; nn ss = [ss <span class="string">' '</span>]; <span class="keyword">end</span>;
0155           st = ss;
0156           <span class="keyword">for</span> v = 1:nvec
0157             <span class="keyword">if</span> nvec&gt;1 ss = [st <span class="string">'0'</span>+mod(v,10)]; <span class="keyword">end</span>;
0158             s = [s ss <span class="string">''''';'''''</span>];
0159           <span class="keyword">end</span>;
0160           <span class="keyword">if</span> e(k,7) derecho = [derecho ny+(1:nvec)];  s2R=s2; nvR=nvR+1;  <span class="keyword">else</span>  s2L=s2; nvL=nvL+1;  <span class="keyword">end</span>;
0161           ny = ny + nvec;
0162           func = [func x <span class="string">','</span> absc <span class="string">','</span>];
0163           id = [id s];
0164         <span class="keyword">end</span>;
0165       <span class="keyword">end</span>;
0166       <span class="keyword">if</span> nvL==1 func = [func <span class="string">'''''LabelY'''','''''</span>  s2L <span class="string">''''','</span>]; <span class="keyword">end</span>;
0167       <span class="keyword">if</span> nvR==1 func = [func <span class="string">'''''LabelYr'''','''''</span> s2R <span class="string">''''','</span>]; <span class="keyword">end</span>;
0168       <span class="keyword">if</span> nvR&gt;0  func = [func <span class="string">'''''Right'''','</span> <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'vtoa'</span>,<span class="string">'%d'</span>,derecho) <span class="string">','</span>]; <span class="keyword">end</span>;
0169       <span class="keyword">if</span> ny&gt;1 func = [func id(1:end-3) <span class="string">'],'</span>]; <span class="keyword">end</span>;
0170       func = [func opt];
0171       func = [func(1:end-1) <span class="string">');'</span>];
0172       <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'select'</span>,<span class="string">'base'</span>,func);
0173     <span class="keyword">otherwise</span>,
0174       clic = get(gcf,<span class="string">'SelectionT'</span>); clic = clic(1);  sk = sxy(v2);
0175       <span class="keyword">if</span> clic==<span class="string">'a'</span> | ~length(xk)
0176         <span class="keyword">if</span> sk&gt;=0
0177              <span class="keyword">if</span> e(v2,5)==1 e(v2,6) = min(sxy)-1; <span class="keyword">end</span>;
0178         <span class="keyword">else</span> e(v2,6) = 0;
0179              e(find(sxy==-sk),6)=0;
0180         <span class="keyword">end</span>;
0181       <span class="keyword">elseif</span> sk&gt;=0
0182         <span class="keyword">if</span> clic==<span class="string">'o'</span> &amp; sk sk = 0; <span class="keyword">end</span>;
0183         xki = sort(-sxy(xk(find(len(xk)==len(v2)))));
0184         <span class="keyword">if</span> length(xki)
0185           <span class="keyword">if</span> sk liy = find(xki==sk)+1;
0186                 <span class="keyword">if</span> liy&gt;length(xki) sk=0; e(v2,7)=0; <span class="keyword">else</span> sk=xki(liy);  <span class="keyword">end</span>;
0187           <span class="keyword">else</span>  sk = xki(1);
0188           <span class="keyword">end</span>;
0189           e(v2,6) = sk;
0190           <span class="keyword">if</span> clic==<span class="string">'o'</span> &amp; sk  e(v2,7)=1; <span class="keyword">end</span>;
0191         <span class="keyword">end</span>;
0192       <span class="keyword">end</span>;
0193       set(gcf,<span class="string">'use'</span>,e);
0194       <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'select'</span>,<span class="string">'text'</span>);
0195   <span class="keyword">end</span>;
0196 
0197 <span class="keyword">case</span> 756
0198     x = varargin{2};
0199     liy=0;  nv=x;
0200     <span class="keyword">if</span> ~x Volv1=<span class="string">''</span>; Volv2=1; <span class="keyword">return</span>; <span class="keyword">end</span>;
0201     <span class="keyword">while</span> nv&gt;900  liy=liy+1;  nv=.001*nv; <span class="keyword">end</span>;
0202     <span class="keyword">while</span> nv&lt;.9   liy=liy-1;  nv=1000*nv; <span class="keyword">end</span>;
0203     <span class="keyword">if</span> (liy==1 &amp; x&lt;10000) | (liy==-1 &amp; x&gt;=.1 ) liy=0; nv=x; <span class="keyword">end</span>;
0204     Volv2 = nv/x;
0205     <span class="keyword">if</span>     liy&gt;5  Volv1 = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,<span class="string">'%4w'</span>,1/Volv2);
0206     <span class="keyword">elseif</span> liy&lt;-6 Volv1 = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,<span class="string">'%5w'</span>,1/Volv2);
0207     <span class="keyword">else</span>        qs=reshape(<span class="string">'Atto FemtoPico Nano MicroMilli     Kilo Mega Giga Tera Peta '</span>,5,12)';
0208                 Volv1 = deblank(qs(liy+7,:));
0209     <span class="keyword">end</span>;
0210     <span class="keyword">if</span> length(Volv1) Volv1 = [Volv1 <span class="string">'-'</span>]; <span class="keyword">end</span>;
0211 
0212 <span class="keyword">case</span> 426
0213 
0214   Csena = varargin{2};  val = varargin{3};  val = val(:);
0215   <span class="keyword">if</span> length(val) &gt; 1
0216     <span class="keyword">if</span> nargin &lt; 4 arado = <span class="string">' '</span>; <span class="keyword">else</span> arado = varargin{4}; <span class="keyword">end</span>;
0217     Volv1 = <span class="string">''</span>;
0218     <span class="keyword">for</span> k=1:length(val) Volv1 = [Volv1 <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,Csena,val(k)) arado]; <span class="keyword">end</span>;
0219     Volv1 = Volv1(1:end-length(arado));
0220     <span class="keyword">return</span>;
0221   <span class="keyword">end</span>;
0222   atir = length(Csena);  vrto = Csena(atir);
0223   <span class="keyword">while</span> vrto==<span class="string">' '</span> atir=atir-1; vrto = Csena(atir); <span class="keyword">end</span>;
0224   <span class="keyword">if</span> vrto==<span class="string">'w'</span> | vrto==<span class="string">'v'</span>
0225      v = <a href="#_sub8" class="code" title="subfunction v = s2i(s)">s2i</a>(Csena(2:atir-1));
0226      absc = abs(val);
0227      <span class="keyword">if</span> isnan(val) Volv1 = <span class="string">'NaN'</span>; <span class="keyword">return</span>; <span class="keyword">end</span>;
0228      <span class="keyword">if</span> ~val Volv1=<span class="string">'0'</span>; <span class="keyword">if</span> vrto==<span class="string">'v'</span> Volv1=[blanks(v) Volv1]; <span class="keyword">end</span>; <span class="keyword">return</span>;
0229      <span class="keyword">elseif</span> val&lt;0 vv = v-1;
0230      <span class="keyword">else</span> vv = v;
0231      <span class="keyword">end</span>;
0232      <span class="keyword">if</span>     absc &lt; 1.0e-99  pf = [7 1 2 2];   <span class="keyword">elseif</span> absc &lt; 1.0e-9   pf = [6 2 2 3];
0233      <span class="keyword">elseif</span> absc &lt; 0.01     pf = [5 1 4 4];   <span class="keyword">elseif</span> absc &lt; 10.0^vv  pf = [1 1 1 1];
0234      <span class="keyword">elseif</span> absc &lt; 1.0e10   pf = [4 1 5 5];   <span class="keyword">elseif</span> absc &lt; 1.0e100  pf = [5 2 3 4];
0235      <span class="keyword">else</span>                pf = [6 3 1 3];
0236      <span class="keyword">end</span>;
0237      pf = pf - 1;
0238      fp = v-pf(1);  <span class="keyword">if</span> val&lt;0 fp=fp-1; <span class="keyword">end</span>;
0239      <span class="keyword">if</span> fp&lt;0  Volv1=<span class="string">'0'</span>; <span class="keyword">return</span>; <span class="keyword">end</span>;
0240      <span class="keyword">if</span> pf(1) tipo = <span class="string">'e'</span>; <span class="keyword">else</span> tipo = <span class="string">'g'</span>; <span class="keyword">end</span>;
0241      <span class="keyword">if</span> ~fp  pf = pf + [0,1,-1,-1]; <span class="keyword">end</span>;
0242      Volv1 = sprintf(sprintf(<span class="string">'%%1.%d%c'</span>,fp,tipo),val);
0243      lix = length(Volv1);
0244      <span class="keyword">if</span> pf(1) pf = [1:v-pf(2) v+pf(3):v+pf(4)];
0245      <span class="keyword">else</span>     pf = 1:min(v+1,lix);  <span class="keyword">end</span>;
0246      <span class="keyword">if</span> max(pf)&lt;=lix Volv1 = Volv1(pf); <span class="keyword">else</span> Volv1 = <span class="string">'0'</span>; <span class="keyword">end</span>;
0247      <span class="keyword">if</span> vrto==<span class="string">'v'</span>
0248        zp = v-length(Volv1);
0249        <span class="keyword">if</span> isempty(findstr(<span class="string">'.'</span>,Volv1))
0250           <span class="keyword">if</span> zp&gt;0  Volv1 = [Volv1 <span class="string">'.'</span>]; <span class="keyword">end</span>;
0251        <span class="keyword">else</span> zp = zp + 1;
0252        <span class="keyword">end</span>;
0253        <span class="keyword">for</span> k=1:zp  Volv1 = [Volv1 <span class="string">'0'</span>]; <span class="keyword">end</span>;
0254 
0255      <span class="keyword">end</span>;
0256   <span class="keyword">else</span>
0257      Volv1 = sprintf(Csena,val);
0258   <span class="keyword">end</span>;
0259 
0260 <span class="keyword">case</span> 442
0261   tipo = varargin{2};  v = varargin{3};
0262   <span class="keyword">if</span> nargin &lt; 4 arado = <span class="string">' '</span>; <span class="keyword">else</span> arado = varargin{4}; <span class="keyword">end</span>;
0263   Volv1 = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,tipo,v,arado);
0264   <span class="keyword">if</span> length(v)&gt;1 Volv1 = [<span class="string">'['</span> Volv1 <span class="string">']'</span>]; <span class="keyword">end</span>;
0265 <span class="keyword">case</span> 759
0266   c = datevec(varargin{2});
0267   <span class="keyword">if</span> isempty(c) | isnan(c(1)) Volv1 = []; <span class="keyword">return</span>; <span class="keyword">end</span>;
0268   <span class="keyword">if</span> nargin&lt;3 tipo=0; <span class="keyword">else</span> tipo=varargin{3}; <span class="keyword">end</span>;
0269   frac = sprintf(<span class="string">'%4.3f'</span>,mod(c(6),1));
0270   c(6) = floor(c(6));
0271   <span class="keyword">if</span> strcmp(frac,<span class="string">'1.000'</span>)
0272     <span class="keyword">if</span> c(6)==59 frac = <span class="string">'0.999'</span>; <span class="keyword">else</span> c(6) = c(6)+1;  <span class="keyword">end</span>;
0273   <span class="keyword">end</span>;
0274   Volv1 = [datestr(datenum(c),tipo) frac(2:end)];
0275   <span class="keyword">if</span> strcmp(Volv1(7:9),<span class="string">'-20'</span>) Volv1(8:9) = []; <span class="keyword">end</span>;
0276 <span class="keyword">case</span> 543
0277   <span class="keyword">if</span> varargin{2} f = get(gcbo,<span class="string">'use'</span>); <span class="keyword">else</span>  f = <span class="string">''</span>; <span class="keyword">end</span>;
0278   <span class="keyword">if</span> isempty(f)
0279      <span class="keyword">if</span> ispc f = <span class="string">'plt.chm'</span>; <span class="keyword">else</span> f = <span class="string">'plt.htm'</span>; <span class="keyword">end</span>;
0280   <span class="keyword">end</span>;
0281   <span class="keyword">if</span> isempty(findstr(f,filesep)) 
0282     foobar = 0;
0283     <span class="keyword">if</span> exist(<span class="string">'foobar'</span>)
0284          f = feval(<span class="string">'which'</span>,f);
0285     <span class="keyword">else</span> f = fullfile(fileparts(GetExe),f);
0286     <span class="keyword">end</span>;
0287   <span class="keyword">end</span>;
0288   <span class="keyword">if</span> exist(f)
0289     <span class="keyword">if</span> strcmpi(f(end-2:end),<span class="string">'chm'</span>) dos([<span class="string">'hh '</span> f <span class="string">' &amp;'</span>]);
0290     <span class="keyword">elseif</span> exist(<span class="string">'foobar'</span>)         feval(<span class="string">'web'</span>,[<span class="string">'file:///'</span> f ],<span class="string">'-browser'</span>);
0291     <span class="keyword">else</span>                           ibrowse(f);
0292     <span class="keyword">end</span>;
0293   <span class="keyword">end</span>;
0294 
0295 <span class="keyword">case</span> 335
0296 
0297   k = 2;  a1 = varargin{2};
0298   <span class="keyword">if</span> ischar(a1)
0299        g = gca;
0300        a = [0 .3 .4];
0301        a = axes(<span class="string">'vis'</span>,<span class="string">'of'</span>,<span class="string">'XtickL'</span>,<span class="string">' '</span>,<span class="string">'YtickL'</span>,<span class="string">' '</span>,<span class="string">'TickLen'</span>,[0 0]',<span class="string">'color'</span>,a,<span class="string">'xcol'</span>,a,<span class="string">'ycol'</span>,a);
0302        pd = {a   [.1 1 .9]   [0 0]   <span class="string">'none'</span>   []     0         <span class="string">''</span>      1       1};
0303        Volv1 = text(0,0,<span class="string">''</span>,<span class="string">'use'</span>,pd,<span class="string">'interp'</span>,<span class="string">'none'</span>,<span class="string">'color'</span>,[1 1 .4]);
0304        set(Volv1,<span class="string">'ButtonD'</span>,[<span class="string">'plt(''pop'','</span> int2str(Volv1*8192) <span class="string">',''open'',0);'</span>]);
0305        axes(g);
0306   <span class="keyword">else</span> lix = length(a1);  Volv1 = a1;
0307        <span class="keyword">if</span> lix==1 <span class="keyword">if</span> Volv1&gt;8192 Volv1=Volv1/8192; <span class="keyword">end</span>;
0308                k=k+1; pd=get(Volv1,<span class="string">'use'</span>); a=pd{1};
0309        <span class="keyword">else</span>    paraN = varargin{3};  param = varargin{4};  s = size(param,1);
0310                <span class="keyword">if</span> s <span class="keyword">for</span> k=1:lix <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'pop'</span>,Volv1(k),paraN,param(min(k,s),:)); <span class="keyword">end</span>;
0311                <span class="keyword">else</span> <span class="keyword">for</span> k=1:lix <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'pop'</span>,Volv1(k),paraN,[]); <span class="keyword">end</span>;
0312                <span class="keyword">end</span>;
0313                <span class="keyword">return</span>;
0314        <span class="keyword">end</span>;
0315   <span class="keyword">end</span>;
0316   <span class="keyword">while</span> k &lt;= length(varargin)
0317     paraN  = lower(varargin{k});  param = varargin{k+1}; k=k+2;
0318     <span class="keyword">switch</span> sum(paraN)
0319     <span class="keyword">case</span> 857, <span class="keyword">if</span> max(param)&gt;1 s=<span class="string">'pixels'</span>; <span class="keyword">else</span> s=<span class="string">'normal'</span>; <span class="keyword">end</span>;
0320                     <span class="keyword">if</span> length(param)&lt;2 fp=get(a,<span class="string">'pos'</span>);  param=[fp(1:3) param]; <span class="keyword">end</span>;
0321                     set(a,<span class="string">'pos'</span>,param,<span class="string">'units'</span>,s);
0322     <span class="keyword">case</span> 734,  lix = length(param);  pd{6} = param;
0323                     set(Volv1,<span class="string">'str'</span>,param{1},<span class="string">'pos'</span>,[.08 .5-lix],<span class="string">'use'</span>,pd);
0324                     set(a,<span class="string">'yli'</span>,[-lix 0]);
0325     <span class="keyword">case</span> 434,     <span class="keyword">if</span> ~pd{8} <span class="keyword">return</span>; <span class="keyword">end</span>;
0326                     c = get(gcf,<span class="string">'SelectionT'</span>); c = c(1);
0327                     <span class="keyword">if</span> c==<span class="string">'n'</span>
0328                       uh = findobj(pd{5},<span class="string">'vis'</span>,<span class="string">'on'</span>);
0329                       setappdata(Volv1,<span class="string">'Uhide'</span>,uh);
0330                       set([Volv1; uh],<span class="string">'vis'</span>,<span class="string">'of'</span>);  ch = pd{6};  lix = length(ch);
0331                       of = pd{3};  p=get(a,<span class="string">'pos'</span>); pt = p(4)+p(2)+of(2);
0332                       s = get(a,<span class="string">'Units'</span>);
0333                       <span class="keyword">if</span> s(1)==<span class="string">'n'</span> &amp; pt&gt;1
0334                         of(2)=of(2)-pt+1; pd{3}=of; set(Volv1,<span class="string">'use'</span>,pd);
0335                       <span class="keyword">end</span>;
0336                       set(a,<span class="string">'vis'</span>,<span class="string">'on'</span>,<span class="string">'pos'</span>,p+[of 0 0]);  axes(a);
0337                       s = [<span class="string">'plt(''pop'','</span> int2str(8192*Volv1) <span class="string">',''index'','</span>];
0338                       <span class="keyword">for</span> liy=1:lix 
0339                           ht = text(.08,.5-liy,ch{liy});
0340                           set(ht,<span class="string">'interp'</span>,pd{4},<span class="string">'color'</span>,pd{2},<span class="string">'ButtonD'</span>,[s int2str(liy) <span class="string">');'</span>]);
0341                           <span class="keyword">if</span> liy==pd{9} set(ht,<span class="string">'fontw'</span>,<span class="string">'bol'</span>); <span class="keyword">end</span>;
0342                       <span class="keyword">end</span>;
0343                       cr = get(a,<span class="string">'color'</span>);  z = zeros(1,lix-1);
0344                       x = [z;z+1;z];  z = [z;z;z+NaN];   absc = 1:lix-1;  absc = -[absc;absc;absc];
0345                       line(<span class="string">'z'</span>,z(:),<span class="string">'y'</span>,absc(:),<span class="string">'x'</span>,x(:),<span class="string">'color'</span>,cr-.2+.4*(cr&lt;.5));
0346                     <span class="keyword">else</span>
0347                       lix = length(pd{6});  v = pd{9};
0348                       <span class="keyword">if</span> v==lix v=1; <span class="keyword">else</span> v=v+1; <span class="keyword">end</span>;
0349                       <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'pop'</span>,Volv1,<span class="string">'index'</span>,v);
0350                     <span class="keyword">end</span>;
0351     <span class="keyword">case</span> 410,     pd{5} = param;   set(Volv1,<span class="string">'use'</span>,pd);
0352     <span class="keyword">case</span> 647,   <span class="keyword">if</span> length(param)&lt;2 param=[0 param]; <span class="keyword">end</span>;  pd{3}=param; set(Volv1,<span class="string">'use'</span>,pd);
0353     <span class="keyword">case</span> 759,  pd{2} = param;   set(Volv1,<span class="string">'use'</span>,pd);
0354     <span class="keyword">case</span> 748,  set(a,<span class="string">'color'</span>,param,<span class="string">'xcol'</span>,param,<span class="string">'ycol'</span>,param);
0355     <span class="keyword">case</span> 658,   pd{4} = param;  set(Volv1,<span class="string">'use'</span>,pd,<span class="string">'interp'</span>,param);
0356     <span class="keyword">case</span> 536,    pd{9} = abs(param);  set(Volv1,<span class="string">'use'</span>,pd);  v = get(a,<span class="string">'vis'</span>);
0357                     <span class="keyword">if</span> v(2)==<span class="string">'n'</span>
0358                       of = pd{3};
0359                       <span class="keyword">if</span> any(of) set(a,<span class="string">'pos'</span>,get(a,<span class="string">'pos'</span>)-[of 0 0]); <span class="keyword">end</span>;
0360                       set(a,<span class="string">'vis'</span>,<span class="string">'of'</span>);  ch = get(a,<span class="string">'child'</span>);  ch(find(ch==Volv1)) = [];
0361                       delete(ch);
0362                       uh = getappdata(Volv1,<span class="string">'Uhide'</span>);
0363                       set([Volv1; uh],<span class="string">'vis'</span>,<span class="string">'on'</span>);
0364                       ch = gcf;
0365                       matVer = version;  mver = (matVer([1 3])-<span class="string">'0'</span>) * [10; 1];
0366                       <span class="keyword">if</span> mver&lt;75 &amp; matVer(2)==<span class="string">'.'</span>
0367                         set(ch,<span class="string">'Share'</span>,<span class="string">'off'</span>);
0368                         set(ch,<span class="string">'Share'</span>,<span class="string">'on'</span>);
0369                       <span class="keyword">end</span>;
0370                     <span class="keyword">end</span>;
0371                     kk = pd{6}{abs(param)};  set(Volv1,<span class="string">'str'</span>,kk);
0372                     <span class="keyword">if</span> param&gt;0 <a href="#_sub5" class="code" title="subfunction evalRep(a,rep)">evalRep</a>(pd{7},{<span class="string">'@STR'</span>,kk,<span class="string">'@IDX'</span>,int2str(param)}); <span class="keyword">end</span>;
0373     <span class="keyword">case</span> 617,   pd{7} = param;  set(Volv1,<span class="string">'use'</span>,pd);
0374     <span class="keyword">case</span> 320,      Volv1 = pd{6}; xk = pd{9};
0375                     <span class="keyword">switch</span> sum(param)
0376                       <span class="keyword">case</span> 536,   Volv1 = xk;
0377                       <span class="keyword">case</span> 663,  Volv1 = Volv1{xk};
0378                       <span class="keyword">case</span> 734,
0379                       <span class="keyword">otherwise</span>, disp([<span class="string">'Invalid argv='</span> param <span class="string">' in plt(''pop'',H,''get'',argv)'</span>]);;
0380                     <span class="keyword">end</span>;
0381     <span class="keyword">case</span> 615,   pd{8} = param;  set(Volv1,<span class="string">'use'</span>,pd);
0382     <span class="keyword">otherwise</span>,      set(Volv1,paraN,param);
0383     <span class="keyword">end</span>;
0384   <span class="keyword">end</span>;
0385 
0386 <span class="keyword">case</span> 422
0387 
0388   k = 2;  a1 = varargin{2};
0389   <span class="keyword">if</span> ischar(a1)
0390        pd = {<span class="string">''</span>     1     1   -1e9  1e9    1    1    <span class="string">''</span>    <span class="string">''</span>  <span class="string">'%7w'</span>};
0391        Volv1 = text(0,0,<span class="string">'1'</span>,<span class="string">'horiz'</span>,<span class="string">'cent'</span>,<span class="string">'color'</span>,[1 1 .4],<span class="string">'use'</span>,pd);
0392        set(Volv1,<span class="string">'ButtonD'</span>,[<span class="string">'plt(''edit'','</span> int2str(Volv1*8192) <span class="string">',''click'',0);'</span>]);
0393   <span class="keyword">else</span> lix = length(a1);  Volv1 = a1;
0394        <span class="keyword">if</span> lix==1 <span class="keyword">if</span> Volv1&gt;8192 Volv1=Volv1/8192; <span class="keyword">end</span>;
0395                k=k+1; pd=get(Volv1,<span class="string">'use'</span>); a=pd{1};
0396        <span class="keyword">else</span>    paraN = varargin{3};  param = varargin{4};  s = size(param,1);
0397                <span class="keyword">if</span> s <span class="keyword">for</span> k=1:lix <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'edit'</span>,Volv1(k),paraN,param(min(k,s),:)); <span class="keyword">end</span>;
0398                <span class="keyword">else</span> <span class="keyword">for</span> k=1:lix <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'edit'</span>,Volv1(k),paraN,[]); <span class="keyword">end</span>;
0399                <span class="keyword">end</span>;
0400                <span class="keyword">return</span>;
0401        <span class="keyword">end</span>;
0402   <span class="keyword">end</span>;
0403   <span class="keyword">while</span> k &lt;= length(varargin)
0404     paraN  = lower(varargin{k});  param = varargin{k+1}; k=k+2;
0405     <span class="keyword">switch</span> sum(paraN)
0406     <span class="keyword">case</span> 518,
0407       <span class="keyword">if</span> param
0408         c = get(gcf,<span class="string">'CurrentChar'</span>);
0409         <span class="keyword">if</span> ~length(c) c=666;  <span class="keyword">end</span>;
0410         <span class="keyword">if</span> param==2 c=27; <span class="keyword">end</span>;
0411         t = get(Volv1,<span class="string">'str'</span>);   u = get(Volv1,<span class="string">'color'</span>);
0412         p = findstr(t,<span class="string">'_'</span>);  lix = length(t);   termi = 0;  valuar = 0;
0413         <span class="keyword">switch</span> abs(c)
0414         <span class="keyword">case</span> 666,
0415         <span class="keyword">case</span> 8,    <span class="keyword">if</span> p&gt;1 t(p-1)=[]; <span class="keyword">end</span>;
0416         <span class="keyword">case</span> 127,  <span class="keyword">if</span> p==lix t=<span class="string">'_'</span>;
0417                    <span class="keyword">else</span>    t(p+1)=[];
0418                    <span class="keyword">end</span>;
0419         <span class="keyword">case</span> 127,  <span class="keyword">if</span> p==lix t=<span class="string">'_'</span>; <span class="keyword">else</span> t(p+1)=[];  <span class="keyword">end</span>;
0420         <span class="keyword">case</span> 28,   <span class="keyword">if</span> p&gt;1 t(p)=t(p-1); t(p-1)=<span class="string">'_'</span>; <span class="keyword">end</span>;
0421         <span class="keyword">case</span> 29,   <span class="keyword">if</span> p&lt;lix t(p)=t(p+1); t(p+1)=<span class="string">'_'</span>; <span class="keyword">end</span>;
0422         <span class="keyword">case</span> 27,   termi = 1;  t = pd{8};
0423         <span class="keyword">case</span> 13,   termi = 1;
0424                    t(p) = [];
0425                    <span class="keyword">if</span> pd{7}
0426                      tt=t;  t = <span class="string">'error'</span>;
0427                      <span class="keyword">try</span>, s = eval(tt);
0428                         <span class="keyword">if</span> pd{7}==-1 | pd{7}==length(s)
0429                           <span class="keyword">if</span> length(s)==1
0430                             <span class="keyword">if</span> isreal(s)
0431                                  s = max(min(s,pd{5}),pd{4});
0432                                  t = [<span class="string">'  '</span> <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,pd{10},s) <span class="string">'  '</span>];
0433                             <span class="keyword">else</span> pd{6} = imag(s);
0434                                  t = pd{8};
0435                             <span class="keyword">end</span>;
0436                           <span class="keyword">else</span>  t = [<span class="string">'['</span> num2str(s) <span class="string">']'</span>];
0437                           <span class="keyword">end</span>;
0438                           <span class="keyword">if</span> isreal(s)  pd{3} = s;  valuar = 1; <span class="keyword">end</span>;
0439                         <span class="keyword">end</span>;
0440                      <span class="keyword">end</span>;
0441                    <span class="keyword">else</span> pd{3}=0; valuar=1;
0442                    <span class="keyword">end</span>;
0443         <span class="keyword">otherwise</span>, t = strrep(t,<span class="string">'_'</span>,[c <span class="string">'_'</span>]);
0444         <span class="keyword">end</span>;
0445         set(Volv1,<span class="string">'str'</span>,t);
0446         <span class="keyword">if</span> termi
0447           set(Volv1,<span class="string">'use'</span>,pd,<span class="string">'color'</span>,u([3 1 2]),<span class="string">'erase'</span>,<span class="string">'norm'</span>,<span class="string">'interp'</span>,pd{9});
0448           set(gcf,<span class="string">'keypress'</span>,<span class="string">''</span>);
0449           <span class="keyword">if</span> valuar <a href="#_sub5" class="code" title="subfunction evalRep(a,rep)">evalRep</a>(pd{1},{<span class="string">'@VAL'</span>,t,<span class="string">'@OBJ'</span>,int2str(8192*Volv1)}); <span class="keyword">end</span>;
0450         <span class="keyword">end</span>;
0451       <span class="keyword">else</span>
0452         kp = get(gcf,<span class="string">'keypress'</span>);  f = findstr(kp,<span class="string">'click'</span>);
0453         <span class="keyword">if</span> length(f)==1  kp(f+7) = <span class="string">'2'</span>;  eval(kp); <span class="keyword">return</span>; <span class="keyword">end</span>;
0454         <span class="keyword">if</span> ~pd{2} <span class="keyword">return</span>; <span class="keyword">end</span>;
0455         c = get(gcf,<span class="string">'SelectionT'</span>); c = c(1);
0456         <span class="keyword">if</span> c ~= <span class="string">'a'</span>
0457           v = pd{3}; w = pd{6};
0458           <span class="keyword">if</span> pd{7}==1 &amp; abs(round(v/w)*w-v) &lt; 1e-9
0459             cp = get(gca,<span class="string">'curre'</span>); cp = cp(1,1);
0460             imX = get(gca,<span class="string">'xli'</span>);  rp = get(Volv1,<span class="string">'pos'</span>);
0461             cp = (cp-imX(1))/diff(imX) &gt; rp(1);
0462             cp = w * (2*cp-1);
0463             s = v + cp;
0464             <span class="keyword">if</span> s&gt;pd{5} s=pd{4}; <span class="keyword">elseif</span> s&lt;pd{4} s=pd{5}; <span class="keyword">end</span>;
0465             pd{3} = s;  s = [<span class="string">'  '</span> <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,pd{10},s) <span class="string">'  '</span>];
0466             set(Volv1,<span class="string">'str'</span>,s,<span class="string">'use'</span>,pd);
0467             <a href="#_sub5" class="code" title="subfunction evalRep(a,rep)">evalRep</a>(pd{1},{<span class="string">'@VAL'</span>,s,<span class="string">'@OBJ'</span>,int2str(8192*Volv1)});
0468             <span class="keyword">return</span>;
0469           <span class="keyword">else</span> c=<span class="string">'a'</span>;
0470           <span class="keyword">end</span>;
0471         <span class="keyword">end</span>;
0472         <span class="keyword">if</span> c==<span class="string">'a'</span>
0473           t = get(Volv1,<span class="string">'str'</span>);
0474           <span class="keyword">if</span> ~strcmp(t,<span class="string">'error'</span>) pd{8} = t; <span class="keyword">end</span>;
0475           t = deblank(t);  <span class="keyword">while</span>(t(1)==<span class="string">' '</span>) t(1)=[]; <span class="keyword">end</span>;
0476           viehoc = get(Volv1,<span class="string">'color'</span>);
0477           pd{9} = get(Volv1,<span class="string">'interp'</span>);
0478           set(Volv1,<span class="string">'interp'</span>,<span class="string">'none'</span>,<span class="string">'str'</span>,[t <span class="string">'_'</span>],<span class="string">'color'</span>,viehoc([2 3 1]),<span class="string">'erase'</span>,<span class="string">'xor'</span>,<span class="string">'use'</span>,pd);
0479           set(gcf,<span class="string">'keypress'</span>,[<span class="string">'plt(''edit'','</span> int2str(Volv1*8192) <span class="string">',''click'',1);'</span>]);
0480         <span class="keyword">end</span>;
0481       <span class="keyword">end</span>;
0482     <span class="keyword">case</span> 320,     Volv1 = pd{3};
0483     <span class="keyword">case</span> 541,   pd{3}  = param;  set(Volv1,<span class="string">'str'</span>,[<span class="string">'  '</span> <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,pd{10},param) <span class="string">'  '</span>],<span class="string">'use'</span>,pd);
0484     <span class="keyword">case</span> 617,  pd{1} = param;  set(Volv1,<span class="string">'use'</span>,pd);
0485     <span class="keyword">case</span> 324,     pd{4}    = param;  set(Volv1,<span class="string">'use'</span>,pd);
0486     <span class="keyword">case</span> 326,     pd{5}    = param;  set(Volv1,<span class="string">'use'</span>,pd);
0487     <span class="keyword">case</span> 428,    pd{6}   = param;  set(Volv1,<span class="string">'use'</span>,pd);
0488     <span class="keyword">case</span> 642,  pd{7}    = param;  set(Volv1,<span class="string">'use'</span>,pd);
0489     <span class="keyword">case</span> 615,  pd{2}    = param;  set(Volv1,<span class="string">'use'</span>,pd);
0490     <span class="keyword">case</span> 649,  pd{10}    = param;  set(Volv1,<span class="string">'use'</span>,pd);
0491     <span class="keyword">otherwise</span>,     set(Volv1,paraN,param);
0492     <span class="keyword">end</span>;
0493   <span class="keyword">end</span>;
0494 
0495 <span class="keyword">case</span> 643
0496   Hin = varargin{2};
0497   <span class="keyword">if</span> length(Hin)&gt;1
0498      <span class="keyword">if</span> nargin&gt;2  en1 = varargin{3}; <span class="keyword">else</span> en1 = [50 0 100]; <span class="keyword">end</span>;
0499      <span class="keyword">if</span> nargin&gt;3  en2 = varargin{4}; <span class="keyword">else</span> en2 = <span class="string">''</span>;    <span class="keyword">end</span>;
0500      <span class="keyword">if</span> nargin&gt;4  en3 = varargin{5}; <span class="keyword">else</span> en3 = <span class="string">''</span>;    <span class="keyword">end</span>;
0501      <span class="keyword">if</span> nargin&gt;5  en4 = varargin{6}; <span class="keyword">else</span> en4 = 1;     <span class="keyword">end</span>;
0502      <span class="keyword">if</span> nargin&gt;6  en5 = varargin{7}; <span class="keyword">else</span> en5 = <span class="string">'%6w'</span>; <span class="keyword">end</span>;
0503      <span class="keyword">if</span> nargin&gt;7  en6 = varargin{8}; <span class="keyword">else</span> en6 = [.75 .75 .75; 0 1 1]; <span class="keyword">end</span>;
0504 
0505      <span class="keyword">if</span> length(en1)&lt;5 en1 = [en1 -1e99 1e99]; <span class="keyword">end</span>;
0506      <span class="keyword">if</span> ischar(en5) &amp; length(en5(:,1))==1 en5 = {<span class="string">'%2w'</span>; en5; <span class="string">'%3w'</span>}; <span class="keyword">end</span>;
0507      <span class="keyword">if</span> iscell(en5) en5 = char(en5); <span class="keyword">end</span>;
0508      <span class="keyword">if</span> length(en6(:,1))&lt;3 en6 = [en6; 0 0 0; 0 0 0]; <span class="keyword">end</span>; 
0509 
0510      t = get(findobj(<span class="string">'tag'</span>,<span class="string">'PltSlider'</span>),<span class="string">'Val'</span>);
0511      <span class="keyword">if</span> iscell(t) Volv1 = 1+max([t{:}]);
0512      <span class="keyword">else</span> Volv1 = 1+length(t);
0513      <span class="keyword">end</span>;
0514      hs = zeros(1,8);
0515      hs(2)  = uicontrol(<span class="string">'sty'</span>,<span class="string">'text'</span>,<span class="string">'str'</span>,en2,<span class="string">'tag'</span>,<span class="string">'PltSlider'</span>,<span class="string">'Val'</span>,Volv1,<span class="string">'horiz'</span>,<span class="string">'cent'</span>);
0516      <span class="keyword">if</span> isempty(en2) set(hs(2),<span class="string">'vis'</span>,<span class="string">'off'</span>); <span class="keyword">end</span>;
0517      hs(4) = uicontrol(<span class="string">'sty'</span>,<span class="string">'text'</span>,<span class="string">'str'</span>,<span class="string">'a'</span>,<span class="string">'use'</span>,en5,<span class="string">'horiz'</span>,<span class="string">'left'</span>);
0518      hs(5) = uicontrol(<span class="string">'sty'</span>,<span class="string">'text'</span>,<span class="string">'str'</span>,<span class="string">'a'</span>,<span class="string">'use'</span>,en3,<span class="string">'horiz'</span>,<span class="string">'right'</span>);
0519      hs(3)  = uicontrol(<span class="string">'sty'</span>,<span class="string">'slid'</span>,<span class="string">'use'</span>,en1(1),<span class="string">'call'</span>,sprintf(<span class="string">'plt(''slider'',%d,''CBslide'');'</span>,Volv1));
0520      hs(6)  = uicontrol(<span class="string">'sty'</span>,<span class="string">'edit'</span>,<span class="string">'backg'</span>,en6(2,:),<span class="string">'foreg'</span>,en6(4,:),<span class="string">'use'</span>,en1(4:5),<span class="string">'horiz'</span>,<span class="string">'cent'</span>,<span class="keyword">...</span>
0521                       <span class="string">'call'</span>,sprintf(<span class="string">'plt(''slider'',%d,''CBedit'');'</span>,Volv1));
0522      set(hs(2:5),<span class="string">'backg'</span>,en6(1,:),<span class="string">'foreg'</span>,en6(3,:));
0523      en4 = [en4 10];  hs([7 8]) = en4(1:2);
0524      set(hs(2),<span class="string">'use'</span>,hs);
0525      <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'slider'</span>,Volv1,<span class="string">'set'</span>,<span class="string">'minmax'</span>,en1(2:5),en1(1));
0526      <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'slider'</span>,Volv1,<span class="string">'set'</span>,<span class="string">'position'</span>,Hin);
0527      <span class="keyword">return</span>;
0528   <span class="keyword">end</span>;
0529 
0530   hs = findobj(<span class="string">'tag'</span>,<span class="string">'PltSlider'</span>,<span class="string">'Val'</span>,Hin);
0531   <span class="keyword">if</span> length(hs) ~= 1 disp(<span class="string">'Bad PltSlider handle'</span>); <span class="keyword">return</span>; <span class="keyword">end</span>;
0532   hs   = get(hs,<span class="string">'use'</span>);
0533   fmat = get(hs(4),<span class="string">'use'</span>);
0534 
0535   accion = varargin{3};
0536   <span class="keyword">if</span> nargin&gt;3  en0 = varargin{4};  <span class="keyword">else</span> en0 = <span class="string">''</span>; <span class="keyword">end</span>;
0537   <span class="keyword">if</span> nargin&gt;4  en1 = varargin{5};  <span class="keyword">else</span> en1 = []; <span class="keyword">end</span>;
0538   <span class="keyword">if</span> nargin&gt;5  en2 = varargin{6};  <span class="keyword">else</span> en2 = []; <span class="keyword">end</span>;
0539 
0540   <span class="keyword">switch</span> sum(accion)
0541   <span class="keyword">case</span> 662
0542      ov = get(hs(3),<span class="string">'use'</span>);    nv = get(hs(3),<span class="string">'Val'</span>);
0543      smax   = get(hs(3),<span class="string">'max'</span>);   smin   = get(hs(3),<span class="string">'min'</span>);
0544      dv = nv-ov;  sdv = sign(dv);
0545      <span class="keyword">switch</span> hs(7)
0546      <span class="keyword">case</span> 4,
0547         v = hs(8)*round(nv/hs(8));
0548         <span class="keyword">if</span> v==ov v = v + hs(8)*sdv; <span class="keyword">end</span>;
0549         nv = v;
0550      <span class="keyword">case</span> 2,
0551         v = round(nv);
0552         <span class="keyword">if</span> v==ov v = v + sdv; <span class="keyword">end</span>;
0553         nv = v;
0554      <span class="keyword">case</span> 5,
0555         paso = exp(log(smax/smin)*abs(dv)/(smax-smin));
0556         <span class="keyword">if</span> dv&gt;0 nv=ov*paso; <span class="keyword">elseif</span> dv&lt;0 nv=ov/paso; <span class="keyword">end</span>;
0557      <span class="keyword">case</span> 3,
0558         <span class="keyword">if</span> nv &gt;= get(hs(3),<span class="string">'use'</span>)-eps  nv=2^nextpow2(nv);
0559         <span class="keyword">else</span>                                  nv=2^nextpow2(nv/2);
0560         <span class="keyword">end</span>;
0561      <span class="keyword">case</span> 6,
0562         pdv = abs(dv)/(smax-smin);
0563         <span class="keyword">if</span> pdv &gt; .11     nv = hs(8)*round(nv/hs(8));
0564         <span class="keyword">elseif</span> pdv &gt; .02 nv = ov + hs(8)*sdv;
0565         <span class="keyword">else</span>             nv = ov + sdv;
0566         <span class="keyword">end</span>;
0567      <span class="keyword">end</span>;
0568      <span class="keyword">if</span> nv&lt;smin nv = smin; <span class="keyword">end</span>;
0569      <span class="keyword">if</span> nv&gt;smax nv = smax; <span class="keyword">end</span>;
0570      set(hs(6),<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,fmat(2,:),nv));
0571      set(hs(3),<span class="string">'Val'</span>,nv,<span class="string">'use'</span>,nv);
0572      <a href="#_sub5" class="code" title="subfunction evalRep(a,rep)">evalRep</a>(get(hs(5),<span class="string">'use'</span>),{<span class="string">'@VAL'</span>,sprintf(<span class="string">'%g'</span>,nv)});
0573 
0574   <span class="keyword">case</span> 555
0575      nv = <a href="#_sub7" class="code" title="subfunction v = s2d(s)">s2d</a>(get(hs(6),<span class="string">'str'</span>));
0576      <span class="keyword">if</span> isempty(nv)
0577          set(hs(6),<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,fmat(2,:),get(hs(3),<span class="string">'Val'</span>)));
0578      <span class="keyword">else</span>
0579         <span class="keyword">switch</span> hs(7)
0580         <span class="keyword">case</span> 2,  nv = round(nv);
0581         <span class="keyword">case</span> 3,  nv = 2 ^ nextpow2(nv/1.414);
0582         <span class="keyword">case</span> 4, nv=hs(8)*round(nv/hs(8));
0583         <span class="keyword">end</span>;
0584         minmax = get(hs(6),<span class="string">'use'</span>);
0585         nv = min(max(nv,minmax(1)),minmax(2));
0586         Volv1 = nv;
0587         set(hs(6),<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,fmat(2,:),nv));
0588         nv = max(min(get(hs(3),<span class="string">'max'</span>),nv),get(hs(3),<span class="string">'min'</span>));
0589         set(hs(3),<span class="string">'Val'</span>,nv,<span class="string">'use'</span>,nv);
0590         <a href="#_sub5" class="code" title="subfunction evalRep(a,rep)">evalRep</a>(get(hs(5),<span class="string">'use'</span>),{<span class="string">'@VAL'</span>,sprintf(<span class="string">'%g'</span>,nv)});
0591      <span class="keyword">end</span>;
0592 
0593   <span class="keyword">case</span> 320
0594      <span class="keyword">switch</span> sum(en0)
0595      <span class="keyword">case</span> 338, Volv1 = sum(get(hs(2),<span class="string">'vis'</span>)) == 221;
0596      <span class="keyword">case</span> 308, Volv1 = sum(get(hs(2),<span class="string">'ena'</span>)) == 221;
0597      <span class="keyword">case</span> 315, Volv1 = hs(2:6);
0598      <span class="keyword">otherwise</span> Volv1 = <a href="#_sub7" class="code" title="subfunction v = s2d(s)">s2d</a>(get(hs(6),<span class="string">'str'</span>));
0599      <span class="keyword">end</span>;
0600   <span class="keyword">case</span> 332
0601      <span class="keyword">if</span> isnumeric(en0) en1 = en0;  en0 = <span class="string">'value'</span>; <span class="keyword">end</span>;
0602      <span class="keyword">switch</span> sum(en0)
0603      <span class="keyword">case</span> 541
0604         set(hs(6),<span class="string">'str'</span>,num2str(en1));
0605         Volv1 = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'slider'</span>,get(hs(2),<span class="string">'Val'</span>),<span class="string">'CBedit'</span>);
0606      <span class="keyword">case</span> 323
0607         set(hs(6),<span class="string">'str'</span>,num2str(en1));
0608         sv = get(hs(5),<span class="string">'use'</span>);  set(hs(5),<span class="string">'use'</span>,<span class="string">''</span>);
0609         Volv1 = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'slider'</span>,get(hs(2),<span class="string">'Val'</span>),<span class="string">'CBedit'</span>);
0610         set(hs(5),<span class="string">'use'</span>,sv);
0611      <span class="keyword">case</span> 495, set(hs(2:6),<span class="string">'vis'</span>,<span class="string">'on'</span>)
0612                    <span class="keyword">if</span> isempty(get(hs(2),<span class="string">'str'</span>)) set(hs(2),<span class="string">'vis'</span>,<span class="string">'of'</span>); <span class="keyword">end</span>;
0613      <span class="keyword">case</span> 557, set(hs(2:6),<span class="string">'vis'</span>,<span class="string">'of'</span>);
0614      <span class="keyword">case</span> 527, set(hs([3 6]),<span class="string">'ena'</span>,<span class="string">'of'</span>);
0615      <span class="keyword">case</span> 465,  set(hs([3 6]),<span class="string">'ena'</span>,<span class="string">'on'</span>);
0616      <span class="keyword">case</span> 885,
0617         a = .1*get(0,<span class="string">'screenp'</span>)-9.6;
0618         p = get(gcf,<span class="string">'pos'</span>);
0619         <span class="keyword">if</span> length(en1&lt;3) en1 = [en1 .13]; <span class="keyword">end</span>;
0620         <span class="keyword">if</span> en1(1)&lt;1 en1(1) = en1(1)*p(3); <span class="keyword">end</span>;
0621         <span class="keyword">if</span> en1(2)&lt;1 en1(2) = en1(2)*p(4); <span class="keyword">end</span>;
0622         <span class="keyword">if</span> en1(3)&lt;1 en1(3) = en1(3)*p(3); <span class="keyword">end</span>;
0623         lmax = 7 + 7*fix(<a href="#_sub7" class="code" title="subfunction v = s2d(s)">s2d</a>(fmat(3,2:(length(deblank(fmat(3,:)))-1))));
0624         lmin = 7 + 7*fix(<a href="#_sub7" class="code" title="subfunction v = s2d(s)">s2d</a>(fmat(1,2:(length(deblank(fmat(1,:)))-1))));
0625         <span class="keyword">if</span> isnan(lmax) lmax = 28; <span class="keyword">end</span>;
0626         <span class="keyword">if</span> isnan(lmin) lmin = 14; <span class="keyword">end</span>;
0627         ha = a + 17;       ya = en1(2) - a - 17;
0628         set(hs(2:6),<span class="string">'units'</span>,<span class="string">'pix'</span>,{<span class="string">'pos'</span>},<span class="keyword">...</span>
0629                {[en1(1:3) 16+a/2];
0630                 [en1(1),en1(2)-33,en1(3),17-a-1];
0631                 [en1(1),ya,lmin,ha];
0632                 [en1(3)+en1(1)-lmax,ya,lmax,ha];
0633                 [en1(1)+lmin,ya-1,en1(3)-(lmin+lmax),ha+2]},<span class="keyword">...</span>
0634             <span class="string">'units'</span>,<span class="string">'nor'</span>);
0635      <span class="keyword">case</span> 421
0636         hs(7) = en1(1);
0637         <span class="keyword">if</span> length(en1)&gt;1 hs(8) = en1(2); <span class="keyword">end</span>;
0638         set(hs(2),<span class="string">'use'</span>,hs);
0639         Volv1 = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'slider'</span>,get(hs(2),<span class="string">'Val'</span>),<span class="string">'CBedit'</span>);
0640      <span class="keyword">case</span> 650
0641         <span class="keyword">if</span> length(en1)&lt;4 en1 = [en1 -1e99 1e99]; <span class="keyword">end</span>;
0642         set(hs(5),<span class="string">'str'</span>,[<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,fmat(3,:),en1(2)) <span class="string">' '</span>]);
0643         set(hs(4),<span class="string">'str'</span>,[<span class="string">' '</span> <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,fmat(1,:),en1(1))]);
0644         set(hs(6),<span class="string">'use'</span>,en1(3:4));
0645         v = <a href="#_sub7" class="code" title="subfunction v = s2d(s)">s2d</a>(get(hs(6),<span class="string">'str'</span>));
0646         <span class="keyword">if</span> ~isempty(en2) v = en2; <span class="keyword">end</span>;
0647         v = min(max(v,en1(3)),en1(4));
0648         set(hs(6),<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,fmat(2,:),v));
0649         set(hs(3),<span class="string">'min'</span>,en1(1),<span class="string">'max'</span>,en1(2),<span class="string">'Val'</span>,min(max(en1(1),v),en1(2)));
0650         Volv1 = <a href="#_sub7" class="code" title="subfunction v = s2d(s)">s2d</a>(get(hs(6),<span class="string">'str'</span>));
0651      <span class="keyword">case</span> 512,  set(hs(2),<span class="string">'str'</span>,en1);
0652                    <span class="keyword">if</span> isempty(en1) set(hs(2),<span class="string">'vis'</span>,<span class="string">'of'</span>); <span class="keyword">end</span>;
0653      <span class="keyword">end</span>;
0654   <span class="keyword">otherwise</span> disp(sprintf(<span class="string">'Invalid Action in plt(''slider''), Action=%s'</span>,accion));
0655   <span class="keyword">end</span>;
0656 
0657 <span class="keyword">case</span> 390
0658   v2 = varargin{2};
0659   <span class="keyword">if</span> nargin==2 accion=<span class="string">'update'</span>; <span class="keyword">else</span>  accion = varargin{3};  <span class="keyword">end</span>;
0660   <span class="keyword">if</span> sum(accion) == 436
0661     <span class="keyword">if</span> nargin&lt;4 grdclr = [.3,.3,.3]; <span class="keyword">else</span> grdclr = varargin{4}; <span class="keyword">end</span>;
0662     <span class="keyword">if</span> nargin&lt;5 erMode = <span class="string">'xor'</span>; <span class="keyword">else</span> erMode = varargin{5}; <span class="keyword">end</span>;
0663     axes(v2);  f = findobj(v2,<span class="string">'type'</span>,<span class="string">'line'</span>);
0664     <span class="keyword">if</span> length(f) f=get(f(1),<span class="string">'ButtonD'</span>); <span class="keyword">end</span>;
0665     rejaH = line(<span class="string">'color'</span>,grdclr,<span class="string">'Tag'</span>,<span class="string">'SkipCur'</span>,<span class="string">'ButtonD'</span>,f,<span class="string">'LineStyle'</span>,<span class="string">':'</span>,<span class="string">'use'</span>,<span class="string">'grid'</span>,<span class="string">'erase'</span>,erMode);
0666     accion = <span class="string">'on'</span>;
0667     <span class="keyword">if</span> nargin &gt;= 6 set(rejaH,varargin{6},varargin{7}); <span class="keyword">end</span>;
0668     <span class="keyword">if</span> nargin &gt;= 8 set(rejaH,varargin{8},varargin{9}); <span class="keyword">end</span>;
0669     set(v2,<span class="string">'child'</span>,flipud(get(v2,<span class="string">'child'</span>)));
0670   <span class="keyword">else</span>  rejaH = findobj(v2,<span class="string">'use'</span>,<span class="string">'grid'</span>);  z = get(rejaH,<span class="string">'z'</span>);
0671         Volv1 = length(z);
0672         <span class="keyword">if</span> Volv1 Volv1 = z(1) | Volv1&gt;=2; <span class="keyword">end</span>;
0673   <span class="keyword">end</span>;
0674 
0675   <span class="keyword">switch</span> sum(accion)
0676   <span class="keyword">case</span> 643, <span class="keyword">if</span> Volv1 accion=<span class="string">'on'</span>; <span class="keyword">end</span>;
0677                 <a href="#_sub1" class="code" title="subfunction fixMark()">fixMark</a>;
0678   <span class="keyword">case</span> 642, <span class="keyword">if</span> Volv1 accion=<span class="string">'off'</span>; <span class="keyword">else</span> accion=<span class="string">'on'</span>; <span class="keyword">end</span>;
0679   <span class="keyword">end</span>;
0680 
0681   x=0; absc=0;
0682   <span class="keyword">switch</span> sum(accion)
0683   <span class="keyword">case</span> 221,  z=1; Volv1=1;
0684              l = [get(v2,<span class="string">'xli'</span>) get(v2,<span class="string">'yli'</span>)];
0685              ckY = [l(3) get(v2,<span class="string">'YTICK'</span>) l(4)];  liy = length(ckY);
0686              ckX = [l(1) get(v2,<span class="string">'XTICK'</span>) l(2)];  lix = length(ckX);
0687              <span class="keyword">if</span> ckY(2) &lt;= ckY(1)   ckY = ckY(2:liy);   liy=liy-1; <span class="keyword">end</span>;
0688              <span class="keyword">if</span> ckY(liy) &lt;= ckY(liy-1) liy=liy-1;  ckY = ckY(1:liy);  <span class="keyword">end</span>;
0689              <span class="keyword">if</span> ckX(2) &lt;= ckX(1)   ckX = ckX(2:lix);   lix=lix-1; <span class="keyword">end</span>;
0690              <span class="keyword">if</span> ckX(lix) &lt;= ckX(lix-1) lix=lix-1;  ckX = ckX(1:lix);  <span class="keyword">end</span>;
0691              t = liy + lix - 4;
0692              <span class="keyword">if</span> t s = ones(3,1);  absc = [1 liy liy];  x = [1 lix lix];  lix=lix-1;  liy=liy-1;
0693                   z = [0;0;NaN] * ones(1,t);           z=z(:);
0694                   absc = [s*ckY(2:liy)  ckY(absc)'*ones(1,lix-1)]; absc=absc(:);
0695                   x = [ckX(x)'*ones(1,liy-1) s*ckX(2:lix)];  x=x(:);
0696              <span class="keyword">end</span>;
0697   <span class="keyword">case</span> 315, z=0; Volv1=0;
0698   <span class="keyword">end</span>;
0699   set(rejaH,<span class="string">'z'</span>,z,<span class="string">'y'</span>,absc,<span class="string">'x'</span>,x);
0700 
0701 <span class="keyword">case</span> 436
0702   accion = varargin{2};
0703   <span class="keyword">if</span> nargin &gt; 2  en0 = varargin{3};
0704                  <span class="keyword">if</span> nargin &gt; 3  en1 = varargin{4}; <span class="keyword">end</span>;
0705   <span class="keyword">end</span>;
0706   <span class="keyword">switch</span> sum(accion)
0707   <span class="keyword">case</span> 436
0708      copia(12)= en0;
0709      set(0,<span class="string">'units'</span>,<span class="string">'pix'</span>);  sz = get(0,<span class="string">'screens'</span>);
0710      szw = sz(3) - 350 - 4;
0711      ppos  = get(gcf,<span class="string">'pos'</span>);
0712      <span class="keyword">if</span> ppos(4)&lt;1 sp = sz(3:4); ppos = ppos .* [sp sp]; <span class="keyword">end</span>;
0713      xp = min(ppos(1)+ppos(3)+6,szw);
0714      yp = ppos(2)+ppos(4)-105-30*length(findobj(<span class="string">'type'</span>,<span class="string">'fig'</span>,<span class="string">'use'</span>,gcf));
0715      <span class="keyword">if</span> nargin ==4  renderer = en1; <span class="keyword">else</span> renderer = <span class="string">'-painters'</span>;  <span class="keyword">end</span>;
0716      copia(1)=figure(<span class="string">'menu'</span>,<span class="string">'none'</span>,<span class="string">'number'</span>,<span class="string">'off'</span>,<span class="string">'Back'</span>,<span class="string">'off'</span>,<span class="string">'resize'</span>,<span class="string">'off'</span>,<span class="string">'pos'</span>,[xp yp 350 105],<span class="string">'color'</span>,[0,.4,.4],<span class="string">'name'</span>,<span class="string">'Hardcopy'</span>,<span class="string">'use'</span>,gcf);
0717      foobar = 0;
0718      <span class="keyword">if</span> exist(<span class="string">'foobar'</span>)
0719           cpath = feval(<span class="string">'which'</span>,<span class="string">'plt.m'</span>);
0720      <span class="keyword">else</span> cpath = GetExe;
0721      <span class="keyword">end</span>;
0722      filen = [fileparts(cpath) filesep <span class="string">'pltHcpy.mat'</span>];
0723      f = fopen(filen);
0724      <span class="keyword">if</span> f&gt;=0 fclose(f); load(filen);
0725      <span class="keyword">else</span>
0726        z = [0 0];  t = z+1;  w = [0 1];
0727        pS1=[z;z;[2 1];w;t;w;t;z;t;w;z];
0728        pS2 = <span class="string">'nofile.000'</span>;
0729      <span class="keyword">end</span>;
0730      copia(3)   = uicontrol(<span class="string">'sty'</span>,<span class="string">'pop'</span>,<span class="string">'str'</span>,[<span class="string">'Win Meta|Bit Map|HPGL|LaserJet IIp|Post Script|Encaps PS|Windows'</span>],<span class="keyword">...</span>
0731                              <span class="string">'call'</span>,<span class="string">'plt(''hcpy'',''ModePUcb'');'</span>);
0732      copia(5)  = uicontrol(<span class="string">'sty'</span>,<span class="string">'radio'</span>,<span class="string">'str'</span>,<span class="string">'color'</span>,<span class="string">'call'</span>,<span class="string">'plt(''hcpy'',''rbg1'',''C'');'</span>);
0733      copia(4)     = uicontrol(<span class="string">'sty'</span>,<span class="string">'radio'</span>,<span class="string">'str'</span>,<span class="string">'B&amp;W'</span>,<span class="string">'call'</span>,<span class="string">'plt(''hcpy'',''rbg1'',''BW'');'</span>);
0734      copia(6) = uicontrol(<span class="string">'sty'</span>,<span class="string">'radio'</span>,<span class="string">'str'</span>,<span class="string">'Clip Board'</span>,<span class="string">'call'</span>,<span class="string">'plt(''hcpy'',''rbg2'',''cb'');'</span>);
0735      copia(8)    = uicontrol(<span class="string">'sty'</span>,<span class="string">'radio'</span>,<span class="string">'str'</span>,<span class="string">'Device'</span>,<span class="string">'call'</span>,<span class="string">'plt(''hcpy'',''rbg2'',''dev'');'</span>);
0736      copia(7)   = uicontrol(<span class="string">'sty'</span>,<span class="string">'radio'</span>,<span class="string">'str'</span>,<span class="string">'File'</span>,<span class="string">'call'</span>,<span class="string">'plt(''hcpy'',''rbg2'',''file'');'</span>);
0737      copia(11) = uicontrol(<span class="string">'sty'</span>,<span class="string">'text'</span>,<span class="string">'str'</span>,pS2,<span class="string">'horiz'</span>,<span class="string">'left'</span>);
0738      copia(10)  = uicontrol(<span class="string">'sty'</span>,<span class="string">'text'</span>,<span class="string">'str'</span>, <span class="string">'Path/File:'</span>,<span class="string">'horiz'</span>,<span class="string">'left'</span>);
0739      copia(9)  = uicontrol(<span class="string">'str'</span>,<span class="string">'Print'</span>,<span class="string">'call'</span>,<span class="string">'plt(''hcpy'',''print'');'</span>,<span class="string">'use'</span>,renderer);
0740      copia(2)   = uicontrol(<span class="string">'str'</span>,<span class="string">'Select File'</span>,<span class="string">'call'</span>,[<span class="string">'plt(''hcpy'',''OpenPBcb'');'</span>]);
0741      cncl            = uicontrol(<span class="string">'str'</span>,<span class="string">'Cancel'</span>,<span class="string">'call'</span>,<span class="string">'close(gcf)'</span>);
0742      h1 = copia([3 5 4 6 8 7]);
0743      h2 = copia([11 10]);
0744      h3 = [copia([9 2]) cncl];
0745      set(h1,{<span class="string">'Val'</span>},{pS1(3,1); pS1(5,1); pS1(4,1); pS1(6,1); pS1(8,1); pS1(7,1)});
0746      set([h1 h2],<span class="string">'backg'</span>,[.8,.8,.9],<span class="string">'foreg'</span>,<span class="string">'black'</span>);
0747      set([h1 h2 h3],{<span class="string">'pos'</span>},{[115 80 100 15]; [ 10 85 65 15]; [10 70  65 15]; [245 85 95 15];
0748                            [245 55  95 15]; [245 70 95 15]; [10 35 330 15]; [ 10 50 65 15];
0749                            [110  5  55 20]; [ 10  5 85 20]; [180 5  55 20]});
0750 
0751      <span class="keyword">for</span> kk=1+1:12-1
0752        <span class="keyword">if</span> pS1(kk,2)==1  set(copia(kk),<span class="string">'ena'</span>,<span class="string">'on'</span>); <span class="keyword">else</span> set(copia(kk),<span class="string">'ena'</span>,<span class="string">'of'</span>); <span class="keyword">end</span>;
0753      <span class="keyword">end</span>;
0754 
0755      <span class="keyword">if</span> get(copia(8),<span class="string">'Val'</span>) set(copia(2),<span class="string">'str'</span>,<span class="string">'Select Dev'</span>);
0756      <span class="keyword">else</span>                       set(copia(2),<span class="string">'str'</span>,<span class="string">'Select File'</span>);
0757      <span class="keyword">end</span>;
0758      set(copia(1),<span class="string">'vis'</span>,<span class="string">'on'</span>);
0759   <span class="keyword">case</span> 364
0760      <span class="keyword">switch</span> sum(en0)
0761      <span class="keyword">case</span> 67,  set(copia(5),<span class="string">'Val'</span>,1); set(copia(4),<span class="string">'Val'</span>,0);
0762      <span class="keyword">case</span> 153, set(copia(4),<span class="string">'Val'</span>,1);    set(copia(5),<span class="string">'Val'</span>,0);
0763      <span class="keyword">end</span>;
0764   <span class="keyword">case</span> 365
0765      <span class="keyword">switch</span> sum(en0)
0766      <span class="keyword">case</span> 319,  set(copia(6),<span class="string">'Val'</span>,0);  set(copia(7),<span class="string">'Val'</span>,0);
0767                  set(copia(9),<span class="string">'ena'</span>,<span class="string">'on'</span>); set(copia(11),<span class="string">'ena'</span>,<span class="string">'of'</span>);
0768                  set(copia(8),<span class="string">'Val'</span>,1);      set(copia(2),<span class="string">'str'</span>,<span class="string">'Select Dev'</span>,<span class="string">'ena'</span>,<span class="string">'on'</span>);
0769      <span class="keyword">case</span> 197,   set(copia(6),<span class="string">'Val'</span>,1);   set(copia(7),<span class="string">'Val'</span>,0);
0770                  set(copia(9),<span class="string">'ena'</span>,<span class="string">'on'</span>); set(copia(11),<span class="string">'ena'</span>,<span class="string">'of'</span>);
0771                  set(copia(8),<span class="string">'Val'</span>,0);     set(copia(2),<span class="string">'ena'</span>,<span class="string">'of'</span>);
0772      <span class="keyword">case</span> 416, set(copia(6),<span class="string">'Val'</span>,0);  set(copia(7),<span class="string">'Val'</span>,1);
0773                  set(copia(8),<span class="string">'Val'</span>,0);     set(copia(2),<span class="string">'str'</span>,<span class="string">'Select File'</span>,<span class="string">'ena'</span>,<span class="string">'on'</span>);
0774                  cher = get(copia(11),<span class="string">'str'</span>);
0775                  <span class="keyword">if</span> length(cher)&lt;5 cher=<span class="string">'none'</span>; set(copia(11),<span class="string">'str'</span>,cher); <span class="keyword">end</span>;
0776                  <span class="keyword">if</span> strcmp(cher(1:4),<span class="string">'none'</span>) set(copia(9),<span class="string">'ena'</span>,<span class="string">'of'</span>); <span class="keyword">end</span>;
0777                  set(copia(11),<span class="string">'ena'</span>,<span class="string">'on'</span>);
0778      <span class="keyword">end</span>;
0779   <span class="keyword">case</span> 751
0780      en = [1 1 0 1 1; 1 1 0 1 0; 1 1 0 1 1; 1 1 0 0 1; 0 1 0 1 1; 0 1 0 1 1; 0 0 1 1 1];
0781      va = [0 1 0 1 0; 0 1 0 1 0; 0 1 0 0 1; 0 1 0 0 1; 0 1 0 1 0; 0 1 0 1 0; 0 0 1 1 0];
0782      s = get(copia(3),<span class="string">'Val'</span>);
0783      ipo=reshape(<span class="string">'WMFBMPHGLJETPS EPSxxxxxx'</span>,3,8)';
0784      <span class="keyword">if</span> s==7  set(copia(2),<span class="string">'str'</span>,<span class="string">'Select Dev'</span>, <span class="string">'ena'</span>,<span class="string">'on'</span>); set(copia(11),<span class="string">'ena'</span>,<span class="string">'of'</span>);
0785      <span class="keyword">else</span>     set(copia(2),<span class="string">'str'</span>,<span class="string">'Select File'</span>,<span class="string">'ena'</span>,<span class="string">'on'</span>); set(copia(11),<span class="string">'ena'</span>,<span class="string">'on'</span>);
0786               cher = get(copia(11),<span class="string">'str'</span>);
0787               <span class="keyword">if</span> length(cher)&lt;5 cher=<span class="string">'none'</span>; set(copia(11),<span class="string">'str'</span>,cher); <span class="keyword">end</span>;
0788               nfn=length(cher);
0789               <span class="keyword">if</span> cher(nfn-3) == <span class="string">'.'</span>
0790                    set(copia(11),<span class="string">'str'</span>,[cher(1:nfn-3) ipo(s,:)]);
0791               <span class="keyword">else</span> set(copia(11),<span class="string">'str'</span>,[cher ipo(s,:)]);
0792               <span class="keyword">end</span>;
0793      <span class="keyword">end</span>;
0794      ena = {<span class="string">'off'</span> <span class="string">'on'</span>};
0795      set(copia(6),<span class="string">'ena'</span>,ena{1+en(s,1)},<span class="string">'Val'</span>,va(s,1));
0796      set(copia(7),  <span class="string">'ena'</span>,ena{1+en(s,2)},<span class="string">'Val'</span>,va(s,2));
0797      set(copia(8),   <span class="string">'ena'</span>,ena{1+en(s,3)},<span class="string">'Val'</span>,va(s,3));
0798      set(copia(5), <span class="string">'ena'</span>,ena{1+en(s,4)},<span class="string">'Val'</span>,va(s,4));
0799      set(copia(4),    <span class="string">'ena'</span>,ena{1+en(s,5)},<span class="string">'Val'</span>,va(s,5));
0800   <span class="keyword">case</span> 745
0801      <span class="keyword">if</span> strcmp(<span class="string">'Select File'</span>,get(copia(2),<span class="string">'str'</span>))
0802         ipo=reshape(<span class="string">'WMFBMPHGLJETPS EPSxxxxxx'</span>,3,8)';
0803         [cher,pathN]= uiputfile([<span class="string">'*.'</span>,ipo(get(copia(3),<span class="string">'Val'</span>),:)],<span class="string">'Open (new) File'</span>);
0804         <span class="keyword">if</span> cher
0805            fi = cher;
0806            <span class="keyword">if</span> isempty(findstr(<span class="string">','</span>,fi)) fi = [fi <span class="string">'.'</span> ipo(get(copia(3),<span class="string">'Val'</span>),:)]; <span class="keyword">end</span>;
0807            set(copia(11),<span class="string">'str'</span>,[pathN fi]);  set(copia(9),<span class="string">'ena'</span>,<span class="string">'on'</span>);
0808         <span class="keyword">end</span>;
0809      <span class="keyword">elseif</span> strcmp(<span class="string">'Select Dev'</span>,get(copia(2),<span class="string">'str'</span>)) print -dsetup
0810      <span class="keyword">else</span>   disp(<span class="string">'Invalid OpenPBcb string'</span>);
0811      <span class="keyword">end</span>;
0812   <span class="keyword">case</span> 557
0813      trvS= get(copia(12),<span class="string">'invert'</span>);
0814      set(copia(12),<span class="string">'invert'</span>,<span class="string">'off'</span>);
0815      figure(copia(12)); drawnow;
0816      PrintMode = get(copia(3),<span class="string">'Val'</span>);
0817      colorFlg  = get(copia(5),<span class="string">'Val'</span>);
0818      nirS = sprintf(<span class="string">'print -f%d'</span>,copia(12));
0819      renderer = get(copia(9),<span class="string">'use'</span>);
0820      opcion={[<span class="string">' '</span> renderer <span class="string">' -dmeta '</span>];<span class="string">' -dbitmap '</span>;<span class="string">' -dhpgl '</span>;<span class="string">' -dljet2p '</span>};
0821      <span class="keyword">if</span> colorFlg opcion = [opcion; {<span class="string">' -dpsc '</span>;<span class="string">' -depsc '</span>;<span class="string">' -dwinc '</span>}];
0822      <span class="keyword">else</span>        opcion = [opcion; {<span class="string">' -dps '</span> ;<span class="string">' -deps  '</span>;<span class="string">' -dwin  '</span>}];
0823      <span class="keyword">end</span>;
0824      nirS=[nirS opcion{PrintMode,:} <span class="string">' '</span>];
0825      <span class="keyword">if</span> get(copia(7),<span class="string">'Val'</span>)==1
0826         PathFilen = get(copia(11),<span class="string">'str'</span>);  nirS=[nirS <span class="string">''''</span> PathFilen <span class="string">''''</span>];
0827      <span class="keyword">end</span>;
0828      nirS = [nirS <span class="string">' -noui'</span>];  axh = [];  axh = findobj(copia(12),<span class="string">'type'</span>,<span class="string">'axes'</span>);  nvx = length(axh);
0829      <span class="keyword">if</span> ~colorFlg
0830         figC=get(copia(12),<span class="string">'color'</span>);
0831         nino = [];   axCol = zeros(nvx,3);  imar = zeros(nvx,1);
0832         <span class="keyword">for</span> kk=1:nvx
0833            x = get(axh(kk),<span class="string">'color'</span>);
0834            <span class="keyword">if</span> strcmp(<span class="string">'none'</span>,x) imar(kk) = 1; <span class="keyword">else</span> axCol(kk,:)  = x; <span class="keyword">end</span>;
0835            nino = [nino; get(axh(kk),<span class="string">'child'</span>)];
0836            xCol(kk,:) = get(axh(kk),<span class="string">'xcol'</span>);  yCol(kk,:) = get(axh(kk),<span class="string">'ycol'</span>);
0837            tCol(kk,:) = get(get(axh(kk),<span class="string">'title'</span>),<span class="string">'color'</span>);
0838            <span class="keyword">if</span> xCol(kk,:) == figC  imar(kk) = imar(kk) + 2; <span class="keyword">end</span>;
0839         <span class="keyword">end</span>;
0840         nnino = length(nino);
0841         <span class="keyword">for</span> kk=1:nnino
0842            <span class="keyword">if</span> sum(get(nino(kk),<span class="string">'type'</span>))==528   kidCol(kk,:) = get(nino(kk),<span class="string">'facecolor'</span>);
0843                                                     set(nino(kk),<span class="string">'facecolor'</span>,[.25 .25 .25]);
0844            <span class="keyword">else</span> kidCol(kk,:) = get(nino(kk),<span class="string">'color'</span>); set(nino(kk),<span class="string">'color'</span>,<span class="string">'black'</span>);
0845            <span class="keyword">end</span>;
0846         <span class="keyword">end</span>;
0847         set(copia(12),<span class="string">'color'</span>,<span class="string">'white'</span>);
0848         <span class="keyword">for</span> kk= 1:nvx
0849            <span class="keyword">if</span> imar(kk)==1 | imar(kk)==3
0850            <span class="keyword">else</span> set(axh(kk),<span class="string">'color'</span>,<span class="string">'white'</span>);
0851            <span class="keyword">end</span>;
0852            <span class="keyword">if</span> imar(kk)&gt;=2 set(axh(kk),<span class="string">'xcol'</span>,<span class="string">'white'</span>,<span class="string">'ycol'</span>,<span class="string">'white'</span> );
0853            <span class="keyword">else</span>            set(axh(kk),<span class="string">'xcol'</span>,<span class="string">'black'</span>,<span class="string">'ycol'</span>,<span class="string">'black'</span> );
0854            <span class="keyword">end</span>;
0855         <span class="keyword">end</span>;
0856         <span class="keyword">for</span> kk=1:nvx
0857            <span class="keyword">if</span> get(get(axh(kk),<span class="string">'title'</span>),<span class="string">'color'</span>)==figC set(get(axh(kk),<span class="string">'title'</span>),<span class="string">'color'</span>,<span class="string">'white'</span>);
0858            <span class="keyword">else</span>                                    set(get(axh(kk),<span class="string">'title'</span>),<span class="string">'color'</span>,<span class="string">'black'</span>);
0859            <span class="keyword">end</span>;
0860            <span class="keyword">if</span> imar(kk) &gt;=2
0861                 set(get(axh(kk),<span class="string">'xlabel'</span>),<span class="string">'color'</span>,<span class="string">'white'</span>); set(get(axh(kk),<span class="string">'ylabel'</span>),<span class="string">'color'</span>,<span class="string">'white'</span>);
0862            <span class="keyword">else</span> set(get(axh(kk),<span class="string">'xlabel'</span>),<span class="string">'color'</span>,<span class="string">'black'</span>); set(get(axh(kk),<span class="string">'ylabel'</span>),<span class="string">'color'</span>,<span class="string">'black'</span>);
0863            <span class="keyword">end</span>;
0864         <span class="keyword">end</span>;
0865      <span class="keyword">end</span>;
0866      set(copia(1),<span class="string">'pointer'</span>,<span class="string">'watch'</span>); drawnow; pause(1);
0867      <span class="keyword">if</span> PrintMode == 2
0868         set(copia(1),<span class="string">'vis'</span>,<span class="string">'of'</span>);
0869         refresh
0870         eval(nirS);
0871         set(copia(1),<span class="string">'vis'</span>,<span class="string">'on'</span>);
0872      <span class="keyword">else</span>  drawnow discard;  eval(nirS);
0873      <span class="keyword">end</span>;
0874      <span class="keyword">if</span> ~colorFlg &amp; (PrintMode ~=4 | PrintMode ~=7)
0875         set(copia(12),<span class="string">'color'</span>,figC);
0876         <span class="keyword">for</span> kk=1:nvx
0877            <span class="keyword">if</span> ~rem(imar(kk),2) set(axh(kk),<span class="string">'color'</span>,axCol(kk,:)); <span class="keyword">end</span>;
0878            set(axh(kk),<span class="string">'xcol'</span>,xCol(kk,:)); set(axh(kk),<span class="string">'ycol'</span>,yCol(kk,:));
0879            set(get(axh(kk),<span class="string">'title'</span>),<span class="string">'color'</span>,tCol(kk,:));
0880         <span class="keyword">end</span>;
0881         <span class="keyword">for</span> kk=1:nnino
0882            <span class="keyword">if</span> sum(get(nino(kk),<span class="string">'type'</span>))==528 set(nino(kk),<span class="string">'facecolor'</span>,kidCol(kk,:));
0883            <span class="keyword">else</span>                                   set(nino(kk),<span class="string">'color'</span>,kidCol(kk,:));
0884            <span class="keyword">end</span>;
0885         <span class="keyword">end</span>;
0886         <span class="keyword">if</span> PrintMode==2 drawnow; <span class="keyword">else</span> drawnow discard; <span class="keyword">end</span>;
0887      <span class="keyword">end</span>;
0888      pS1=zeros(12-1,2);
0889      <span class="keyword">for</span> kk=1+1:12-1
0890         pS1(kk,1) = get(copia(kk),<span class="string">'Val'</span>);
0891         <span class="keyword">if</span> sum(get(copia(kk),<span class="string">'ena'</span>))==221 pS1(kk,2)=1; <span class="keyword">end</span>;
0892      <span class="keyword">end</span>;
0893      pS2=get(copia(11),<span class="string">'str'</span>);
0894      foobar = 0;
0895      <span class="keyword">if</span> exist(<span class="string">'foobar'</span>)
0896           cpath = feval(<span class="string">'which'</span>,<span class="string">'plt.m'</span>);
0897      <span class="keyword">else</span> cpath = GetExe;
0898      <span class="keyword">end</span>;
0899      save([fileparts(cpath) filesep <span class="string">'pltHcpy.mat'</span>],<span class="string">'pS1'</span>,<span class="string">'pS2'</span>);
0900      close(copia(1));
0901      set(copia(12),<span class="string">'invert'</span>,trvS);
0902      clear copia
0903   <span class="keyword">otherwise</span> disp([accion <span class="string">' invalid Action in plt(hcpy)'</span>]);
0904   <span class="keyword">end</span>;
0905 
0906 <span class="keyword">case</span> 670
0907 
0908     <span class="keyword">if</span> nargin&lt;3 disp(<span class="string">'Not enough arguments plt(''cursor'',...)'</span>); <span class="keyword">return</span>;  <span class="keyword">end</span>;
0909     cador = varargin{2};
0910     accion = varargin{3};
0911     <span class="keyword">if</span> nargin &gt; 3
0912       en0 = varargin{4};
0913       <span class="keyword">if</span> nargin &gt; 4
0914         en1 = varargin{5};
0915         <span class="keyword">if</span> nargin &gt; 5
0916           en2 = varargin{6};  <span class="keyword">if</span> iscell(en2) en2 = char(en2); <span class="keyword">end</span>;
0917           <span class="keyword">if</span> nargin &gt; 6
0918             en3 = varargin{7};
0919             <span class="keyword">if</span> nargin &gt; 7
0920               en4 = varargin{8};
0921               <span class="keyword">if</span> nargin &gt; 8
0922                 en5 = varargin{9};  <span class="keyword">if</span> iscell(en5) en5 = char(en5); <span class="keyword">end</span>;
0923                 <span class="keyword">if</span> nargin &gt; 9
0924                   en6 = varargin{10};
0925                   <span class="keyword">if</span> nargin &gt; 10
0926                     en7 = varargin{11};
0927                     <span class="keyword">if</span> nargin &gt; 11 en8 = varargin{12}; <span class="keyword">end</span>;
0928                   <span class="keyword">end</span>;
0929                 <span class="keyword">end</span>;
0930               <span class="keyword">end</span>;
0931             <span class="keyword">end</span>;
0932           <span class="keyword">end</span>;
0933         <span class="keyword">end</span>;
0934       <span class="keyword">end</span>;
0935     <span class="keyword">end</span>;
0936 
0937     CurPri = getappdata(0,<span class="string">'CurMain'</span>);
0938     sact = sum(accion);
0939     <span class="keyword">if</span> sact ~= 436
0940       <span class="keyword">if</span> isempty(cador) <span class="keyword">return</span>; <span class="keyword">end</span>;
0941       Hc = get(CurPri(cador),<span class="string">'use'</span>);
0942       v2 = Hc(13);  ax2 = Hc(14);
0943       aconex = 0;
0944       <span class="keyword">if</span> ax2
0945            <span class="keyword">if</span> sum(get(ax2,<span class="string">'vis'</span>)) == 315  ax2=0;
0946            <span class="keyword">else</span> aconex = [get(get(ax2,<span class="string">'ylabel'</span>),<span class="string">'str'</span>) <span class="string">'  '</span>];
0947                 aconex = aconex(1)~=92 | aconex(2) ~= <span class="string">'d'</span>;
0948            <span class="keyword">end</span>;
0949       <span class="keyword">end</span>;
0950       nw1 = Hc(4);  nw2 = Hc(6);
0951       tm = get(nw1,<span class="string">'use'</span>);
0952       actv = tm(4);
0953       iact = 14 + actv;
0954       hact = Hc(iact);
0955       LMda = [get(v2,<span class="string">'xli'</span>) get(v2,<span class="string">'yli'</span>)];
0956       xyli = LMda;
0957       <span class="keyword">if</span> get(hact,<span class="string">'par'</span>)==ax2 xyli(3:4) = get(ax2,<span class="string">'yli'</span>); <span class="keyword">end</span>;
0958       DuaC = getappdata(v2,<span class="string">'DualCur'</span>);
0959     <span class="keyword">end</span>;
0960     nargin2=nargin;
0961     <span class="keyword">switch</span> sact
0962     <span class="keyword">case</span> 436
0963       v2 = cador(1);
0964       DuaC = getappdata(v2,<span class="string">'DualCur'</span>);
0965       <span class="keyword">if</span> isempty(DuaC) DuaC = 0;  setappdata(v2,<span class="string">'DualCur'</span>,0); <span class="keyword">end</span>;
0966       Hc(13) = v2;
0967       <span class="keyword">if</span> length(cador)==2  ax2 = cador(2); <span class="keyword">else</span> ax2 = 0; <span class="keyword">end</span>;
0968       Hc(14) = ax2;
0969       hf = get(v2,<span class="string">'par'</span>);
0970       <span class="keyword">if</span> nargin2&gt;=10 vis=en6; <span class="keyword">else</span> vis = <span class="string">'on'</span>; <span class="keyword">end</span>;
0971       Cn = length(CurPri);
0972       f = find(~CurPri);
0973       <span class="keyword">if</span> length(f) cador = f(1);
0974       <span class="keyword">else</span> CurPri = [CurPri 0]; cador = Cn+1;
0975       <span class="keyword">end</span>;
0976       <span class="keyword">if</span> cador&gt;200 disp(<span class="string">'Warning: Clear actions missing for 200 cursor inits'</span>); <span class="keyword">end</span>;
0977       Volv1 = cador;
0978       rasHT = sprintf(<span class="string">'plt(''cursor'',%d,'</span>,cador);
0979       hRastro = getappdata(v2,<span class="string">'Lhandles'</span>);
0980       <span class="keyword">if</span> isempty(hRastro)
0981         hRastro = flipud(findobj(v2,<span class="string">'type'</span>,<span class="string">'line'</span>));
0982       <span class="keyword">end</span>;
0983       fct = findobj(hRastro,<span class="string">'Tag'</span>,<span class="string">'SkipCur'</span>);
0984       <span class="keyword">if</span> length(fct) [c kk] = setdiff(hRastro,fct);
0985                     c = sortrows([c kk],2);
0986                     hRastro = c(:,1);
0987       <span class="keyword">end</span>;
0988       axes(v2);
0989       <span class="keyword">if</span> isempty(en1) en1 = [.7 .7 .7; 0 0 0; 1 1 .5; 1 0 0; 0 0 0]; <span class="keyword">end</span>;
0990       trk = ~sum(en1(2,:));
0991       <span class="keyword">if</span> length(hRastro)
0992          en1n = length(en1(:,1));
0993          cHilo = length(hRastro);
0994          cli4 = cHilo + 4;
0995          <span class="keyword">if</span> en1n &lt; cli4
0996            en1 = en1(min(1:cli4,en1n*ones(1,cli4)),:);
0997          <span class="keyword">end</span>;
0998          en3n = length(en3);
0999          <span class="keyword">if</span> en3n&lt;cHilo
1000            en3 = en3(min(1:cHilo,en3n*ones(1,cHilo)));
1001          <span class="keyword">end</span>;
1002          en1n     = length(en1(:,1));
1003          objectoC = en1(5:en1n,:);
1004          tact = 0;
1005          <span class="keyword">if</span> ax2  hLines2 = findobj(ax2,<span class="string">'type'</span>,<span class="string">'line'</span>); <span class="keyword">else</span> hLines2 = 0; <span class="keyword">end</span>;
1006          <span class="keyword">for</span> kk=1:cHilo
1007             hi = hRastro(kk);
1008             argo = [get(hi,<span class="string">'x'</span>); get(hi,<span class="string">'y'</span>)];
1009             <span class="keyword">if</span> sum(objectoC(kk,:)) curColor = objectoC(kk,:);
1010             <span class="keyword">else</span>                  curColor = get(hi,<span class="string">'color'</span>);
1011             <span class="keyword">end</span>;
1012             Hc(14+kk)=line(<span class="string">'x'</span>,argo(1,1),<span class="string">'y'</span>,argo(2,1),<span class="string">'erase'</span>,<span class="string">'xor'</span>,<span class="string">'color'</span>,curColor,<span class="keyword">...</span>
1013                             <span class="string">'clipping'</span>,<span class="string">'on'</span>,<span class="string">'vis'</span>,vis,<span class="string">'use'</span>,[hi trk]);
1014             set(Hc(14+kk),<span class="string">'Marker'</span>,en3(kk),<span class="string">'MarkerSize'</span>,en4);
1015             set(hi,<span class="string">'ButtonD'</span>,sprintf(<span class="string">'%s''lineCB'',%d);'</span>,rasHT,kk));
1016             <span class="keyword">if</span> ~tact &amp; (sum(get(hi,<span class="string">'vis'</span>))==221) tact = kk; <span class="keyword">end</span>;
1017             <span class="keyword">if</span> length(find(hi==hLines2)) set(Hc(14+kk),<span class="string">'par'</span>,ax2); <span class="keyword">end</span>;
1018          <span class="keyword">end</span>;
1019       <span class="keyword">else</span> disp(<span class="string">'no lines to attach cursors to'</span>)
1020       <span class="keyword">end</span>;
1021       <span class="keyword">if</span> max(max(en0))&gt;2 unitt = <span class="string">'Pixels'</span>; <span class="keyword">else</span> unitt = <span class="string">'Normal'</span>; <span class="keyword">end</span>;
1022       Sfuente = (196-get(0,<span class="string">'screenpix'</span>))/10;
1023       <span class="keyword">for</span> kk=2:3
1024         <span class="keyword">if</span> kk==2  cordo  = <span class="string">'''x'');'</span>; <span class="keyword">else</span> cordo  = <span class="string">'''y'');'</span>; <span class="keyword">end</span>;
1025         cordo= [rasHT <span class="string">'''scaleAxis'','</span> cordo];
1026         <span class="keyword">if</span> isempty(en2) en2 = [<span class="string">'x'</span>;<span class="string">'y'</span>]; <span class="keyword">end</span>;
1027         Hc(kk) = uicontrol(hf,<span class="string">'Style'</span>,<span class="string">'text'</span>,<span class="string">'fontsi'</span>,Sfuente,<span class="string">'vis'</span>,vis,<span class="string">'str'</span>,deblank(en2(kk-2+1,:)),<span class="keyword">...</span>
1028                 <span class="string">'Units'</span>,unitt,<span class="string">'pos'</span>,en0(kk-1,:),<span class="string">'backg'</span>,en1(1,:),<span class="string">'horiz'</span>,<span class="string">'cent'</span>,<span class="string">'ButtonD'</span>,cordo,<span class="string">'call'</span>,cordo);
1029       <span class="keyword">end</span>;
1030       <span class="keyword">for</span> kk=4:7
1031         <span class="keyword">if</span> trk==1 objectoC = [1 1 1]; <span class="keyword">else</span> objectoC = en1(2,:); <span class="keyword">end</span>;
1032         cordo  = sprintf(<span class="string">'%s''editCB'',%d);'</span>,rasHT,kk-4);
1033         <span class="keyword">if</span> kk==5 | kk==7   objectoC=get(gcf,<span class="string">'color'</span>); <span class="keyword">end</span>;
1034         Hc(kk)  = uicontrol(hf,<span class="string">'Style'</span>,<span class="string">'edit'</span>,<span class="string">'fontsi'</span>,Sfuente,<span class="string">'vis'</span>,vis,<span class="string">'str'</span>,<span class="string">' '</span>,<span class="string">'Units'</span>,unitt,<span class="string">'pos'</span>,en0(kk-1,:),<span class="keyword">...</span>
1035                            <span class="string">'foreg'</span>,get(v2,<span class="string">'color'</span>),<span class="string">'backg'</span>,objectoC,<span class="string">'horiz'</span>,<span class="string">'left'</span>,<span class="string">'call'</span>,cordo);
1036       <span class="keyword">end</span>;
1037       <span class="keyword">if</span> ~DuaC set(Hc(7),<span class="string">'vis'</span>,<span class="string">'of'</span>); <span class="keyword">end</span>;
1038       set(Hc(5),<span class="string">'vis'</span>,<span class="string">'of'</span>);
1039       nw1 = Hc(4);  nw2 = Hc(6);
1040       ih = [8 9 10];  c = [173 175 68];  u = {-inf inf <span class="string">''</span>};
1041       cbs = {<span class="string">'''peakval'',0);'</span>, <span class="string">'''peakval'',1);'</span>, <span class="string">'''markCB'','''');'</span>};
1042       <span class="keyword">for</span> k = 1:3
1043         liy = ih(k);
1044         Hc(liy) = uicontrol(hf,<span class="string">'Units'</span>,unitt,<span class="string">'pos'</span>,en0(liy-1,:),<span class="string">'vis'</span>,vis,<span class="string">'horiz'</span>,<span class="string">'cent'</span>,<span class="keyword">...</span>
1045                   <span class="string">'str'</span>,char(c(k)),<span class="string">'fontname'</span>,<span class="string">'symbol'</span>,<span class="string">'fontw'</span>,<span class="string">'bol'</span>,<span class="keyword">...</span>
1046                   <span class="string">'call'</span>,[rasHT cbs{k}],<span class="string">'use'</span>,u{k});
1047       <span class="keyword">end</span>;
1048       set(Hc(8), <span class="string">'ui'</span>,uicontextmenu(<span class="string">'call'</span>,[rasHT <span class="string">'''peakval'',2);'</span>]));
1049       set(Hc(9),<span class="string">'ui'</span>,uicontextmenu(<span class="string">'call'</span>,[rasHT <span class="string">'''peakval'',3);'</span>]));
1050       set(Hc(10),<span class="string">'fontsi'</span>,12,<span class="string">'ena'</span>,<span class="string">'of'</span>);
1051       Hc(12) = line(<span class="string">'x'</span>,[],<span class="string">'y'</span>,[],<span class="string">'erase'</span>,<span class="string">'xor'</span>,<span class="string">'color'</span>,en1(4,:),<span class="string">'vis'</span>,<span class="string">'of'</span>);
1052       set(Hc(12),<span class="string">'Marker'</span>,<span class="string">'+'</span>,<span class="string">'MarkerSize'</span>,5*en4,<span class="string">'tag'</span>,<span class="string">'DeltaC'</span>);
1053       <span class="keyword">if</span> nargin2&lt;9 en5 = <span class="string">''</span>; <span class="keyword">end</span>;
1054       <span class="keyword">if</span> isempty(en5) en5 = [<span class="string">'%7w'</span>;<span class="string">'%7w'</span>]; <span class="keyword">end</span>;
1055       set(Hc(3),<span class="string">'use'</span>,en5);
1056       <span class="keyword">if</span> length(en0(:,1)) &gt; 9
1057         uicontrol(hf,<span class="string">'style'</span>,<span class="string">'slider'</span>,<span class="string">'Units'</span>,unitt,<span class="string">'pos'</span>,en0(10,:),<span class="keyword">...</span>
1058              <span class="string">'backg'</span>,[.3 .3 .3],<span class="string">'Min'</span>,0,<span class="string">'Max'</span>,1000,<span class="string">'Val'</span>,500,<span class="string">'use'</span>,500,<span class="keyword">...</span>
1059              <span class="string">'vis'</span>,vis,<span class="string">'call'</span>,[rasHT <span class="string">'''xslider'');'</span>],<span class="string">'tag'</span>,<span class="string">'xslider'</span>);
1060       <span class="keyword">end</span>;
1061       set(get(v2,<span class="string">'xlabel'</span>),<span class="string">'ButtonD'</span>,[rasHT <span class="string">'''xincr'');'</span>]);
1062       kk = [rasHT <span class="string">'''axisCB'');'</span>];
1063       Hc(11) = line(<span class="string">'x'</span>,[],<span class="string">'y'</span>,[],<span class="string">'erase'</span>,<span class="string">'xor'</span>,<span class="string">'vis'</span>,<span class="string">'of'</span>,<span class="string">'color'</span>,en1(3,:),<span class="string">'ButtonD'</span>,kk);
1064       set([hf v2],<span class="string">'ButtonD'</span>,kk);
1065       <span class="keyword">if</span> nargin2&gt;=11 &amp; length(en7) jst1 = en7; <span class="keyword">else</span> jst1 = -1; <span class="keyword">end</span>;
1066       <span class="keyword">if</span> nargin2&gt;=12 set(Hc(5),<span class="string">'use'</span>,en8); <span class="keyword">else</span> set(Hc(5),<span class="string">'use'</span>,<span class="string">''</span>); <span class="keyword">end</span>;
1067       tm = zeros(1,8);
1068       <span class="keyword">if</span> ax2 set(ax2,<span class="string">'ButtonD'</span>,[rasHT <span class="string">'''AxisCBaux'');'</span>]); <span class="keyword">end</span>;
1069       tm(5) = jst1;
1070       tm(4) = max(1,tact);
1071       set(nw1,<span class="string">'use'</span>,tm);
1072       set(Hc(7),<span class="string">'use'</span>,<span class="string">''</span>,<span class="string">'Tag'</span>,<span class="string">''</span>);
1073       set(Hc(2),<span class="string">'use'</span>,Hc);
1074       CurPri(cador) = Hc(2);
1075       setappdata(0,<span class="string">'CurMain'</span>,CurPri);
1076 
1077     <span class="keyword">case</span> 719
1078       <span class="keyword">if</span> nargin&lt;8
1079         en4 = [];
1080         <span class="keyword">if</span> nargin&lt;7
1081           en3 = [];
1082           <span class="keyword">if</span> nargin&lt;5 en1 = []; <span class="keyword">end</span>;
1083         <span class="keyword">end</span>;
1084       <span class="keyword">end</span>;
1085       <span class="keyword">if</span> isempty(en1)
1086         RastH = get(hact,<span class="string">'use'</span>);
1087         x = get(RastH(1),<span class="string">'x'</span>);  absc = get(RastH(1),<span class="string">'y'</span>);
1088         <span class="keyword">if</span> en0&lt;1 en0 = tm(1); <span class="keyword">end</span>;
1089         lix = length(x);
1090         <span class="keyword">if</span> en0&gt;lix  lix = round(lix/2);  en1 = x(lix);    en2 = absc(lix);
1091         <span class="keyword">else</span>                       en1 = x(en0);  en2 = absc(en0);
1092         <span class="keyword">end</span>;
1093       <span class="keyword">end</span>;
1094       <span class="keyword">if</span> isempty(en3) en3 = sum(get(Hc(12),<span class="string">'vis'</span>))==221; <span class="keyword">end</span>;
1095 
1096       lmx = xyli(1:2);   ylim = xyli(3:4);
1097       xd = 1.01 * (en1-lmx);
1098       yd = 1.01 * (en2-ylim);
1099       <span class="keyword">if</span> xd(1)&lt;=0 lmx = lmx + xd(1); <span class="keyword">elseif</span> xd(2)&gt;=0 lmx = lmx+xd(2); <span class="keyword">end</span>;
1100       <span class="keyword">if</span> yd(1)&lt;=0 ylim = ylim + yd(1); <span class="keyword">elseif</span> yd(2)&gt;=0 ylim = ylim+yd(2); <span class="keyword">end</span>;
1101       <span class="keyword">if</span> ~isequal(xyli,[lmx ylim])
1102          set(v2,<span class="string">'xli'</span>,lmx);
1103          <span class="keyword">if</span> ax2 set(ax2,<span class="string">'xli'</span>,lmx); <span class="keyword">end</span>;
1104          set(get(hact,<span class="string">'par'</span>),<span class="string">'yli'</span>,ylim);
1105          <span class="keyword">if</span> length(findobj(v2,<span class="string">'use'</span>,<span class="string">'grid'</span>)) <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'grid'</span>,v2,<span class="string">'update'</span>); <span class="keyword">end</span>;
1106          <a href="#_sub4" class="code" title="subfunction evalQ(a)">evalQ</a>(get(Hc(5),<span class="string">'use'</span>));
1107       <span class="keyword">end</span>;
1108 
1109       set(hact,<span class="string">'y'</span>,en2,<span class="string">'x'</span>,en1);
1110       tipo = get(Hc(3),<span class="string">'use'</span>);
1111       <span class="keyword">if</span> length(en4)
1112          fr = repmat(max(en4.*[.9 1 .5])&lt;=.5,1,3);
1113          set([nw1 nw2],<span class="string">'backg'</span>,en4,<span class="string">'foreg'</span>,fr);
1114          allC = Hc(14+1:end);
1115          <span class="keyword">if</span> DuaC allC(DuaC) = []; <span class="keyword">end</span>;
1116          set(allC,<span class="string">'vis'</span>,<span class="string">'of'</span>);
1117          set(hact,<span class="string">'vis'</span>,<span class="string">'on'</span>);
1118          <span class="keyword">if</span> ax2 | en3  set(Hc(7),<span class="string">'backg'</span>,en4,<span class="string">'foreg'</span>,fr); <span class="keyword">end</span>;
1119          set(Hc([2:3]),<span class="string">'ena'</span>,<span class="string">'inact'</span>); set(Hc(10),<span class="string">'ena'</span>,<span class="string">'on'</span>);
1120       <span class="keyword">end</span>;
1121       set(nw2,<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,tipo(2,:),en2));
1122       set(nw1,<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,tipo(1,:),en1));
1123       <span class="keyword">if</span> en3
1124          bk = get(nw1,<span class="string">'backg'</span>);
1125          fr = get(nw1,<span class="string">'foreg'</span>);
1126          set(Hc(7),<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,tipo(2,:),en2-get(Hc(12),<span class="string">'y'</span>)),<span class="string">'backg'</span>,bk,<span class="string">'foreg'</span>,fr,<span class="string">'vis'</span>,<span class="string">'on'</span>);
1127          set(Hc(5),<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,tipo(1,:),en1-get(Hc(12),<span class="string">'x'</span>)),<span class="string">'backg'</span>,bk,<span class="string">'foreg'</span>,fr,<span class="string">'vis'</span>,<span class="string">'on'</span>);
1128       <span class="keyword">end</span>;
1129       tm([1 2 3]) = [en0 en1 en2];
1130       set(nw1,<span class="string">'use'</span>,tm);
1131       s = get(Hc(7),<span class="string">'Tag'</span>);
1132       <span class="keyword">if</span> length(s) eval(s); <span class="keyword">end</span>;
1133       sx = getappdata(v2,<span class="string">'xstr'</span>);  sy = getappdata(v2,<span class="string">'ystr'</span>);  s = [sx sy];
1134       rep1 = {<span class="string">'@XVAL'</span>,<span class="string">'real(@XY)'</span>,<span class="keyword">...</span>
1135               <span class="string">'@YVAL'</span>,<span class="string">'imag(@XY)'</span>,<span class="keyword">...</span>
1136               <span class="string">'@XY'</span>,  <span class="string">'plt(&quot;cursor&quot;,@CID,&quot;get&quot;,&quot;position&quot;)'</span>,<span class="keyword">...</span>
1137               <span class="string">'@IDX'</span>, <span class="string">'plt2nd({&quot;cursor&quot;,@CID,&quot;get&quot;,&quot;position&quot;})'</span>,<span class="keyword">...</span>
1138               <span class="string">'@LNUM'</span>,<span class="string">'plt(&quot;cursor&quot;,@CID,&quot;get&quot;,&quot;activeLine&quot;)'</span>,<span class="keyword">...</span>
1139               <span class="string">'@HAND'</span>,<span class="string">'plt2nd({&quot;cursor&quot;,@CID,&quot;get&quot;,&quot;activeLine&quot;})'</span>,<span class="keyword">...</span>
1140               <span class="string">'@XU'</span>  ,[<span class="string">'get8192('</span> int2str(8192*sx) <span class="string">',&quot;user&quot;)'</span>],<span class="keyword">...</span>
1141               <span class="string">'@YU'</span>  ,[<span class="string">'get8192('</span> int2str(8192*sy) <span class="string">',&quot;user&quot;)'</span>],<span class="keyword">...</span>
1142               <span class="string">'@CID'</span>, sprintf(<span class="string">'%d'</span>,cador)};
1143       <span class="keyword">for</span> k=1:length(s)
1144         set(s(k),<span class="string">'str'</span>,<a href="#_sub6" class="code" title="subfunction r = evalRep2(a,rep)">evalRep2</a>(getappdata(s(k),<span class="string">'evl'</span>),rep1));
1145       <span class="keyword">end</span>;
1146       <span class="keyword">if</span> length(getappdata(v2,<span class="string">'moveCBext'</span>)) | length(find(v2==findobj(gcf,<span class="string">'type'</span>,<span class="string">'axes'</span>)))
1147         s = get(Hc(7),<span class="string">'use'</span>);
1148         <span class="keyword">if</span> length(s) <a href="#_sub5" class="code" title="subfunction evalRep(a,rep)">evalRep</a>(s,rep1); <span class="keyword">end</span>;
1149       <span class="keyword">end</span>;
1150 
1151     <span class="keyword">case</span> 632
1152       tipo  = get(Hc(3),<span class="string">'use'</span>);
1153       kvs = tm(1);
1154       RastH = get(Hc(14+DuaC),<span class="string">'use'</span>); lh1 = RastH(1);
1155       argo = [get(lh1,<span class="string">'x'</span>); get(lh1,<span class="string">'y'</span>)];
1156       tm(6) = argo(2,kvs);  set(nw1,<span class="string">'use'</span>,tm);
1157       largo = length(argo(1,:)); <span class="keyword">if</span> kvs&gt;largo kvs=largo; <span class="keyword">end</span>;
1158       set(Hc(14+DuaC),<span class="string">'x'</span>, max(xyli(1),min(xyli(2),argo(1,kvs))),<span class="keyword">...</span>
1159                       <span class="string">'y'</span>, max(xyli(3),min(xyli(4),argo(2,kvs))));
1160       <span class="keyword">if</span> sum(get(Hc(12),<span class="string">'vis'</span>))==221 <span class="keyword">return</span>; <span class="keyword">end</span>;
1161       <span class="keyword">if</span> RastH(2)==1
1162          set(Hc(7),<span class="string">'backg'</span>,get(lh1,<span class="string">'color'</span>));
1163          set(Hc(5),<span class="string">'vis'</span>,<span class="string">'of'</span>);
1164       <span class="keyword">end</span>;
1165       set(Hc(7),<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,tipo(2,:),argo(2,kvs)));
1166     <span class="keyword">case</span> 472
1167       p0 = getappdata(get(v2,<span class="string">'xlab'</span>),<span class="string">'OldCur'</span>);
1168       sc = get(v2,<span class="string">'yscale'</span>);  liny = sc(2)==<span class="string">'i'</span>;
1169       <span class="keyword">if</span> ischar(en0)
1170           Cpunta = get(ax2,<span class="string">'curre'</span>);  cy = Cpunta(1,2);
1171           absc = get(ax2,<span class="string">'yli'</span>);
1172           <span class="keyword">if</span> liny  absc = absc + p0(2) - cy;
1173           <span class="keyword">else</span>     absc = absc * p0(2) / cy;
1174           <span class="keyword">end</span>;
1175           set(ax2,<span class="string">'yli'</span>,absc);
1176       <span class="keyword">else</span>
1177         Cpunta = get(v2,<span class="string">'curre'</span>);
1178         cx = Cpunta(1,1);  cy = Cpunta(1,2);
1179         <span class="keyword">if</span> en0&lt;1 x = LMda(1:2);
1180                  sc = get(v2,<span class="string">'xscale'</span>);
1181                  <span class="keyword">if</span> sc(2)==<span class="string">'i'</span> x = x + p0(1) - cx;
1182                  <span class="keyword">else</span>          x = x * p0(1) / cx;
1183                  <span class="keyword">end</span>;
1184                  <span class="keyword">if</span> ax2 axb = [v2 ax2]; <span class="keyword">else</span> axb = v2; <span class="keyword">end</span>;
1185                  set(axb,<span class="string">'xli'</span>,x);
1186         <span class="keyword">end</span>;
1187         <span class="keyword">if</span> en0   absc = LMda(3:4);
1188                  <span class="keyword">if</span> liny  yi = p0(2) - cy;  absc = absc + yi;
1189                  <span class="keyword">else</span>     yi = p0(2) / cy;  absc = absc * yi;
1190                  <span class="keyword">end</span>;
1191                  set(v2,<span class="string">'yli'</span>,absc);
1192                  <span class="keyword">if</span> aconex
1193                    yr = get(ax2,<span class="string">'yli'</span>);
1194                    <span class="keyword">if</span> liny  yr = yr + yi * diff(yr)/diff(absc);
1195                    <span class="keyword">else</span>     yr = yr * (yr(2)/yr(1))^(log(yi)/log(absc(2)/absc(1)));
1196                    <span class="keyword">end</span>;
1197                    set(ax2,<span class="string">'yli'</span>,yr);
1198                  <span class="keyword">end</span>;
1199         <span class="keyword">end</span>;
1200       <span class="keyword">end</span>;
1201       <a href="#_sub1" class="code" title="subfunction fixMark()">fixMark</a>;
1202     <span class="keyword">case</span> 606
1203       p0 = getappdata(get(v2,<span class="string">'xlab'</span>),<span class="string">'OldCur'</span>);
1204       <span class="keyword">if</span> ischar(en0)
1205           Cpunta = get(ax2,<span class="string">'curre'</span>);
1206           absc = get(ax2,<span class="string">'yli'</span>);  y0 = absc(1);  y1 = absc(2);
1207           cy = Cpunta(1,2)-y0;  <span class="keyword">if</span> ~cy cy=1e-06; <span class="keyword">end</span>;
1208           set(ax2,<span class="string">'yli'</span>,[y0 y0 + abs((p0(2)-y0)*(y1-y0)/cy)]);
1209       <span class="keyword">else</span>
1210         Cpunta = get(v2,<span class="string">'curre'</span>);
1211         <span class="keyword">if</span> en0&lt;1 x0 = LMda(1);  x1 = LMda(2);
1212                  cx = Cpunta(1,1)-x0;  <span class="keyword">if</span> ~cx cx=1e-06; <span class="keyword">end</span>;
1213                  <span class="keyword">if</span> ax2 axb = [v2 ax2]; <span class="keyword">else</span> axb = v2; <span class="keyword">end</span>;
1214                  set(axb,<span class="string">'xli'</span>,[x0 x0 + abs((p0(1)-x0)*(x1-x0)/cx)]);
1215         <span class="keyword">end</span>;
1216         <span class="keyword">if</span> en0   y0 = LMda(3);  y1 = LMda(4);  dy = y1-y0;
1217                  cy = Cpunta(1,2)-y0;  <span class="keyword">if</span> ~cy cy=1e-06; <span class="keyword">end</span>;
1218                  cy = dy/cy;  p2 = p0(2)-y0;
1219                  set(v2,<span class="string">'yli'</span>,[y0 y0 + abs(p2*cy)]);
1220                  <span class="keyword">if</span> aconex
1221                     sc = get(v2,<span class="string">'yscale'</span>);
1222                     <span class="keyword">if</span> sc(2)==<span class="string">'i'</span>
1223                        absc = get(ax2,<span class="string">'yli'</span>);  y0 = absc(1);  y1 = absc(2);
1224                        p2 = (y1-y0) * p2 / dy;
1225                        set(ax2,<span class="string">'yli'</span>,[y0 y0 + abs(p2*cy)]);
1226                     <span class="keyword">else</span>
1227                        yr = get(ax2,<span class="string">'yli'</span>);  yr0 = yr(1);  yr1 = yr(2);
1228                        Cpunta = get(ax2,<span class="string">'curre'</span>);
1229                        cy = Cpunta(1,2)-yr0;  <span class="keyword">if</span> ~cy cy=1e-06; <span class="keyword">end</span>;
1230                        p0 = yr0 * exp(log(p0(2)/y0) * log(yr1/yr0) / log(y1/y0));
1231                        set(ax2,<span class="string">'yli'</span>,[yr0 yr0 + abs((p0-yr0)*(yr1-yr0)/cy)]);
1232                      <span class="keyword">end</span>;
1233                  <span class="keyword">end</span>;
1234         <span class="keyword">end</span>;
1235       <span class="keyword">end</span>;
1236       <a href="#_sub1" class="code" title="subfunction fixMark()">fixMark</a>;
1237     <span class="keyword">case</span> 662
1238       Cpunta  = get(v2,<span class="string">'curre'</span>);
1239       urX = max(LMda(1),min(LMda(2),Cpunta(1,1)));  yCur = max(LMda(3),min(LMda(4),Cpunta(1,2)));
1240       Cpunta   = get(Hc(11),<span class="string">'use'</span>);
1241       xAntiq  = Cpunta(1);  yAntiq  = Cpunta(2);
1242       <span class="keyword">if</span> sum(get(v2,<span class="string">'yscale'</span>)) == 322
1243             vz = abs(log(LMda(3)/LMda(4))) &lt; 50 * abs(log(yAntiq/yCur));
1244       <span class="keyword">else</span>  vz = diff(LMda(3:4)) &lt; 50 * abs(yAntiq-yCur);
1245       <span class="keyword">end</span>;
1246       <span class="keyword">if</span> vz
1247          <span class="keyword">if</span> sum(get(v2,<span class="string">'xscale'</span>)) == 322
1248                vz = abs(log((.0001*LMda(2)+LMda(1))/LMda(2))) &lt; 50 * abs(log(xAntiq/urX));
1249          <span class="keyword">else</span>  vz = diff(LMda(1:2)) &lt; 50 * abs(xAntiq-urX);
1250          <span class="keyword">end</span>;
1251       <span class="keyword">end</span>;
1252       <span class="keyword">if</span> vz
1253           set(Hc(11),<span class="string">'x'</span>,[xAntiq urX urX xAntiq xAntiq],<span class="string">'y'</span>,[yAntiq yAntiq yCur yCur yAntiq]);
1254           tipo=get(Hc(3),<span class="string">'use'</span>);
1255           <span class="keyword">if</span> sum(get(Hc(11),<span class="string">'vis'</span>)) == 315
1256              set(Hc(11),<span class="string">'vis'</span>,<span class="string">'on'</span>);
1257              set(nw2,<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,tipo(2,:),yAntiq));
1258              set(nw1,<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,tipo(1,:),xAntiq));
1259              set(Hc([5 7 4 6]),<span class="string">'ena'</span>,<span class="string">'on'</span>);
1260              set(Hc(10),<span class="string">'ena'</span>,<span class="string">'of'</span>);
1261           <span class="keyword">end</span>;
1262           bk = get(nw1,<span class="string">'backg'</span>);
1263           fr = get(nw1,<span class="string">'foreg'</span>);
1264           set(Hc(7),<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,tipo(2,:),yCur),<span class="string">'backg'</span>,bk,<span class="string">'foreg'</span>,fr,<span class="string">'vis'</span>,<span class="string">'on'</span>);
1265           set(Hc(5),<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,tipo(1,:),urX),<span class="string">'backg'</span>,bk,<span class="string">'foreg'</span>,fr,<span class="string">'vis'</span>,<span class="string">'on'</span>);
1266       <span class="keyword">end</span>;
1267     <span class="keyword">case</span> {570, 557},
1268       Mtipo = sum(get(gcf,<span class="string">'SelectionT'</span>));
1269       <span class="keyword">if</span> (sum(get(Hc(11),<span class="string">'vis'</span>))==315) &amp; ~tm(7) &amp; ~tm(8)
1270          rasHT = sprintf(<span class="string">'plt(''cursor'',%d,'</span>,cador);
1271          smv = <span class="string">''</span>;
1272          PareMovi = <span class="string">'set(gcf,{''WindowButtonMotionFcn'',''WindowButtonUpFcn''},{'''',''''});'</span>;
1273          Cpunta  = get(v2,<span class="string">'curre'</span>);  cx = Cpunta(1,1);  cy  = Cpunta(1,2);
1274          <span class="keyword">if</span>     cx&lt;LMda(1) | cx&gt;LMda(2)   dragy =  <span class="string">'1);'</span>;
1275          <span class="keyword">elseif</span> cy&lt;LMda(3) | cy&gt;LMda(4)   dragy =  <span class="string">'0);'</span>;
1276          <span class="keyword">else</span>                               dragy = <span class="string">'-1);'</span>;
1277          <span class="keyword">end</span>;
1278          urX = max(LMda(1),min(LMda(2),cx));
1279          dxy = diff(LMda);
1280          <span class="keyword">if</span> isempty(getappdata(gcf,<span class="string">'NoEdit'</span>)) &amp;  urX-cx &gt; .08*dxy(1)
1281            <span class="keyword">switch</span> Mtipo
1282              <span class="keyword">case</span> 649, <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'click'</span>,<span class="string">'EDIT'</span>,<span class="string">'1'</span>);
1283              <span class="keyword">case</span> 321,    <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'click'</span>,<span class="string">'EDIT'</span>,<span class="string">'2'</span>);
1284            <span class="keyword">end</span>;
1285            <span class="keyword">return</span>;
1286          <span class="keyword">end</span>;
1287          <span class="keyword">switch</span> Mtipo
1288          <span class="keyword">case</span> 649
1289             yCur = max(LMda(3),min(LMda(4),cy));
1290             <span class="keyword">if</span> length(get(hact,<span class="string">'ButtonD'</span>))
1291               setappdata(hact,<span class="string">'ilast'</span>,getappdata(hact,<span class="string">'i'</span>));
1292               <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'click'</span>,<span class="string">'EDIT'</span>,<span class="string">'0'</span>);
1293             <span class="keyword">end</span>;
1294             ovt = 0;
1295             <span class="keyword">if</span> sact==570
1296                nargin2 = 4;
1297                RastH = get(hact,<span class="string">'use'</span>);
1298                <span class="keyword">if</span> sum(get(RastH(1),<span class="string">'vis'</span>)) ~= 221
1299                   <span class="keyword">for</span> kk=14+1:length(Hc)
1300                       RastH = get(Hc(kk),<span class="string">'use'</span>);
1301                       <span class="keyword">if</span> sum(get(RastH(1),<span class="string">'vis'</span>)) == 221 <span class="keyword">break</span>; <span class="keyword">end</span>;
1302                   <span class="keyword">end</span>;
1303                   actv = kk-14;
1304                <span class="keyword">end</span>;
1305                en0 = actv;
1306                <span class="keyword">if</span> ax2
1307                  ylm = get(ax2,<span class="string">'yli'</span>);  dylm = diff(ylm);
1308                  cvert = (cy - LMda(3)) / dxy(3);
1309                  mdst = 1e+99;
1310                  idst = 0;
1311                  <span class="keyword">for</span> kk=14+1:length(Hc)
1312                    <span class="keyword">if</span> get(Hc(kk),<span class="string">'par'</span>) ~= ax2 <span class="keyword">continue</span>; <span class="keyword">end</span>;
1313                    RastH = get(Hc(kk),<span class="string">'use'</span>); RastH = RastH(1);
1314                    <span class="keyword">if</span> sum(get(RastH,<span class="string">'vis'</span>)) == 315 <span class="keyword">continue</span>; <span class="keyword">end</span>;
1315                    x = get(RastH,<span class="string">'x'</span>); absc = get(RastH,<span class="string">'y'</span>);
1316                    <span class="keyword">if</span> length(x)&gt;999 | all(diff(x)&gt;0)
1317                      [toss,j] = min(abs(urX-x));
1318                      dvert = (absc(j) - ylm(1)) / dylm;
1319                      acv = abs(cvert-dvert);
1320                    <span class="keyword">else</span>
1321                      acv = min(abs((x-urX)/dxy(1)) + abs((absc-ylm(1))/dylm - cvert));
1322                    <span class="keyword">end</span>;
1323                    <span class="keyword">if</span> acv &lt; mdst  idst = kk;  mdst = acv; <span class="keyword">end</span>;
1324                  <span class="keyword">end</span>;
1325                  <span class="keyword">if</span> mdst &lt; .02
1326                    ovt = 1;
1327                    ii = idst-14;
1328                    <span class="keyword">if</span> ii ~= DuaC en0 = ii; <span class="keyword">end</span>;
1329                  <span class="keyword">end</span>;
1330                <span class="keyword">end</span>;
1331             <span class="keyword">end</span>;
1332             RastH = get(Hc(14+en0),<span class="string">'use'</span>);
1333             x = get(RastH(1),<span class="string">'x'</span>); absc = get(RastH(1),<span class="string">'y'</span>);
1334             <span class="keyword">if</span> nargin2==4
1335                set(Hc(8), <span class="string">'use'</span>,-inf);
1336                set(Hc(9),<span class="string">'use'</span>,inf);
1337                <span class="keyword">if</span> tm(5)==-1
1338                   df = diff(x);
1339                   jst1 = all(df&gt;0) | all(df&lt;0);
1340                <span class="keyword">else</span> jst1 = tm(5);
1341                <span class="keyword">end</span>;
1342                <span class="keyword">if</span> RastH(2)==1 clRastro = get(RastH(1),<span class="string">'color'</span>);
1343                <span class="keyword">else</span>        clRastro = get(nw2,<span class="string">'backg'</span>);
1344                <span class="keyword">end</span>;
1345                indic = sum(get(Hc(12),<span class="string">'vis'</span>))==221;
1346             <span class="keyword">else</span> clRastro=[];  jst1=en1;  indic=en2;
1347             <span class="keyword">end</span>;
1348             <span class="keyword">if</span> jst1 [junk,kvs] = min(abs(urX-x));
1349             <span class="keyword">elseif</span> get(RastH(1),<span class="string">'par'</span>)==ax2
1350                   ylm = get(ax2,<span class="string">'yli'</span>);  dylm = diff(ylm);
1351                   cvert = (cy - LMda(3)) / dxy(3);
1352                   [toss,kvs] = min(abs((x-urX)/dxy(1)) + abs((absc-ylm(1))/dylm - cvert));
1353             <span class="keyword">else</span>  [toss,kvs] = min(abs((x-urX)/dxy(1)) + abs(yCur-absc)/dxy(3));
1354             <span class="keyword">end</span>;
1355             actv = en0;  tm(4) = actv;
1356             iact = 14 + actv;
1357             hact = Hc(iact);
1358             set(nw1,<span class="string">'use'</span>,tm);
1359             <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'mainCur'</span>,kvs,x(kvs),absc(kvs),indic,clRastro);
1360             <span class="keyword">if</span> DuaC <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'auxCur'</span>); <span class="keyword">end</span>;
1361             <span class="keyword">if</span> (sact==557) | ovt
1362               <span class="keyword">if</span> nargin2==4
1363                 smv = sprintf(<span class="string">'%s''lineCB'',%d,%d,%d);'</span>,rasHT,en0,jst1,indic);
1364               <span class="keyword">end</span>;
1365             <span class="keyword">else</span> setappdata(get(v2,<span class="string">'xlab'</span>),<span class="string">'OldCur'</span>,[cx cy LMda]);
1366                  PareMovi = [rasHT <span class="string">'''svHist'');'</span> PareMovi];
1367                  smv = [rasHT <span class="string">'''panAX'','</span> dragy];
1368             <span class="keyword">end</span>;
1369          <span class="keyword">case</span> 321
1370             setappdata(get(v2,<span class="string">'xlab'</span>),<span class="string">'OldCur'</span>,[cx cy LMda]);
1371             PareMovi = [rasHT <span class="string">'''svHist'');'</span> PareMovi];
1372             smv = [rasHT <span class="string">'''zoomAX'','</span> dragy];
1373          <span class="keyword">otherwise</span>,
1374             set(Hc(11),<span class="string">'use'</span>,[max(LMda(1),min(LMda(2),cx)) max(LMda(3),min(LMda(4),cy))]);
1375             smv = [rasHT <span class="string">'''expbox'');'</span>];
1376          <span class="keyword">end</span>;
1377          <span class="keyword">if</span> length(smv) set(gcf,<span class="string">'WindowButtonMotionFcn'</span>,smv,<span class="string">'WindowButtonUpFcn'</span>,PareMovi); <span class="keyword">end</span>;
1378       <span class="keyword">elseif</span> (sum(get(Hc(11),<span class="string">'vis'</span>))==221) | tm(7) | tm(8)
1379         <span class="keyword">switch</span> Mtipo
1380         <span class="keyword">case</span> 649, <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'scale'</span>,<span class="string">'new'</span>);
1381         <span class="keyword">case</span> 321,    <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'restore'</span>);
1382         <span class="keyword">end</span>;
1383         tm([7 8]) = 0;  set(nw1,<span class="string">'use'</span>,tm);
1384       <span class="keyword">end</span>;
1385     <span class="keyword">case</span> 872
1386       rasHT = sprintf(<span class="string">'plt(''cursor'',%d,'</span>,cador);
1387       Cpunta  = get(ax2,<span class="string">'curre'</span>);  setappdata(get(v2,<span class="string">'xlab'</span>),<span class="string">'OldCur'</span>,[Cpunta(1,1) Cpunta(1,2)]);
1388       <span class="keyword">switch</span> sum(get(gcf,<span class="string">'SelectionT'</span>));
1389       <span class="keyword">case</span> 321,   smv = [rasHT <span class="string">'''zoomAX'',''R'');'</span>];
1390       <span class="keyword">otherwise</span>,   smv = [rasHT <span class="string">'''panAX'',''R'');'</span>];
1391       <span class="keyword">end</span>;
1392       set(gcf,<span class="string">'WindowButtonMotionFcn'</span>,smv,<span class="string">'WindowButtonUpFcn'</span>,<span class="string">'set(gcf,{''WindowButtonMotionFcn'',''WindowButtonUpFcn''},{'''',''''});'</span>);
1393     <span class="keyword">case</span> 555
1394       x   = str2double(get(Hc(4+en0),<span class="string">'str'</span>));
1395       tipo = get(Hc(3),<span class="string">'use'</span>); tipo = tipo((1+fix(en0/2)),:);
1396       xpx = (sum(get(Hc(11),<span class="string">'vis'</span>))==221) | tm(7) | tm(8);
1397       <span class="keyword">if</span> xpx  argo = Hc(11); argo = [get(argo,<span class="string">'x'</span>) get(argo,<span class="string">'y'</span>)];
1398               <span class="keyword">if</span> en0 xold=argo(3*en0); <span class="keyword">else</span> xold=argo(1); <span class="keyword">end</span>;
1399       <span class="keyword">else</span>    argo = [get(hact,<span class="string">'x'</span>) get(hact,<span class="string">'y'</span>)];
1400               <span class="keyword">if</span> ~en0 xold=argo(1); <span class="keyword">elseif</span> en0==2 xold=argo(2); <span class="keyword">else</span> xold=0; <span class="keyword">end</span>;
1401       <span class="keyword">end</span>;
1402       <span class="keyword">if</span> length(x)
1403          <span class="keyword">if</span> xpx  ixy = [1 4 5; 2 3 3; 6 7 10; 8 9 9];  argo(ixy(en0+1,:)) = x;
1404                  set(Hc(11),<span class="string">'x'</span>,argo(1:5),<span class="string">'y'</span>,argo(6:10));
1405          <span class="keyword">else</span>
1406             editd = length(get(hact,<span class="string">'ButtonD'</span>));
1407             <span class="keyword">if</span> imag(x) x = imag(x); setappdata(hact,<span class="string">'alt'</span>,0); <span class="keyword">end</span>;
1408             <span class="keyword">if</span> ~en0
1409                RastH = get(hact,<span class="string">'use'</span>); RastH = RastH(1);
1410                xd = get(RastH,<span class="string">'x'</span>);  yd = get(RastH,<span class="string">'y'</span>);
1411                <span class="keyword">if</span> editd set(hact,<span class="string">'x'</span>,x); <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'click'</span>,<span class="string">'EDIT'</span>,<span class="string">'/'</span>);
1412                <span class="keyword">else</span> [v xk] = min(abs(xd-x));
1413                     xv = xd(xk);
1414                     <span class="keyword">if</span> xv&lt;xyli(1) | xv&gt;xyli(2) <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'set'</span>,<span class="string">'xlim'</span>,xv+[-.5 .5].*diff(xyli(1:2))); <span class="keyword">end</span>;
1415                     <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'mainCur'</span>,xk);
1416                <span class="keyword">end</span>;
1417             <span class="keyword">elseif</span> en0==2  set(hact,<span class="string">'y'</span>,x);
1418                            <span class="keyword">if</span> x&lt;xyli(3) | x&gt;xyli(4)
1419                               <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'set'</span>,<span class="string">'ylim'</span>,x+[-.5 .5].*diff(xyli(3:4)));
1420                            <span class="keyword">end</span>;
1421                            <span class="keyword">if</span> editd <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'click'</span>,<span class="string">'EDIT'</span>,<span class="string">'/'</span>); <span class="keyword">end</span>;
1422             <span class="keyword">else</span> set(Hc(4+en0),<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,tipo,tm(6)));
1423             <span class="keyword">end</span>;
1424          <span class="keyword">end</span>;
1425       <span class="keyword">else</span> set(Hc(4+en0),<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,tipo,xold));
1426       <span class="keyword">end</span>;
1427     <span class="keyword">case</span> 641
1428       set(Hc(11),<span class="string">'x'</span>,[LMda(1:2) 0 0 0],<span class="keyword">...</span>
1429                       <span class="string">'y'</span>,[LMda(3) 0 LMda(4) 0 0]);
1430       p0 = getappdata(get(v2,<span class="string">'xlab'</span>),<span class="string">'OldCur'</span>);
1431       set(v2,<span class="string">'xli'</span>,p0(3:4),<span class="string">'yli'</span>,p0(5:6));
1432       <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'scale'</span>,<span class="string">'new'</span>,0,0);
1433     <span class="keyword">case</span> 520
1434       toria = get(nw2,<span class="string">'use'</span>);
1435       <span class="keyword">if</span> isempty(toria) toria = [LMda 1]; <span class="keyword">end</span>;
1436       lExp   = length(toria(:,1));
1437       gasto = find(toria(:,5)==1);
1438       skip   = [];
1439       <span class="keyword">switch</span> sum(en0)
1440       <span class="keyword">case</span> 330
1441          argo = Hc(11); argo = [get(argo,<span class="string">'x'</span>) get(argo,<span class="string">'y'</span>)];
1442          apXY = [sort(argo(1:2)) sort(argo([6 8])) 1];
1443          <span class="keyword">if</span> isequal(LMda,apXY(1:4))
1444             <span class="keyword">if</span> length(gasto) toria(gasto,5)=1; <span class="keyword">end</span>;
1445          <span class="keyword">else</span>
1446             <span class="keyword">if</span> length(gasto)
1447                toria(gasto,5)=0;
1448                <span class="keyword">if</span> max(gasto,lExp) &lt; 4
1449                   toria = [toria; apXY];
1450                <span class="keyword">else</span>
1451                   <span class="keyword">if</span> gasto==4  toria(2:4,:)=[toria(3:4,:); apXY];
1452                   <span class="keyword">elseif</span> gasto &gt;= 1  toria(gasto+1,:)=apXY;
1453                   <span class="keyword">end</span>;
1454                <span class="keyword">end</span>;
1455             <span class="keyword">else</span>
1456                <span class="keyword">if</span> lExp &lt; 4  toria = [toria; apXY];
1457                <span class="keyword">else</span>               toria = [toria(lExp-1,:); apXY];
1458                <span class="keyword">end</span>;
1459             <span class="keyword">end</span>;
1460          <span class="keyword">end</span>;
1461          escars=0;
1462       <span class="keyword">case</span> 319
1463           <span class="keyword">if</span> sum(get(gcf,<span class="string">'SelectionT'</span>))==321 escars=1;
1464           <span class="keyword">else</span>
1465             <span class="keyword">if</span> isempty(gasto) gasto = lExp;
1466             <span class="keyword">else</span>               toria(gasto,5)=0;  gasto = gasto-1;
1467             <span class="keyword">end</span>;
1468             <span class="keyword">if</span> gasto  escars=0;  apXY=toria(gasto,:); toria(gasto,5)=1;
1469             <span class="keyword">else</span>       escars=1;
1470             <span class="keyword">end</span>;
1471           <span class="keyword">end</span>;
1472       <span class="keyword">case</span> 441
1473           <span class="keyword">switch</span> sum(en1)
1474           <span class="keyword">case</span> 120,    escars=2;
1475           <span class="keyword">case</span> 121,    escars=3;
1476           <span class="keyword">case</span> 429, escars=1;
1477           <span class="keyword">otherwise</span>, disp([en1 <span class="string">' is not a valid action in plt(cursor,CurID,scale,auto,In2)'</span>]);
1478           <span class="keyword">end</span>;
1479       <span class="keyword">otherwise</span>, disp([en0 <span class="string">' is not a valid action in plt(cursor,CurID,scale,In1)'</span>]);
1480       <span class="keyword">end</span>;
1481       <span class="keyword">if</span> escars == 0
1482           set(v2,<span class="string">'xli'</span>,sort(apXY(1:2)),<span class="string">'yli'</span>,sort(apXY(3:4)));
1483           wii = 0;
1484       <span class="keyword">else</span>
1485          Nrastro=length(Hc)-14;  ximo=+inf;  xima=-inf;
1486          mc = zeros(Nrastro,2);  Rlista = [];   wii = 1;
1487          <span class="keyword">for</span> kk=1:Nrastro
1488             rastro=get(Hc(14+kk),<span class="string">'use'</span>);
1489             <span class="keyword">if</span> sum(get(rastro(1),<span class="string">'vis'</span>)) == 221
1490                xdatos = get(rastro(1),<span class="string">'x'</span>);
1491                ximo  = min(ximo,min(xdatos));
1492                xima  = max(xima,max(xdatos));
1493                <span class="keyword">if</span> wii ydatos = get(rastro(1),<span class="string">'y'</span>); <span class="keyword">end</span>;
1494                Rlista = [kk Rlista];  wii = 0;
1495             <span class="keyword">end</span>;
1496          <span class="keyword">end</span>;
1497 
1498          <span class="keyword">if</span> wii msgbox(<span class="string">'Possible autoscale without any visible lines'</span>,<span class="string">'Warning'</span>,<span class="string">'warn'</span>,<span class="string">'modal'</span>);
1499          <span class="keyword">else</span>
1500             <span class="keyword">for</span> kk=1:Nrastro
1501               k = Hc(14+kk);
1502               mc(kk,:) = [get(k,<span class="string">'x'</span>) get(k,<span class="string">'y'</span>)];
1503               set(k,<span class="string">'x'</span>,xdatos(1),<span class="string">'y'</span>,ydatos(1));
1504             <span class="keyword">end</span>;
1505             skip = findobj(v2,<span class="string">'Tag'</span>,<span class="string">'SkipCur'</span>,<span class="string">'vis'</span>,<span class="string">'on'</span>); set(skip,<span class="string">'vis'</span>,<span class="string">'of'</span>);
1506             <span class="keyword">switch</span> escars
1507             <span class="keyword">case</span> 1,  set(v2,<span class="string">'YlimM'</span>,<span class="string">'auto'</span>);
1508                          apXY = [ximo xima get(v2,<span class="string">'yli'</span>) 1];
1509                          set(v2,<span class="string">'xli'</span>,apXY(1:2));
1510             <span class="keyword">case</span> 2, apXY = [ximo xima get(v2,<span class="string">'yli'</span>) 1];
1511                          set(v2,<span class="string">'xli'</span>,apXY(1:2));
1512             <span class="keyword">case</span> 3,
1513                tm=get(nw1,<span class="string">'use'</span>);
1514                <span class="keyword">if</span> ismember(actv,Rlista)
1515                   rastro = get(hact,<span class="string">'use'</span>);  ydatos = get(rastro(1),<span class="string">'y'</span>);
1516                   ymax = max(ydatos);  ymin = min(ydatos);  dy = 0.25*(ymax-ymin);
1517                   ymin = ymin - dy;   ymax = ymax + dy;
1518                   <span class="keyword">if</span> ymin ~= ymax  set(v2,<span class="string">'YlimM'</span>,<span class="string">'man'</span>); set(v2,<span class="string">'yli'</span>,[ymin ymax]); drawnow;
1519                   <span class="keyword">else</span>             set(v2,<span class="string">'YlimM'</span>,<span class="string">'auto'</span>);  drawnow;
1520                   <span class="keyword">end</span>;
1521                <span class="keyword">else</span> set(v2,<span class="string">'YlimM'</span>,<span class="string">'man'</span>); drawnow; set(v2,<span class="string">'YlimM'</span>,<span class="string">'auto'</span>);
1522                <span class="keyword">end</span>;
1523                apXY = [LMda 1];
1524             <span class="keyword">end</span>;
1525             <span class="keyword">for</span> kk=1:Nrastro set(Hc(14+kk),<span class="string">'x'</span>,mc(kk,1),<span class="string">'y'</span>,mc(kk,2)); <span class="keyword">end</span>;
1526          <span class="keyword">end</span>;
1527       <span class="keyword">end</span>;
1528       <span class="keyword">if</span> ~wii
1529          <span class="keyword">if</span> ax2 set(ax2,<span class="string">'xli'</span>,apXY(1:2)); <span class="keyword">end</span>;
1530          set(nw2,<span class="string">'use'</span>,toria);
1531          <span class="keyword">if</span> aconex &amp; nargin&lt;6
1532            yr = get(ax2,<span class="string">'yli'</span>);
1533            set(ax2,<span class="string">'yli'</span>,yr(1) + (get(v2,<span class="string">'yli'</span>) - LMda(3)) * diff(yr) / (LMda(4)-LMda(3)));
1534          <span class="keyword">end</span>;
1535          <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'restore'</span>);
1536          axes(v2); <a href="#_sub4" class="code" title="subfunction evalQ(a)">evalQ</a>(get(Hc(5),<span class="string">'use'</span>));
1537       <span class="keyword">end</span>;
1538       set(v2,<span class="string">'YlimM'</span>,<span class="string">'man'</span>);
1539       set(skip,<span class="string">'vis'</span>,<span class="string">'on'</span>);
1540       <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'grid'</span>,v2,<span class="string">'update'</span>);
1541     <span class="keyword">case</span> 548,
1542       RastH = get(hact,<span class="string">'use'</span>);
1543       lx = length(get(RastH(1),<span class="string">'x'</span>));   xk = tm(1);
1544       ty = get(gcf,<span class="string">'SelectionT'</span>);  ty = ty(1);
1545       <span class="keyword">if</span> ty==<span class="string">'o'</span> &amp; getappdata(gcbo,<span class="string">'ty'</span>) ty = <span class="string">'a'</span>; <span class="keyword">end</span>;
1546       ty = ty==<span class="string">'a'</span>;
1547       <span class="keyword">if</span> ty xk = max(xk-1,1);
1548       <span class="keyword">else</span>  xk = min(xk+1,lx);
1549       <span class="keyword">end</span>;
1550       setappdata(gcbo,<span class="string">'ty'</span>,ty);
1551       <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'mainCur'</span>,xk);
1552       <span class="keyword">if</span> DuaC <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'auxCur'</span>); <span class="keyword">end</span>;
1553     <span class="keyword">case</span> 763,
1554       RastH = get(hact,<span class="string">'use'</span>); h1 = RastH(1);
1555       x = get(h1,<span class="string">'x'</span>);   absc = get(h1,<span class="string">'y'</span>); lx = length(x);
1556       lmx = LMda(1:2);   ylim = LMda(3:4);  dxlim = diff(lmx);
1557       xk = tm(1);    v = get(gcbo,<span class="string">'Val'</span>);
1558       x1 = min(x);  x2 = max(x);   xvalo = x2 - x1;
1559       <span class="keyword">if</span> xvalo/dxlim &lt; 2
1560         dx = round(v - 500);
1561         <span class="keyword">if</span> abs(dx)==10 pmove = .01; <span class="keyword">else</span> pmove = .05; <span class="keyword">end</span>;
1562         xk = max(min(lx,xk + sign(dx)*round(lx*pmove)),1);
1563         x = x(xk);  xd = 1.01 * (x-lmx);
1564         <span class="keyword">if</span> xd(1)&lt;0 lmx = lmx + xd(1); <span class="keyword">elseif</span> xd(2)&gt;0 lmx = lmx+xd(2); <span class="keyword">end</span>;
1565         v = 500;
1566       <span class="keyword">else</span>
1567         dx = v - get(gcbo,<span class="string">'use'</span>);
1568         <span class="keyword">switch</span> round(abs(dx))
1569           <span class="keyword">case</span> 10,   lmx = lmx + sign(dx)*dxlim/10;
1570           <span class="keyword">case</span> 100,  lmx = lmx + sign(dx)*dxlim;
1571           <span class="keyword">otherwise</span>, lmx = x1 + xvalo*v/1000 + dxlim*[-.5 .5];
1572         <span class="keyword">end</span>;
1573         <span class="keyword">if</span>     lmx(1)&lt;x1  lmx = [x1 x1+dxlim] - dxlim/50;
1574         <span class="keyword">elseif</span> lmx(2)&gt;x2  lmx = [x2-dxlim x2] + dxlim/50;
1575         <span class="keyword">end</span>;
1576         xlc = mean(lmx);
1577         v = 1000*(xlc-x1)/xvalo;
1578         v = max(min(v,1000),0);
1579         [dmy xk] = min(abs(xlc-x));
1580       <span class="keyword">end</span>;
1581       set(gcbo,<span class="string">'Val'</span>,v,<span class="string">'use'</span>,v);
1582       absc = absc(xk);  yd = 1.01 * (absc-ylim);
1583       <span class="keyword">if</span> yd(1)&lt;0 ylim = ylim + yd(1); <span class="keyword">elseif</span> yd(2)&gt;0 ylim = ylim+yd(2); <span class="keyword">end</span>;
1584       <span class="keyword">if</span> sum(LMda - [lmx ylim])
1585          set(v2,<span class="string">'xli'</span>,lmx,<span class="string">'yli'</span>,ylim);
1586          <span class="keyword">if</span> ax2 set(ax2,<span class="string">'xli'</span>,lmx); <span class="keyword">end</span>;
1587          <span class="keyword">if</span> length(findobj(v2,<span class="string">'use'</span>,<span class="string">'grid'</span>)) <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'grid'</span>,v2,<span class="string">'update'</span>); <span class="keyword">end</span>;
1588          <a href="#_sub4" class="code" title="subfunction evalQ(a)">evalQ</a>(get(Hc(5),<span class="string">'use'</span>));
1589       <span class="keyword">end</span>;
1590       <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'mainCur'</span>,xk);
1591       <span class="keyword">if</span> DuaC <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'auxCur'</span>); <span class="keyword">end</span>;
1592     <span class="keyword">case</span> 740
1593       b = gcbo;  set(b,<span class="string">'vis'</span>,<span class="string">'of'</span>); drawnow; set(b,<span class="string">'vis'</span>,<span class="string">'on'</span>);
1594       <span class="keyword">switch</span> en0
1595         <span class="keyword">case</span> 2, en0=0; set(Hc(8), <span class="string">'use'</span>,-inf);
1596         <span class="keyword">case</span> 3, en0=1; set(Hc(9),<span class="string">'use'</span>,inf);
1597       <span class="keyword">end</span>;
1598       RastH = get(hact,<span class="string">'use'</span>); h1 = RastH(1);  absc = get(h1,<span class="string">'y'</span>); x = get(h1,<span class="string">'x'</span>);
1599       x12 = find(x &lt;= LMda(2) &amp; x &gt;= LMda(1));
1600       <span class="keyword">if</span> isempty(x12) x = LMda(1); x12 = 1:length(x); disp(<span class="string">'You must select a line for the min/max finder'</span>); <span class="keyword">end</span>;
1601       absc = absc(x12);  nabsc = length(absc);
1602       <span class="keyword">if</span> en0
1603          xk=find(absc &lt; [absc(2:nabsc) inf] &amp; <span class="keyword">...</span>
1604                  absc &lt; [inf  absc(1:nabsc-1)] &amp; <span class="keyword">...</span>
1605                  absc &gt; get(Hc(9),<span class="string">'use'</span>));
1606          <span class="keyword">if</span> isempty(xk)
1607               [absc xk] = min(absc);
1608          <span class="keyword">else</span> [absc kk]  = min(absc(xk));
1609               xk = xk(kk);
1610          <span class="keyword">end</span>;
1611          set(Hc(9),<span class="string">'use'</span>,absc);
1612       <span class="keyword">else</span>
1613          xk=find(absc &gt; [absc(2:nabsc) -inf] &amp; <span class="keyword">...</span>
1614                  absc &gt; [-inf absc(1:nabsc-1)] &amp; <span class="keyword">...</span>
1615                  absc &lt; get(Hc(8),<span class="string">'use'</span>));
1616          <span class="keyword">if</span> isempty(xk)
1617               [absc xk] = max(absc);
1618          <span class="keyword">else</span> [absc kk] = max(absc(xk));
1619               xk = xk(kk);
1620          <span class="keyword">end</span>;
1621          set(Hc(8),<span class="string">'use'</span>,absc);
1622       <span class="keyword">end</span>;
1623       xk = xk + x12(1) - 1;
1624       <span class="keyword">if</span> sum(get(Hc(12),<span class="string">'vis'</span>)) == 221
1625          indic = 1;
1626          <span class="keyword">if</span> RastH(2)==1 clRastro = get(RastH(1),<span class="string">'color'</span>);
1627          <span class="keyword">else</span>        clRastro = get(nw2,<span class="string">'backg'</span>);
1628          <span class="keyword">end</span>;
1629       <span class="keyword">else</span> indic = 0;
1630            clRastro = [];
1631       <span class="keyword">end</span>;
1632       <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'mainCur'</span>,xk,x(xk),absc,indic,clRastro);
1633       <span class="keyword">if</span> DuaC <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'auxCur'</span>); <span class="keyword">end</span>;
1634     <span class="keyword">case</span> 772
1635       tipo = get(Hc(3),<span class="string">'use'</span>);
1636       set(nw2,<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,tipo(2,:),tm(3)));
1637       set(nw1,<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,tipo(1,:),tm(2)));
1638       set(Hc(11),<span class="string">'vis'</span>,<span class="string">'of'</span>);
1639       <span class="keyword">if</span> DuaC
1640          RastH = get(Hc(14+DuaC),<span class="string">'use'</span>);
1641          <span class="keyword">if</span> RastH(2)==1
1642               clRastro = get(RastH(1),<span class="string">'color'</span>);
1643               set(Hc(7),<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,tipo(2,:),tm(6)),<span class="string">'ena'</span>,<span class="string">'on'</span>,<span class="string">'backg'</span>,clRastro);
1644          <span class="keyword">else</span> set(Hc(7),<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,tipo(2,:),tm(6)),<span class="string">'ena'</span>,<span class="string">'on'</span>)
1645          <span class="keyword">end</span>;
1646          set(Hc(5),<span class="string">'str'</span>,<span class="string">''</span>,<span class="string">'ena'</span>,<span class="string">'of'</span>,<span class="string">'vis'</span>,<span class="string">'of'</span>);
1647          <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'auxCur'</span>);
1648       <span class="keyword">else</span>
1649          <span class="keyword">if</span> sum(get(Hc(12),<span class="string">'vis'</span>)) == 315
1650             set(Hc([5 7]),<span class="string">'vis'</span>,<span class="string">'of'</span>,<span class="string">'str'</span>,<span class="string">''</span>);
1651          <span class="keyword">end</span>;
1652       <span class="keyword">end</span>;
1653       set(hact,<span class="string">'y'</span>,max(xyli(3),min(xyli(4),tm(3))),<span class="keyword">...</span>
1654                <span class="string">'x'</span>,max(xyli(1),min(xyli(2),tm(2))));
1655       set(Hc([2:3]),<span class="string">'ena'</span>,<span class="string">'inact'</span>);  set(Hc(10),<span class="string">'ena'</span>,<span class="string">'on'</span>);
1656     <span class="keyword">case</span> 560
1657       set(Hc(10),<span class="string">'vis'</span>,<span class="string">'of'</span>,<span class="string">'backg'</span>,1-get(Hc(10),<span class="string">'backg'</span>));
1658       drawnow; set(Hc(10),<span class="string">'vis'</span>,<span class="string">'on'</span>);
1659       <span class="keyword">if</span> sum(get(Hc(12),<span class="string">'vis'</span>)) == 315
1660             set(Hc(12),<span class="string">'vis'</span>,<span class="string">'on'</span>,<span class="string">'par'</span>,get(hact,<span class="string">'par'</span>),<span class="string">'use'</span>,actv,<span class="keyword">...</span>
1661                 <span class="string">'x'</span>,get(hact,<span class="string">'x'</span>),<span class="string">'y'</span>,get(hact,<span class="string">'y'</span>));
1662       <span class="keyword">else</span>  set(Hc(12),<span class="string">'vis'</span>,<span class="string">'of'</span>); set(Hc(8:9),<span class="string">'ena'</span>,<span class="string">'on'</span>);
1663             <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'restore'</span>);
1664       <span class="keyword">end</span>;
1665     <span class="keyword">case</span> 493
1666       fg = get(nw1,<span class="string">'par'</span>);
1667       a = flipud(findobj(get(findobj(fg,<span class="string">'use'</span>,<span class="string">'TraceID'</span>),<span class="string">'child'</span>),<span class="string">'type'</span>,<span class="string">'text'</span>));
1668       <span class="keyword">if</span> length(a)&lt;actv  s = <span class="string">'Yval'</span>;
1669       <span class="keyword">else</span> s = deblank(get(a(actv),<span class="string">'str'</span>));
1670       <span class="keyword">end</span>;
1671       set(findobj(fg,<span class="string">'use'</span>,<span class="string">'idcur'</span>),{<span class="string">'str'</span>,<span class="string">'color'</span>},{s,get(hact,<span class="string">'color'</span>)});
1672     <span class="keyword">case</span> 320
1673       <span class="keyword">switch</span> sum(en0)
1674       <span class="keyword">case</span> 315
1675          Volv1 = Hc(2:12);
1676       <span class="keyword">case</span> 885
1677          <span class="keyword">if</span> nargin2==5 rasNo=en1; <span class="keyword">else</span> rasNo=actv; <span class="keyword">end</span>;
1678          k = Hc(14+rasNo);
1679          Volv1 = complex(get(k,<span class="string">'x'</span>),get(k,<span class="string">'y'</span>));
1680          Volv2 = tm(1);
1681       <span class="keyword">case</span> 1028
1682          RastH = get(hact,<span class="string">'use'</span>);
1683          Volv1 = actv;
1684          Volv2 = RastH(1);
1685       <span class="keyword">case</span> 625
1686          toria = get(nw2,<span class="string">'use'</span>);
1687          <span class="keyword">if</span> isempty(toria)
1688             Volv1  = [[LMda 1]; [zeros(3,4), -ones(3,1)]];
1689          <span class="keyword">else</span> aa = 4 - length(toria(:,1));
1690               Volv1 = [ toria; [ zeros(aa,4), -ones(aa,1) ] ];
1691          <span class="keyword">end</span>;
1692          <span class="keyword">if</span> ax2 Volv1 = [Volv1; [get(ax2,<span class="string">'xli'</span>) get(ax2,<span class="string">'yli'</span>) 2]];
1693          <span class="keyword">else</span>   Volv1 = [Volv1; [zeros(1,4) -1]];
1694          <span class="keyword">end</span>;
1695       <span class="keyword">otherwise</span>, disp(<span class="string">'error in plt(cursor,get)'</span>);
1696       <span class="keyword">end</span>;
1697     <span class="keyword">case</span> 332
1698       <span class="keyword">switch</span> sum(en0)
1699       <span class="keyword">case</span> 557
1700          h = [Hc([2:10 14+1:end]) <span class="keyword">...</span>
1701               findobj(gcf,<span class="string">'tag'</span>,<span class="string">'xstr'</span>) <span class="keyword">...</span>
1702               findobj(gcf,<span class="string">'tag'</span>,<span class="string">'ystr'</span>) <span class="keyword">...</span>
1703               findobj(gcf,<span class="string">'use'</span>,<span class="string">'idcur'</span>) <span class="keyword">...</span>
1704               findobj(gcf,<span class="string">'tag'</span>,<span class="string">'xslider'</span>)];
1705          h = findobj(h,<span class="string">'vis'</span>,<span class="string">'on'</span>);
1706          set(h,<span class="string">'vis'</span>,<span class="string">'of'</span>);
1707          setappdata(Hc(2),<span class="string">'hid'</span>,h);
1708       <span class="keyword">case</span> 495, set(getappdata(Hc(2),<span class="string">'hid'</span>),<span class="string">'vis'</span>,<span class="string">'on'</span>);
1709       <span class="keyword">case</span> 885
1710          <span class="keyword">for</span> kk=2:10 set(Hc(kk),<span class="string">'pos'</span>,en1(kk-1,:)); <span class="keyword">end</span>;
1711       <span class="keyword">case</span> 334,      set(Hc(7),<span class="string">'vis'</span>,en1);
1712                       <span class="keyword">if</span> DuaC set(Hc(DuaC),<span class="string">'vis'</span>,en1); <span class="keyword">end</span>;
1713       <span class="keyword">case</span> 423,     set(Hc(2),<span class="string">'str'</span>,en1);
1714       <span class="keyword">case</span> 424,     set(Hc(3),<span class="string">'str'</span>,en1);
1715       <span class="keyword">case</span> 570,   set(Hc(5),<span class="string">'use'</span>,en1);
1716       <span class="keyword">case</span> 572,   <span class="keyword">if</span> length(en1) &amp; ischar(en1) &amp; en1(1)==<span class="string">';'</span>
1717                          setappdata(v2,<span class="string">'moveCBext'</span>,1);  en1(1) = [];
1718                       <span class="keyword">end</span>;
1719                       set(Hc(7),<span class="string">'use'</span>,en1);
1720       <span class="keyword">case</span> 622,  set(Hc(7),<span class="string">'Tag'</span>,en1);
1721       <span class="keyword">case</span> {563,443,442},
1722          oldEh = get(nw2,<span class="string">'use'</span>);
1723          toria = oldEh;
1724          <span class="keyword">if</span> length(toria)
1725              gasto = find(toria(:,5)==1);
1726              <span class="keyword">if</span> length(gasto) toria(gasto,5)=0; <span class="keyword">end</span>;
1727          <span class="keyword">end</span>;
1728          <span class="keyword">switch</span> sum(en0)
1729          <span class="keyword">case</span> 563, xyl = en1;  toria(1,:) = [xyl 1];
1730          <span class="keyword">case</span> 443
1731             <span class="keyword">if</span> length(oldEh)  toria(1,:) = [LMda(1:2) en1,1];  xyl = [LMda(1:2) en1];
1732             <span class="keyword">else</span>              toria=[];                         xyl = [LMda(1:2) en1];
1733             <span class="keyword">end</span>;
1734          <span class="keyword">case</span> 442
1735             <span class="keyword">if</span> length(oldEh)  toria(1,:) = [en1 LMda(3:4) 1]; xyl  = [en1 LMda(3:4)];
1736             <span class="keyword">else</span>              toria=[];                        xyl = [en1 LMda(3:4)];
1737             <span class="keyword">end</span>
1738          <span class="keyword">end</span>;
1739          set(v2,<span class="string">'xli'</span>,sort(xyl(1:2)),<span class="string">'yli'</span>,sort(xyl(3:4)));
1740          set(nw2,<span class="string">'use'</span>,toria);
1741          <span class="keyword">if</span> ax2
1742             <span class="keyword">if</span> nargin2==6 argo = en2; <span class="keyword">else</span>  argo = get(ax2,<span class="string">'yli'</span>); <span class="keyword">end</span>;
1743             set(ax2,<span class="string">'xli'</span>,xyl(1:2),<span class="string">'yli'</span>,argo);
1744             set(nw1,<span class="string">'use'</span>,tm);
1745          <span class="keyword">end</span>;
1746          <span class="keyword">if</span> length(findobj(v2,<span class="string">'use'</span>,<span class="string">'grid'</span>)) <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'grid'</span>,v2,<span class="string">'update'</span>); <span class="keyword">end</span>;
1747          <a href="#_sub4" class="code" title="subfunction evalQ(a)">evalQ</a>(get(Hc(5),<span class="string">'use'</span>));
1748       <span class="keyword">case</span> 540, set(Hc(8), <span class="string">'use'</span>,-inf); set(Hc(9),<span class="string">'use'</span>,inf);
1749       <span class="keyword">case</span> 625,
1750          <span class="keyword">if</span> length(en1(1,:)) &lt; 5
1751             <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'set'</span>,<span class="string">'xylim'</span>,en1);
1752          <span class="keyword">elseif</span> isequal(size(en1),[5 5])
1753            toria = [];
1754            <span class="keyword">for</span> kk=1:5
1755              <span class="keyword">if</span> kk&lt;=4
1756                <span class="keyword">if</span> en1(kk,5) &gt;= 0
1757                  toria=[toria; en1(kk,:)];
1758                  <span class="keyword">if</span> en1(kk,5) == 1
1759                     LMda = en1(kk,1:4);
1760                     set(v2,<span class="string">'xli'</span>,en1(kk,1:2),<span class="string">'yli'</span>,en1(kk,3:4));
1761                     <span class="keyword">if</span> length(findobj(v2,<span class="string">'use'</span>,<span class="string">'grid'</span>));
1762                        <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'grid'</span>,v2,<span class="string">'update'</span>);
1763                     <span class="keyword">end</span>;
1764                  <span class="keyword">end</span>;
1765                <span class="keyword">end</span>
1766              <span class="keyword">else</span>
1767                <span class="keyword">if</span> en1(kk,5)==2 set(ax2,<span class="string">'xli'</span>,en1(kk,1:2),<span class="string">'yli'</span>,en1(kk,3:4)); <span class="keyword">end</span>;
1768              <span class="keyword">end</span>;
1769            <span class="keyword">end</span>;
1770            set(nw2,<span class="string">'use'</span>,toria);
1771          <span class="keyword">else</span> disp(<span class="string">'error in plt(cursor,CurId,set,expHis,xxx), xxx is wrong shape'</span>);
1772          <span class="keyword">end</span>;
1773       <span class="keyword">case</span> 1028
1774         <span class="keyword">if</span> en1
1775           set(hact,<span class="string">'vis'</span>,<span class="string">'of'</span>);
1776           actv = en1;
1777           tm(4) = actv;
1778           iact = 14 + actv;
1779           hact = Hc(iact);
1780           set(hact,<span class="string">'vis'</span>,<span class="string">'on'</span>);
1781           set(nw1,<span class="string">'use'</span>,tm);
1782         <span class="keyword">end</span>;
1783         <span class="keyword">if</span> nargin&lt;6 en2 = 1; <span class="keyword">end</span>;
1784         <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'mainCur'</span>,en2,[],[],[],get(hact,<span class="string">'color'</span>));
1785       <span class="keyword">end</span>;
1786     <span class="keyword">case</span> 519
1787       delete(Hc([2:12 14+1:end]));
1788       CurPri(cador) = 0;
1789       <span class="keyword">if</span> ~sum(CurPri) CurPri = []; <span class="keyword">end</span>;
1790       setappdata(0,<span class="string">'CurMain'</span>,CurPri);
1791     <span class="keyword">case</span> 925
1792       IsY = strcmp(en0,<span class="string">'y'</span>);
1793       Mtipo = get(gcf,<span class="string">'SelectionT'</span>);
1794       <span class="keyword">if</span> strcmp(Mtipo,<span class="string">'normal'</span>)
1795          <span class="keyword">if</span> tm(7+IsY)
1796             <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'scale'</span>,<span class="string">'new'</span>);  tm(7)=0;  tm(8)=0;  set(nw1,<span class="string">'use'</span>,tm);
1797          <span class="keyword">else</span>
1798             tipo = get(Hc(3),<span class="string">'use'</span>); tipo = tipo(IsY+1,:);
1799             of2 = IsY*2;
1800             set(Hc(4 +of2),<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,tipo,LMda(of2+1)),<span class="string">'ena'</span>,<span class="string">'on'</span> );
1801             set(Hc(5+of2),<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,tipo,LMda(of2+2)),<span class="string">'ena'</span>,<span class="string">'on'</span> ,<span class="keyword">...</span>
1802                                  <span class="string">'backg'</span>,get(nw1,<span class="string">'backg'</span>),<span class="string">'foreg'</span>,get(nw1,<span class="string">'foreg'</span>),<span class="string">'vis'</span>,<span class="string">'on'</span>);
1803             tm(7+IsY)=1;
1804             <span class="keyword">if</span> ~tm(7) | ~tm(8)
1805                set(Hc(11),<span class="string">'x'</span>,LMda([1 2 2 1 1]),<span class="string">'y'</span>,LMda([3 3 4 4 3]),<span class="string">'vis'</span>,<span class="string">'on'</span>);
1806             <span class="keyword">end</span>;
1807             set(nw1,<span class="string">'use'</span>,tm);
1808          <span class="keyword">end</span>;
1809       <span class="keyword">elseif</span>  strcmp(Mtipo,<span class="string">'alt'</span>)
1810           <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'scale'</span>,<span class="string">'auto'</span>,en0);
1811       <span class="keyword">end</span>;
1812     <span class="keyword">otherwise</span> disp([accion <span class="string">' is not a valid action in plt(cursor)'</span>]);
1813     <span class="keyword">end</span>;
1814 
1815 <span class="keyword">case</span> 785
1816   <span class="keyword">switch</span> varargin{2}
1817   <span class="keyword">case</span> 0,
1818      p = gcbo;  e = getappdata(p,<span class="string">'edt'</span>);  f = get(e,<span class="string">'use'</span>);
1819      obj = getappdata(p,<span class="string">'obj'</span>);  obj = obj(1);
1820      c = get(p,<span class="string">'str'</span>);   v = get(p,<span class="string">'Val'</span>);  prop = deblank(c(v,:));
1821      <span class="keyword">if</span> strcmp(prop,<span class="string">'Delete'</span>) &amp; ishandle(obj) delete(obj); <span class="keyword">end</span>;
1822      <span class="keyword">if</span> ishandle(obj)
1823        s = get(obj,prop);
1824        <span class="keyword">if</span> isnumeric(s)  set(e,<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'vtoa'</span>,<span class="string">'%6w'</span>,s,<span class="string">'  '</span>));
1825                         <span class="keyword">if</span> f &amp; length(s)==3 <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ColorEdit'</span>,2,f,2); <span class="keyword">end</span>;
1826        <span class="keyword">else</span>             set(e,<span class="string">'str'</span>,s);
1827        <span class="keyword">end</span>;
1828      <span class="keyword">else</span> set(e,<span class="string">'str'</span>,<span class="string">'Deleted'</span>);
1829      <span class="keyword">end</span>;
1830   <span class="keyword">case</span> 1,
1831      e = gcbo;  p = getappdata(e,<span class="string">'pop'</span>); obj = getappdata(p,<span class="string">'obj'</span>);
1832      c = get(p,<span class="string">'str'</span>); v = get(p,<span class="string">'Val'</span>);   prop = deblank(c(v,:));
1833      s = get(e,<span class="string">'str'</span>); f = get(e,<span class="string">'use'</span>);
1834      <span class="keyword">if</span> strcmp(prop,<span class="string">'Delete'</span>)
1835        <span class="keyword">if</span> strcmpi(s,<span class="string">'all'</span>)
1836          <span class="keyword">if</span> length(c(:,1))==9 c=<span class="string">'line'</span>; <span class="keyword">else</span> c=<span class="string">'text'</span>; <span class="keyword">end</span>;
1837          delete(findobj(get(get(e,<span class="string">'par'</span>),<span class="string">'use'</span>),<span class="string">'type'</span>,c,<span class="string">'tag'</span>,<span class="string">'mark'</span>));
1838        <span class="keyword">end</span>;
1839      <span class="keyword">else</span> <span class="keyword">if</span> isnumeric(get(obj(1),prop))
1840              s = str2num(s);
1841              tid = getappdata(p,<span class="string">'tid'</span>);
1842              <span class="keyword">if</span> length(s)==3 set(tid,prop,s); <span class="keyword">end</span>;
1843           <span class="keyword">end</span>;
1844           set(obj,prop,s);
1845           <span class="keyword">if</span> f <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ColorEdit'</span>,2,f,2); <span class="keyword">end</span>;
1846      <span class="keyword">end</span>;
1847    <span class="keyword">case</span> 2,
1848      p = gcbo;  e = getappdata(p,<span class="string">'edt'</span>);  v = get(p,<span class="string">'Val'</span>);  f = get(e,<span class="string">'use'</span>);
1849      h = get(p,<span class="string">'use'</span>);  h = h{v}(1);
1850      <span class="keyword">if</span> v==3 c = get(h,<span class="string">'xcol'</span>);
1851      <span class="keyword">else</span>    c = get(h,<span class="string">'color'</span>);
1852      <span class="keyword">end</span>;
1853      set(e,<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'vtoa'</span>,<span class="string">'%6w'</span>,c,<span class="string">'  '</span>));
1854      <span class="keyword">if</span> f <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ColorEdit'</span>,2,f,2); <span class="keyword">end</span>;
1855    <span class="keyword">case</span> 3,
1856      e = gcbo;  p = getappdata(e,<span class="string">'pop'</span>);  v = get(p,<span class="string">'Val'</span>);
1857      c = str2num(get(e,<span class="string">'str'</span>));
1858      h = get(p,<span class="string">'use'</span>);  h = h{v};
1859      <span class="keyword">if</span> v==3 set(h,<span class="string">'xcol'</span>,c,<span class="string">'ycol'</span>,c);
1860      <span class="keyword">else</span>    set(h,<span class="string">'color'</span>,c);
1861      <span class="keyword">end</span>;
1862   <span class="keyword">end</span>;
1863 
1864 <span class="keyword">case</span> 642
1865   t = gco;
1866   Cpunta  = get(get(t,<span class="string">'par'</span>),<span class="string">'curre'</span>);
1867   <span class="keyword">if</span> nargin==1
1868     <span class="keyword">switch</span> sum(get(gcf,<span class="string">'SelectionT'</span>));
1869     <span class="keyword">case</span> 649
1870       setappdata(t,<span class="string">'Dxy'</span>,diff([Cpunta(1,:); get(t,<span class="string">'pos'</span>)]));
1871       set(gcf,<span class="string">'WindowButtonMotionFcn'</span>,<span class="string">'plt(''marker'',0);'</span>,<span class="string">'WindowButtonUpFcn'</span>,<span class="string">'set(gcf,{''WindowButtonMotionFcn'',''WindowButtonUpFcn''},{'''',''''});'</span>);
1872     <span class="keyword">case</span> 321
1873       callc = <span class="string">'plt(''ColorEdit'',0);'</span>;
1874       callp = <span class="string">'plt(''MarkEdit'',0);'</span>;
1875       calle = <span class="string">'plt(''MarkEdit'',1);'</span>;
1876       set(0,<span class="string">'units'</span>,<span class="string">'pix'</span>);  sz = get(0,<span class="string">'screens'</span>);
1877       szw = sz(3) - 302 - 4;
1878       ppos  = get(gcf,<span class="string">'pos'</span>);
1879       <span class="keyword">if</span> ppos(4)&lt;1 sp = sz(3:4); ppos = ppos .* [sp sp]; <span class="keyword">end</span>;
1880       xp = min(ppos(1)+ppos(3)+6,szw);
1881       yp = ppos(2)+ppos(4)-85-30*length(findobj(<span class="string">'type'</span>,<span class="string">'fig'</span>,<span class="string">'use'</span>,gcf));
1882       figure(<span class="string">'menu'</span>,<span class="string">'none'</span>,<span class="string">'number'</span>,<span class="string">'off'</span>,<span class="string">'Back'</span>,<span class="string">'off'</span>,<span class="string">'resize'</span>,<span class="string">'off'</span>,<span class="string">'pos'</span>,[xp yp 302 85],<span class="string">'color'</span>,[0,.4,.4],<span class="string">'name'</span>,<span class="string">'Edit Marker'</span>,<span class="string">'use'</span>,gcf,<span class="keyword">...</span>
1883                      <span class="string">'closereq'</span>,<span class="string">'plt(''click'',''mark'',4);'</span>);
1884       ed1 = uicontrol(<span class="string">'sty'</span>,<span class="string">'edit'</span>,<span class="string">'pos'</span>,[8 5 130 22],<span class="string">'call'</span>,calle,<span class="string">'ButtonD'</span>,callc,<span class="string">'use'</span>,0);
1885       pu1 = <span class="string">'Delete|Color|LineStyle|LineWidth|Marker|MarkerSize|Xdata|Ydata|Zdata'</span>;
1886       pu1 = uicontrol(<span class="string">'sty'</span>,<span class="string">'pop'</span>,<span class="string">'str'</span>,pu1,<span class="string">'pos'</span>,[8 35 130 20],<span class="string">'call'</span>,callp,<span class="string">'Val'</span>,5);
1887       uicontrol(<span class="string">'sty'</span>,<span class="string">'text'</span>,<span class="string">'str'</span>, <span class="string">'Marker properties:'</span>,<span class="string">'pos'</span>,[8 64 130 17]);
1888       ed2 = uicontrol(<span class="string">'sty'</span>,<span class="string">'edit'</span>,<span class="string">'pos'</span>,[145 5 150 22],<span class="string">'call'</span>,calle,<span class="string">'ButtonD'</span>,callc,<span class="string">'use'</span>,0);
1889       pu2 = uicontrol(<span class="string">'sty'</span>,<span class="string">'pop'</span>,<span class="string">'str'</span>,<span class="string">'Delete|Color|FontAngle|FontName|FontSize|FontWeight|HorizontalAlign|Position|Rotation|String|VerticalAlign'</span>,<span class="keyword">...</span>
1890                    <span class="string">'pos'</span>,[145 35 150 20],<span class="string">'call'</span>,callp,<span class="string">'Val'</span>,10);
1891       uicontrol(<span class="string">'sty'</span>,<span class="string">'text'</span>,<span class="string">'str'</span>, <span class="string">'String properties:'</span>,<span class="string">'pos'</span>,[145 64 150 17]);
1892       set([ed1 ed2 pu1 pu2],<span class="string">'backg'</span>,[.8,.8,.9],<span class="string">'foreg'</span>,<span class="string">'black'</span>);
1893       l = get(t,<span class="string">'use'</span>);
1894       setappdata(ed1,<span class="string">'pop'</span>,pu1); setappdata(pu1,<span class="string">'edt'</span>,ed1); setappdata(pu1,<span class="string">'obj'</span>,l);
1895       setappdata(ed2,<span class="string">'pop'</span>,pu2); setappdata(pu2,<span class="string">'edt'</span>,ed2); setappdata(pu2,<span class="string">'obj'</span>,t);
1896       <span class="keyword">if</span> ishandle(l) l=get(l,<span class="string">'Marker'</span>); <span class="keyword">else</span> l=<span class="string">'Deleted'</span>; <span class="keyword">end</span>;
1897       <span class="keyword">if</span> ishandle(t) t=get(t,<span class="string">'str'</span>);      <span class="keyword">else</span> t=<span class="string">'Deleted'</span>; <span class="keyword">end</span>;
1898       set(ed1,<span class="string">'str'</span>,l);  set(ed2,<span class="string">'str'</span>,t);
1899     <span class="keyword">end</span>;
1900   <span class="keyword">else</span>  dxy = Cpunta(1,:) + getappdata(t,<span class="string">'Dxy'</span>); set(t,<span class="string">'pos'</span>,dxy(1:2));
1901   <span class="keyword">end</span>;
1902 
1903 <span class="keyword">case</span> 901
1904   <span class="keyword">switch</span> varargin{2}
1905   <span class="keyword">case</span> 0,
1906     e = gcbo;
1907     c = str2num(get(e,<span class="string">'str'</span>));
1908     <span class="keyword">if</span> length(c) ~= 3 <span class="keyword">return</span>; <span class="keyword">end</span>;
1909     f = get(e,<span class="string">'use'</span>);
1910     <span class="keyword">if</span> ~f
1911       par = get(e,<span class="string">'par'</span>);
1912       f = figure(<span class="string">'menu'</span>,<span class="string">'none'</span>,<span class="string">'number'</span>,<span class="string">'off'</span>,<span class="string">'Back'</span>,<span class="string">'off'</span>,<span class="string">'pos'</span>,get(par,<span class="string">'pos'</span>)+[0 -150 0 120],<span class="string">'color'</span>,[0,.4,.4],<span class="keyword">...</span>
1913                  <span class="string">'name'</span>,<span class="string">'Color select'</span>,<span class="string">'use'</span>,get(par,<span class="string">'use'</span>),<span class="keyword">...</span>
1914                  <span class="string">'closereq'</span>,<span class="string">'plt(''ColorEdit'',4);'</span>);
1915       s1 = [0 100];
1916       s4 = <span class="string">'plt(''ColorEdit'',1,%d,%d);'</span>;  d = c*100;
1917       s = [<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'slider'</span>,[.025 .870 110],[d(1) s1 s1],<span class="string">'Red (%)'</span>  ,sprintf(s4,1,f),2);
1918            <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'slider'</span>,[.025 .545 110],[d(2) s1 s1],<span class="string">'Green (%)'</span>,sprintf(s4,2,f),2);
1919            <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'slider'</span>,[.025 .220 110],[d(3) s1 s1],<span class="string">'Blue (%)'</span> ,sprintf(s4,3,f),2);
1920           ]';
1921       v2 = axes(<span class="string">'xli'</span>,[.8 12.15],<span class="string">'yli'</span>,[.8 15.4],<span class="string">'color'</span>,[0 0 0],<span class="string">'xcol'</span>,[0,.4,.4],<span class="string">'ycol'</span>,[0,.4,.4],<span class="string">'XtickL'</span>,<span class="string">' '</span>,<span class="string">'YtickL'</span>,<span class="string">' '</span>,<span class="string">'TickLen'</span>,[0 0]',<span class="keyword">...</span>
1922                 <span class="string">'units'</span>,<span class="string">'nor'</span>,<span class="string">'pos'</span>,[.408 .02 .57 .96]);
1923       ph = zeros(11,11);
1924       cb = sprintf(<span class="string">'plt(''ColorEdit'',2,%d);'</span>,f);
1925       <span class="keyword">for</span> fila = 1:11
1926         <span class="keyword">for</span> col = 1:11
1927           ph(fila,col) = patch(col+[0 1 1 0],fila+[0 0 1 1],[0 0 0],<span class="string">'use'</span>,[fila col],<span class="string">'ButtonD'</span>,cb);
1928         <span class="keyword">end</span>;
1929       <span class="keyword">end</span>;
1930       pat = patch([1 12 12 1],12+[.5 .5 3 3],c,<span class="string">'use'</span>,ph,<span class="string">'ButtonD'</span>,sprintf(<span class="string">'plt(''ColorEdit'',2,%d,1);'</span>,f));
1931       set(v2,<span class="string">'use'</span>,[s e pat c]);  set(e,<span class="string">'use'</span>,f);
1932     <span class="keyword">end</span>;
1933     <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ColorEdit'</span>,2,f,2);
1934   <span class="keyword">case</span> 1,
1935     s = varargin{3};
1936     f = varargin{4};
1937     v2 = findobj(f,<span class="string">'type'</span>,<span class="string">'axes'</span>);
1938     u = get(v2,<span class="string">'use'</span>);
1939     c = [0 0 0];
1940     <span class="keyword">for</span> k=1:3
1941       h = u(k);
1942       c(k) = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'slider'</span>,h,<span class="string">'get'</span>)/100;
1943       <span class="keyword">if</span> k==s  bk = [1 1 0]; <span class="keyword">else</span>  bk = [0 1 1]; <span class="keyword">end</span>;
1944       obj = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'slider'</span>,h,<span class="string">'get'</span>,<span class="string">'obj'</span>);
1945       set(obj(5),<span class="string">'backg'</span>,bk);
1946     <span class="keyword">end</span>;
1947     ph = get(u(5),<span class="string">'use'</span>);
1948     phc = [0 0 0];
1949     phc(s) = c(s);
1950     v = mod(s,3)+1;  w = mod(v,3)+1;
1951     <span class="keyword">for</span> fila = 1:11
1952       phc(v) = (fila-1)/10;
1953       <span class="keyword">for</span> col = 1:11
1954         phc(w) = (col-1)/10;
1955         set(ph(fila,col),<span class="string">'FaceColor'</span>,phc);
1956       <span class="keyword">end</span>;
1957     <span class="keyword">end</span>;
1958     set(u(5),<span class="string">'FaceColor'</span>,c);
1959     es = get(u(4),<span class="string">'str'</span>);
1960     <span class="keyword">if</span> es(1)~=<span class="string">'['</span> <span class="keyword">return</span>; <span class="keyword">end</span>;
1961     set(u(4),<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'vtoa'</span>,<span class="string">'%6w'</span>,c,<span class="string">'  '</span>));
1962     p = getappdata(u(4),<span class="string">'pop'</span>);
1963     s = get(p,<span class="string">'str'</span>);  v = get(p,<span class="string">'Val'</span>);  obj = getappdata(p,<span class="string">'obj'</span>);
1964     <span class="keyword">if</span> length(obj)
1965       prop = deblank(s(v,:));
1966       set(obj,prop,c);
1967       tid = getappdata(p,<span class="string">'tid'</span>);
1968       <span class="keyword">if</span> tid set(tid,prop,c); <span class="keyword">end</span>;
1969     <span class="keyword">else</span>  h = get(p,<span class="string">'use'</span>);  h = h{v};
1970           <span class="keyword">if</span> v==3 set(h,<span class="string">'xcol'</span>,c,<span class="string">'ycol'</span>,c);
1971           <span class="keyword">else</span>    set(h,<span class="string">'color'</span>,c);
1972           <span class="keyword">end</span>;
1973     <span class="keyword">end</span>;
1974   <span class="keyword">case</span> 2,
1975     f = varargin{3};
1976     v2 = findobj(f,<span class="string">'type'</span>,<span class="string">'axes'</span>);
1977     u = get(v2,<span class="string">'use'</span>);
1978     <span class="keyword">if</span> nargin&lt;4 in4 = 0; <span class="keyword">else</span> in4 = varargin{4}; <span class="keyword">end</span>;
1979     <span class="keyword">switch</span> in4
1980       <span class="keyword">case</span> 0, c = get(gcbo,<span class="string">'FaceColor'</span>);
1981       <span class="keyword">case</span> 1, c = u(6:8);
1982       <span class="keyword">case</span> 2, c = str2num(get(u(4),<span class="string">'str'</span>));
1983               <span class="keyword">if</span> length(c)~=3 <span class="keyword">return</span>; <span class="keyword">end</span>;
1984     <span class="keyword">end</span>;
1985     <span class="keyword">for</span> k=1:3
1986       obj = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'slider'</span>,u(k),<span class="string">'get'</span>,<span class="string">'obj'</span>);   bk =get(obj(5),<span class="string">'backg'</span>);
1987       <span class="keyword">if</span> bk(1) <span class="keyword">break</span>;  <span class="keyword">end</span>;
1988     <span class="keyword">end</span>;
1989     v = mod(k,3)+1;  w = mod(v,3)+1;
1990     <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'slider'</span>,u(v),<span class="string">'set'</span>,c(v)*100);
1991     <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'slider'</span>,u(w),<span class="string">'set'</span>,c(w)*100);
1992     <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'slider'</span>,u(k),<span class="string">'set'</span>,c(k)*100);
1993   <span class="keyword">case</span> 4,
1994     u = get(findobj(gcf,<span class="string">'type'</span>,<span class="string">'axes'</span>),<span class="string">'use'</span>);
1995     <span class="keyword">if</span> ishandle(u(4)) set(u(4),<span class="string">'use'</span>,0); <span class="keyword">end</span>;
1996     closereq;
1997   <span class="keyword">end</span>;
1998 
1999 <span class="keyword">case</span> 434
2000   <span class="keyword">if</span> nargin&lt;2 [fi pth] = uigetfile(<span class="string">'plt.plt'</span>,<span class="string">'Select plt figure to open'</span>);
2001               <span class="keyword">if</span> isnumeric(fi) <span class="keyword">return</span>; <span class="keyword">end</span>;
2002               fi = [pth fi];
2003   <span class="keyword">else</span>        fi = varargin{2};
2004   <span class="keyword">end</span>;
2005   ydat = [];
2006   feval(<span class="string">'load'</span>,fi,<span class="string">'-mat'</span>);
2007   <span class="keyword">if</span> isempty(ydat)
2008     p = find(fi==<span class="string">'.'</span>);
2009     <span class="keyword">if</span> length(p) f = [fi(1:p(end)) <span class="string">'mat'</span>]; <span class="keyword">end</span>;
2010     dos([<span class="string">'copy '</span> fi <span class="string">' '</span> f <span class="string">' &gt; NUL:'</span>]);
2011     load(f); delete(f);
2012   <span class="keyword">end</span>;
2013   xdat = [xdat'; ydat'];
2014   <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(xdat{:},params{:});
2015 
2016 <span class="keyword">case</span> 431
2017   <span class="keyword">if</span> nargin&lt;2 [fi pth] = uiputfile(<span class="string">'plt.plt'</span>,<span class="string">'Save plt figure as'</span>);
2018               <span class="keyword">if</span> isnumeric(fi) <span class="keyword">return</span>; <span class="keyword">end</span>;
2019               fi = [pth fi];
2020   <span class="keyword">else</span>        fi = varargin{2};
2021   <span class="keyword">end</span>;
2022   AX    = findobj(gcf,<span class="string">'Tag'</span>,<span class="string">'click'</span>);
2023   cador = get(AX,<span class="string">'use'</span>);
2024   AX2   = findobj(gcf,<span class="string">'YAxisLoc'</span>,<span class="string">'right'</span>,<span class="string">'use'</span>,cador);
2025     RastH = getappdata(gcf,<span class="string">'Lhandles'</span>);
2026     xdat = get(RastH,<span class="string">'x'</span>);  ydat = get(RastH,<span class="string">'y'</span>);
2027     xlm =  get(AX,<span class="string">'xli'</span>);   ylm =  get(AX,<span class="string">'yli'</span>);
2028     xymult = getappdata(gcf,<span class="string">'xymult'</span>);
2029     <span class="keyword">if</span> xymult(1) ~= 1
2030        mult = 1/xymult(1);
2031        <span class="keyword">for</span> k = 1:length(xdat) xdat{k} = mult * xdat{k}; <span class="keyword">end</span>;
2032        xlm = xlm * mult;
2033     <span class="keyword">end</span>;
2034     ym = 1;
2035     <span class="keyword">for</span> k = 1:length(ydat)
2036       mult = xymult(k+1);
2037       <span class="keyword">if</span> mult ~= 1  
2038          mult = 1/mult;
2039          <span class="keyword">if</span> ym ylm=ylm*mult; ym=0;  <span class="keyword">end</span>;
2040          ydat{k} = mult * ydat{k};
2041       <span class="keyword">end</span>;
2042     <span class="keyword">end</span>;
2043     v = get(RastH,<span class="string">'vis'</span>);  v = [v{:}];  
2044     params = [getappdata(gcf,<span class="string">'params'</span>) { <span class="keyword">...</span>
2045              <span class="string">'position'</span> get(gcf,<span class="string">'pos'</span>) <span class="keyword">...</span>
2046              <span class="string">'DIStrace'</span> v(find(v==<span class="string">'o'</span>)+1)==<span class="string">'f'</span> <span class="keyword">...</span>
2047              <span class="string">'Xlim'</span>     xlm <span class="keyword">...</span>
2048              <span class="string">'Ylim'</span>     ylm     }];
2049     <span class="keyword">if</span> AX2 params = [params {<span class="string">'YlimR'</span> get(AX2,<span class="string">'yli'</span>)}]; <span class="keyword">end</span>;
2050     ver = <span class="string">'11May10'</span>;
2051     save(fi,<span class="string">'xdat'</span>,<span class="string">'ydat'</span>,<span class="string">'params'</span>,<span class="string">'ver'</span>);
2052 
2053 <span class="keyword">case</span> 518
2054   y2    = varargin{2};
2055   AX    = findobj(gcf,<span class="string">'Tag'</span>,<span class="string">'click'</span>);
2056   cador = get(AX,<span class="string">'use'</span>);
2057   AX2   = findobj(gcf,<span class="string">'YAxisLoc'</span>,<span class="string">'right'</span>,<span class="string">'use'</span>,cador);
2058   AXrl  = [AX AX2];
2059   <span class="keyword">if</span> isempty(AX2) AX2=0; <span class="keyword">end</span>;
2060   CurPri = getappdata(0,<span class="string">'CurMain'</span>);
2061   Hc = get(CurPri(cador),<span class="string">'use'</span>);
2062   <span class="keyword">if</span> ischar(y2)
2063     <span class="keyword">switch</span> sum(y2)
2064     <span class="keyword">case</span> 430
2065       s = get(gcbo,<span class="string">'str'</span>);
2066       <span class="keyword">if</span> s(1)==92 &amp; s(2)==<span class="string">'d'</span>  s = s(6:end-5);
2067       <span class="keyword">else</span>                             s = [<span class="string">'\div '</span> s <span class="string">' \div'</span>];
2068       <span class="keyword">end</span>;
2069       set(gcbo,<span class="string">'str'</span>,s);
2070     <span class="keyword">case</span> 733
2071       imX = get(AX,<span class="string">'xli'</span>); imY = get(AX,<span class="string">'yli'</span>);
2072       d = [-.2 .2]; dr = <span class="string">'o'</span>;
2073       clic = get(gcf,<span class="string">'SelectionT'</span>); clic = clic(1);
2074       <span class="keyword">if</span> clic==<span class="string">'a'</span> | (clic==<span class="string">'o'</span> &amp; getappdata(AX,<span class="string">'dir'</span>)==<span class="string">'i'</span>)
2075          d = d/-1.4; dr = <span class="string">'i'</span>;
2076       <span class="keyword">end</span>;
2077       set(AXrl,<span class="string">'xli'</span>,imX + diff(imX)*d);
2078       set(AX  ,<span class="string">'yli'</span>,imY + diff(imY)*d);
2079       <span class="keyword">if</span> AX2  axl = get(get(AX2,<span class="string">'ylabel'</span>),<span class="string">'str'</span>);
2080               <span class="keyword">if</span> axl(1)~=92 | axl(2) ~= <span class="string">'d'</span>;
2081               imY = get(AX2,<span class="string">'yli'</span>); set(AX2,<span class="string">'yli'</span>,imY + diff(imY)*d);
2082               <span class="keyword">end</span>;
2083       <span class="keyword">end</span>;
2084       <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'grid'</span>,AX,<span class="string">'update'</span>);
2085       setappdata(AX,<span class="string">'dir'</span>,dr);
2086       axes(AX); <a href="#_sub4" class="code" title="subfunction evalQ(a)">evalQ</a>(get(Hc(5),<span class="string">'use'</span>));
2087     <span class="keyword">case</span> 427
2088       <span class="keyword">if</span> nargin&gt;2 in3 = varargin{3}; <span class="keyword">else</span> in3 = -1; <span class="keyword">end</span>;
2089       <span class="keyword">switch</span> in3
2090         <span class="keyword">case</span> 3,
2091           cFIGbk = get(gcf,<span class="string">'color'</span>);
2092           cPLTbk = get(AX,<span class="string">'color'</span>);
2093           <span class="keyword">if</span> isstr(cPLTbk) cPLTbk = get(AX2,<span class="string">'color'</span>); <span class="keyword">end</span>;
2094           cXYax  = get(AX,<span class="string">'xcol'</span>);
2095           cXYlbl = get(get(AX,<span class="string">'xlab'</span>),<span class="string">'color'</span>);
2096           cGRID  = get(findobj(gcf,<span class="string">'type'</span>,<span class="string">'line'</span>,<span class="string">'use'</span>,<span class="string">'grid'</span>),<span class="string">'color'</span>);
2097           cDELTA = get(findobj(gcf,<span class="string">'type'</span>,<span class="string">'line'</span>,<span class="string">'tag'</span>,<span class="string">'DeltaC'</span>),<span class="string">'color'</span>);
2098           cTRACE = get(getappdata(gcf,<span class="string">'Lhandles'</span>),<span class="string">'color'</span>);
2099           cTRACE = reshape([cTRACE{:}],3,length(cTRACE))';
2100           cFile  = get(findobj(gcf,<span class="string">'style'</span>,<span class="string">'push'</span>,<span class="string">'str'</span>,<span class="string">'D'</span>),<span class="string">'tag'</span>);
2101           <span class="keyword">if</span> isempty(cFile) [cFile pth] = uiputfile(<span class="string">'*.mat'</span>,<span class="string">'Select file for saving colors'</span>);
2102                             cFile = [pth cFile];
2103           <span class="keyword">end</span>;
2104           <span class="keyword">if</span> sum(cFile)
2105              save(cFile,<span class="string">'cFIGbk'</span>,<span class="string">'cPLTbk'</span>,<span class="string">'cXYax'</span>,<span class="string">'cXYlbl'</span>,<span class="string">'cGRID'</span>,<span class="string">'cDELTA'</span>,<span class="string">'cTRACE'</span>);
2106           <span class="keyword">else</span> disp(<span class="string">'No file was selected'</span>); <span class="keyword">end</span>;
2107           <span class="keyword">return</span>;
2108         <span class="keyword">case</span> 4,
2109            h = findobj(gcf,<span class="string">'style'</span>,<span class="string">'edit'</span>);
2110            <span class="keyword">for</span> k=1:length(h)
2111              f = get(h(k),<span class="string">'use'</span>);
2112              <span class="keyword">if</span> f &amp; ishandle(f) close(f); <span class="keyword">end</span>;
2113            <span class="keyword">end</span>;
2114            closereq;
2115            <span class="keyword">return</span>;
2116       <span class="keyword">end</span>;
2117       set(0,<span class="string">'units'</span>,<span class="string">'pix'</span>);  sz = get(0,<span class="string">'screens'</span>);
2118       szw = sz(3) - 302 - 4;
2119       ppos  = get(gcf,<span class="string">'pos'</span>);
2120       <span class="keyword">if</span> ppos(4)&lt;1 sp = sz(3:4); ppos = ppos .* [sp sp]; <span class="keyword">end</span>;
2121       xp = min(ppos(1)+ppos(3)+6,szw);
2122       yp = ppos(2)+ppos(4)-85-30*length(findobj(<span class="string">'type'</span>,<span class="string">'fig'</span>,<span class="string">'use'</span>,gcf));
2123       callc = <span class="string">'plt(''ColorEdit'',0);'</span>;
2124       <span class="keyword">if</span> in3==2
2125         g = gcf;
2126         figure(<span class="string">'menu'</span>,<span class="string">'none'</span>,<span class="string">'number'</span>,<span class="string">'off'</span>,<span class="string">'Back'</span>,<span class="string">'off'</span>,<span class="string">'resize'</span>,<span class="string">'off'</span>,<span class="string">'pos'</span>,[xp yp+25 302 60],<span class="string">'color'</span>,[0,.4,.4],<span class="string">'name'</span>,<span class="string">'Edit figure colors'</span>,<span class="string">'use'</span>,g,<span class="keyword">...</span>
2127                       <span class="string">'closereq'</span>,<span class="string">'plt(''click'',''mark'',4);'</span>);
2128         ps = <span class="string">'Figure background|Plot background|Axis color|Axis labels|Grid color|Delta cursor'</span>;
2129         pu = uicontrol(<span class="string">'sty'</span>,<span class="string">'pop'</span>,<span class="string">'str'</span>,ps,<span class="string">'pos'</span>,[80 35 140 20],<span class="string">'call'</span>,<span class="string">'plt(''MarkEdit'',2);'</span>);
2130         ed = uicontrol(<span class="string">'sty'</span>,<span class="string">'edit'</span>,<span class="string">'pos'</span>, [80  5 140 22],<span class="string">'call'</span>,<span class="string">'plt(''MarkEdit'',3);'</span>,<span class="string">'ButtonD'</span>,callc,<span class="string">'use'</span>,0);
2131         set([ed pu],<span class="string">'backg'</span>,[.8,.8,.9],<span class="string">'foreg'</span>,<span class="string">'black'</span>);
2132         setappdata(ed,<span class="string">'pop'</span>,pu); setappdata(pu,<span class="string">'edt'</span>,ed); setappdata(pu,<span class="string">'obj'</span>,[]);
2133         set(ed,<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'vtoa'</span>,<span class="string">'%6w'</span>,get(g,<span class="string">'color'</span>),<span class="string">'  '</span>));
2134         v2 = findobj(g,<span class="string">'type'</span>,<span class="string">'axes'</span>);  a = v2(1); ap = a;
2135         <span class="keyword">if</span> isstr(get(ap,<span class="string">'color'</span>)) ap = v2(end); <span class="keyword">end</span>;
2136         set(pu,<span class="string">'use'</span>,{[g v2(2)];
2137                      ap;
2138                      a;
2139                      [get(a,<span class="string">'xlab'</span>); get(a,<span class="string">'ylab'</span>); get(v2(2),<span class="string">'child'</span>)];
2140                      findobj(g,<span class="string">'type'</span>,<span class="string">'line'</span>,<span class="string">'use'</span>,<span class="string">'grid'</span>);
2141                      findobj(g,<span class="string">'type'</span>,<span class="string">'line'</span>,<span class="string">'tag'</span>,<span class="string">'DeltaC'</span>);
2142                     });
2143         <span class="keyword">return</span>;
2144       <span class="keyword">end</span>;
2145       nw1 = Hc(4);
2146       tm = get(nw1,<span class="string">'use'</span>);
2147       actv = tm(4);
2148       iact = 14 + actv;
2149       hact = Hc(iact);
2150       clic = get(gcf,<span class="string">'SelectionT'</span>); clic = clic(1);
2151       <span class="keyword">if</span> clic==<span class="string">'a'</span> | nargin&gt;2
2152         h = findobj(gcf,<span class="string">'use'</span>,<span class="string">'TraceID'</span>);  tx = [];  hb = [];  tid = [];
2153         <span class="keyword">if</span> length(h) h = flipud(get(h,<span class="string">'child'</span>));
2154                      tx = findobj(h,<span class="string">'type'</span>,<span class="string">'text'</span>);  tid = tx(actv);
2155                      h = findobj(h,<span class="string">'type'</span>,<span class="string">'line'</span>);
2156                      bt = get(h,<span class="string">'button'</span>);
2157                      <span class="keyword">if</span> iscell(bt)
2158                        hb = h(find(cellfun(<span class="string">'length'</span>,bt)));
2159                        <span class="keyword">if</span> length(hb)&gt;=actv tid = [tid hb(actv)]; <span class="keyword">end</span>;
2160                      <span class="keyword">end</span>;
2161         <span class="keyword">end</span>;
2162         c = hact;
2163         h = get(c,<span class="string">'use'</span>); h = h(1);
2164         <span class="keyword">if</span> in3&gt;=0  alll = in3;
2165         <span class="keyword">else</span>       alll = get(Hc(11),<span class="string">'vis'</span>);
2166                    alll = alll(2)==<span class="string">'n'</span>;
2167         <span class="keyword">end</span>;
2168         <span class="keyword">if</span> alll c = [];  h = [];
2169                 <span class="keyword">for</span> kk=14+1:length(Hc)
2170                   RastH = get(Hc(kk),<span class="string">'use'</span>);
2171                   c = [c Hc(kk)];  h = [h RastH(1)];
2172                 <span class="keyword">end</span>;
2173                 tid = [tx; hb];
2174                 fname = <span class="string">'Edit all lines'</span>;
2175         <span class="keyword">else</span>    fname = sprintf(<span class="string">'Edit Line %d'</span>,actv);
2176         <span class="keyword">end</span>;
2177         callp = <span class="string">'plt(''MarkEdit'',0);'</span>;
2178         calle = <span class="string">'plt(''MarkEdit'',1);'</span>;
2179         figure(<span class="string">'menu'</span>,<span class="string">'none'</span>,<span class="string">'number'</span>,<span class="string">'off'</span>,<span class="string">'Back'</span>,<span class="string">'off'</span>,<span class="string">'resize'</span>,<span class="string">'off'</span>,<span class="string">'pos'</span>,[xp yp 302 85],<span class="string">'color'</span>,[0,.4,.4],<span class="string">'name'</span>,fname,<span class="string">'use'</span>,gcf,<span class="keyword">...</span>
2180                <span class="string">'closereq'</span>,<span class="string">'plt(''click'',''mark'',4);'</span>);
2181         props = <span class="string">'Color|LineStyle|LineWidth|Marker|MarkerSize|Xdata|Ydata|Zdata'</span>;
2182         ed1 = uicontrol(<span class="string">'sty'</span>,<span class="string">'edit'</span>,<span class="string">'pos'</span>,[8 5 130 22],<span class="string">'call'</span>,calle,<span class="string">'ButtonD'</span>,callc,<span class="string">'use'</span>,0);
2183         pu1 = uicontrol(<span class="string">'sty'</span>,<span class="string">'pop'</span>,<span class="string">'str'</span>,props,<span class="string">'pos'</span>,[8 35 130 20],<span class="string">'call'</span>,callp);
2184         uicontrol(<span class="string">'sty'</span>,<span class="string">'text'</span>,<span class="string">'str'</span>, <span class="string">'Line properties:'</span>,<span class="string">'pos'</span>,[8 64 130 17]);
2185         ed2 = uicontrol(<span class="string">'sty'</span>,<span class="string">'edit'</span>,<span class="string">'pos'</span>,[145 5 150 22],<span class="string">'call'</span>,calle,<span class="string">'ButtonD'</span>,callc,<span class="string">'use'</span>,0);
2186         pu2 = uicontrol(<span class="string">'sty'</span>,<span class="string">'pop'</span>,<span class="string">'str'</span>,props,<span class="string">'pos'</span>,[145 35 150 20],<span class="string">'call'</span>,callp,<span class="string">'Val'</span>,5);
2187         uicontrol(<span class="string">'sty'</span>,<span class="string">'text'</span>,<span class="string">'str'</span>, <span class="string">'Cursor properties:'</span>,<span class="string">'pos'</span>,[145 64 150 17]);
2188         set([ed1 ed2 pu1 pu2],<span class="string">'backg'</span>,[.8,.8,.9],<span class="string">'foreg'</span>,<span class="string">'black'</span>);
2189         setappdata(ed1,<span class="string">'pop'</span>,pu1); setappdata(pu1,<span class="string">'edt'</span>,ed1); setappdata(pu1,<span class="string">'obj'</span>,h); setappdata(pu1,<span class="string">'tid'</span>,tid);
2190         setappdata(ed2,<span class="string">'pop'</span>,pu2); setappdata(pu2,<span class="string">'edt'</span>,ed2); setappdata(pu2,<span class="string">'obj'</span>,c); setappdata(pu2,<span class="string">'tid'</span>,[]);
2191         set(ed1,<span class="string">'str'</span>,<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'vtoa'</span>,<span class="string">'%6w'</span>,get(h(1),<span class="string">'color'</span>),<span class="string">'  '</span>));
2192         set(ed2,<span class="string">'str'</span>,get(c(1),<span class="string">'MarkerSize'</span>));
2193         axes(AX);
2194       <span class="keyword">else</span>
2195         nw2 = Hc(6);
2196         axes(AX);
2197         x = get(hact,<span class="string">'x'</span>); absc = get(hact,<span class="string">'y'</span>);
2198         p = get(hact,<span class="string">'par'</span>);
2199         rlim = [];
2200         <span class="keyword">if</span> p ~= AX
2201           rlim = get(p,<span class="string">'yli'</span>);
2202           ylim = get(AX,<span class="string">'yli'</span>);
2203           absc = ylim(1) + diff(ylim) * (absc - rlim(1)) / diff(rlim);
2204         <span class="keyword">end</span>;
2205         l = line(x,absc,<span class="string">'marker'</span>,<span class="string">'s'</span>);
2206         t = text(x,absc,[<span class="string">'   ('</span> get(nw1,<span class="string">'str'</span>) <span class="string">', '</span> get(nw2,<span class="string">'str'</span>) <span class="string">')'</span>],<span class="keyword">...</span>
2207                  <span class="string">'fontsi'</span>,get(p,<span class="string">'fontsi'</span>),<span class="string">'use'</span>,l,<span class="string">'ButtonD'</span>,<span class="string">'plt(''marker'');'</span>);
2208         set([t l],<span class="string">'color'</span>,get(hact,<span class="string">'color'</span>),<span class="string">'tag'</span>,<span class="string">'mark'</span>);
2209         <span class="keyword">if</span> length(rlim)
2210           set(l,<span class="string">'tag'</span>,<span class="string">'markR'</span>,<span class="string">'use'</span>,[t AX p ylim rlim]);
2211         <span class="keyword">end</span>;
2212       <span class="keyword">end</span>;
2213 
2214     <span class="keyword">case</span> 674
2215       hl = findobj(gcf,<span class="string">'ButtonD'</span>,<span class="string">'plt(''click'',''TGLlogy'');'</span>);
2216       <span class="keyword">if</span> strcmp(get(AX,<span class="string">'Yscale'</span>),<span class="string">'log'</span>)
2217            sc=<span class="string">'linear'</span>; st=<span class="string">'LinY'</span>;
2218       <span class="keyword">else</span> sc=<span class="string">'log'</span>;    st=<span class="string">'LogY'</span>;
2219            absc = get(AX,<span class="string">'yli'</span>);    <span class="keyword">if</span> absc(1)&lt;=0 set(AX,<span class="string">'yli'</span>,absc(2)*[.001 1]); <span class="keyword">end</span>;
2220            <span class="keyword">if</span> AX2
2221              absc = get(AX2,<span class="string">'yli'</span>); <span class="keyword">if</span> absc(1)&lt;=0 set(AX2,<span class="string">'yli'</span>,absc(2)*[.001 1]); <span class="keyword">end</span>;
2222            <span class="keyword">end</span>;
2223       <span class="keyword">end</span>;
2224       set(AXrl,<span class="string">'Yscale'</span>,sc);  set(hl,<span class="string">'str'</span>,st);
2225     <span class="keyword">case</span> 673
2226       hl = findobj(gcf,<span class="string">'ButtonD'</span>,<span class="string">'plt(''click'',''TGLlogx'');'</span>);
2227       <span class="keyword">if</span> strcmp(get(AX,<span class="string">'Xscale'</span>),<span class="string">'log'</span>)
2228            sc=<span class="string">'linear'</span>; st=<span class="string">'LinX'</span>;
2229       <span class="keyword">else</span> sc=<span class="string">'log'</span>;    st=<span class="string">'LogX'</span>;
2230            x = get(AX,<span class="string">'xli'</span>); <span class="keyword">if</span> x(1)&lt;=0 set(AXrl,<span class="string">'xli'</span>,x(2)*[.001 1]); <span class="keyword">end</span>;
2231       <span class="keyword">end</span>;
2232       set(AXrl,<span class="string">'Xscale'</span>,sc);  set(hl,<span class="string">'str'</span>,st);
2233     <span class="keyword">case</span> 653, set(AX,<span class="string">'TickLen'</span>,(1-<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'grid'</span>,AX,<span class="string">'toggle'</span>))*[.01 .025]);
2234                    a = getappdata(gcf,<span class="string">'axis'</span>);
2235                    <span class="keyword">if</span> AX2 a(end) = []; <span class="keyword">end</span>;
2236                    <span class="keyword">for</span> k=2:length(a)
2237                      set(a(k),<span class="string">'TickLen'</span>,(1-<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'grid'</span>,a(k),<span class="string">'toggle'</span>))*[.01 .025]);
2238                    <span class="keyword">end</span>;
2239 
2240     <span class="keyword">case</span> 668
2241       <span class="keyword">if</span> strcmp(get(gcf,<span class="string">'SelectionT'</span>),<span class="string">'normal'</span>)
2242         f = get(gcf,<span class="string">'menu'</span>);
2243         <span class="keyword">if</span>   f(1)==<span class="string">'f'</span> delete(findobj(gcf,<span class="string">'type'</span>,<span class="string">'uimenu'</span>)); set(gcf,<span class="string">'menu'</span>,<span class="string">'none'</span>);
2244         <span class="keyword">else</span> set(gcf,<span class="string">'menu'</span>,<span class="string">'fig'</span>);
2245              v = get(0,<span class="string">'ShowHidden'</span>);
2246              set(0,<span class="string">'ShowHidden'</span>,<span class="string">'on'</span>);
2247              a = findobj(gcf,<span class="string">'label'</span>,<span class="string">'&amp;File'</span>);
2248              uimenu(a,<span class="string">'Label'</span>,<span class="string">'p&amp;lt  save'</span>,<span class="string">'separator'</span>,<span class="string">'on'</span>,<span class="string">'call'</span>,<span class="string">'plt(''save'');'</span>);
2249              uimenu(a,<span class="string">'Label'</span>,<span class="string">'pl&amp;t  open'</span>,<span class="string">'call'</span>,<span class="string">'plt(''open'');'</span>);
2250              uimenu(a,<span class="string">'Label'</span>,<span class="string">'plt  &amp;hardCopy'</span>,<span class="string">'call'</span>,<span class="string">'plt(''hcpy'',''init'',gcf);'</span>);
2251              c = get(a,<span class="string">'child'</span>);
2252              set(a,<span class="string">'child'</span>,c([4:end-3 1:3 end-2:end]));
2253              set(0,<span class="string">'ShowHidden'</span>,v);
2254              liy = uimenu(<span class="string">'label'</span>,<span class="string">'&amp;Color'</span>);
2255              uimenu(liy,<span class="string">'label'</span>,<span class="string">'&amp;Edit line'</span>,<span class="string">'accel'</span>,<span class="string">'e'</span>,<span class="string">'call'</span>,<span class="string">'plt(''click'',''mark'',0);'</span>);
2256              uimenu(liy,<span class="string">'label'</span>,<span class="string">'&amp;Edit all lines'</span>,       <span class="string">'call'</span>,<span class="string">'plt(''click'',''mark'',1);'</span>);
2257              uimenu(liy,<span class="string">'label'</span>,<span class="string">'&amp;Edit figure colors'</span>,   <span class="string">'call'</span>,<span class="string">'plt(''click'',''mark'',2);'</span>);
2258              uimenu(liy,<span class="string">'label'</span>,<span class="string">'&amp;Save figure colors'</span>,   <span class="string">'call'</span>,<span class="string">'plt(''click'',''mark'',3);'</span>,<span class="string">'separator'</span>,<span class="string">'on'</span>);
2259         <span class="keyword">end</span>;
2260       <span class="keyword">else</span>
2261         k = get(gcbo,<span class="string">'use'</span>);  <span class="keyword">if</span> isempty(k) k=1; <span class="keyword">end</span>;
2262         mrk = <span class="string">'none'</span>;  sty = <span class="string">'-'</span>;
2263         <span class="keyword">switch</span> k
2264           <span class="keyword">case</span> 1, mrk = <span class="string">'o'</span>;  sty = <span class="string">'none'</span>;
2265           <span class="keyword">case</span> 2, mrk = <span class="string">'o'</span>;
2266           <span class="keyword">case</span> 3, k = 0;
2267         <span class="keyword">end</span>;
2268         set(gcbo,<span class="string">'use'</span>,k+1);
2269         set(getappdata(gcf,<span class="string">'Lhandles'</span>),<span class="string">'marker'</span>,mrk,<span class="string">'linestyle'</span>,sty);
2270       <span class="keyword">end</span>;
2271     <span class="keyword">case</span> 242
2272       Hc = get(CurPri(cador),<span class="string">'use'</span>);
2273       tm = get(Hc(4),<span class="string">'use'</span>);
2274       lH = get(Hc(14+tm(4)),<span class="string">'use'</span>);
2275       nw1 = Hc(4);  nw2 = Hc(6);  hix2 = Hc(5);  hiy2 = Hc(7);
2276       x = get(lH(1),<span class="string">'x'</span>);  absc = get(lH(1),<span class="string">'y'</span>);
2277       lmx = get(Hc(13),<span class="string">'xli'</span>);
2278       x12 = find(x &gt;= lmx(1)  &amp;  x &lt;= lmx(2));
2279       absc = absc(x12); absc = absc(~isnan(absc)); nabsc = length(absc);
2280       p = findobj(gcf,<span class="string">'use'</span>,<span class="string">'idcur'</span>);  ps = get(p,<span class="string">'str'</span>);
2281       <span class="keyword">switch</span> sum(ps)
2282         <span class="keyword">case</span> 286,  s = <span class="string">'RMS'</span>; r = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,<span class="string">'%7w'</span>,sqrt(sum(absc.^2)/nabsc));
2283         <span class="keyword">case</span> 242,  s = <span class="string">'y/x'</span>;
2284                     xr = <a href="#_sub7" class="code" title="subfunction v = s2d(s)">s2d</a>(get(nw1,<span class="string">'str'</span>));
2285                     r = getappdata(p,<span class="string">'idcur'</span>);
2286                     r = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,<span class="string">'%7w'</span>,<a href="#_sub7" class="code" title="subfunction v = s2d(s)">s2d</a>(r{2})/xr);
2287                     <span class="keyword">if</span> sum(get(hiy2,<span class="string">'vis'</span>))==221 &amp; sum(get(hix2,<span class="string">'vis'</span>))==221
2288                        xr = str2num(get(hix2,<span class="string">'str'</span>));
2289                        set(hiy2,<span class="string">'str'</span>,<a href="#_sub7" class="code" title="subfunction v = s2d(s)">s2d</a>(get(hiy2,<span class="string">'str'</span>))/xr);
2290                     <span class="keyword">end</span>;
2291         <span class="keyword">case</span> 288,  s = <span class="string">'\surdx^2+y^2'</span>;
2292                     xr = <a href="#_sub7" class="code" title="subfunction v = s2d(s)">s2d</a>(get(nw1,<span class="string">'str'</span>));
2293                     q = getappdata(p,<span class="string">'idcur'</span>);
2294                     r = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,<span class="string">'%7w'</span>,abs(xr + <a href="#_sub7" class="code" title="subfunction v = s2d(s)">s2d</a>(q{2})*1j));
2295                     <span class="keyword">if</span> sum(get(hiy2,<span class="string">'vis'</span>))==221 &amp; sum(get(hix2,<span class="string">'vis'</span>))==221
2296                        xr = str2num(get(hix2,<span class="string">'str'</span>));
2297                        set(hiy2,<span class="string">'str'</span>,abs(xr + <a href="#_sub7" class="code" title="subfunction v = s2d(s)">s2d</a>(q{3})*1j));
2298                     <span class="keyword">end</span>;
2299         <span class="keyword">case</span> 1110, r = getappdata(p,<span class="string">'idcur'</span>);  s = r{1}; set(hiy2,<span class="string">'str'</span>,r{3});  r = r{2};
2300         <span class="keyword">otherwise</span>,  setappdata(p,<span class="string">'idcur'</span>,{ps get(nw2,<span class="string">'str'</span>) get(hiy2,<span class="string">'str'</span>)});
2301                     s = <span class="string">'Avg'</span>;
2302                     r = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'ftoa'</span>,<span class="string">'%7w'</span>,sum(absc)/nabsc);
2303       <span class="keyword">end</span>;
2304       set(p,<span class="string">'str'</span>,s); set(nw2,<span class="string">'str'</span>,r);
2305     <span class="keyword">case</span> 294
2306       v3 = varargin{3};  en2 = v3 - <span class="string">'0'</span>;
2307       <span class="keyword">if</span> en2&gt;5
2308          Cpunta = get(get(gco,<span class="string">'par'</span>),<span class="string">'curre'</span>);  en2 = en2-5;
2309          <span class="keyword">if</span> bitget(en2,1) set(gco,<span class="string">'x'</span>,Cpunta(1,1)); <span class="keyword">end</span>;
2310          <span class="keyword">if</span> en2&gt;1         set(gco,<span class="string">'y'</span>,Cpunta(1,2)); <span class="keyword">end</span>;
2311          <span class="keyword">return</span>;
2312       <span class="keyword">end</span>;
2313       <span class="keyword">if</span> en2&gt;2
2314          set(gcf,<span class="string">'WindowButtonMotionFcn'</span>,[<span class="string">'plt click EDIT '</span> char(v3+3) <span class="string">';'</span>],<span class="keyword">...</span>
2315                  <span class="string">'WindowButtonUpFcn'</span>,[<span class="string">'set(gcf,{''WindowButtonMotionFcn'',''WindowButtonUpFcn''},{'''',''''});'</span> <span class="string">' plt click EDIT /;'</span>]);
2316          <span class="keyword">return</span>;
2317       <span class="keyword">end</span>;
2318       Hc = get(CurPri(cador),<span class="string">'use'</span>);
2319       tm = get(Hc(4),<span class="string">'use'</span>);
2320       hact = Hc(14 + tm(4));
2321       mksz = get(hact,<span class="string">'markersize'</span>);
2322       sz = (196-get(0,<span class="string">'screenpix'</span>))/10;
2323       <span class="keyword">if</span> en2==-1
2324         RastH = get(hact,<span class="string">'use'</span>);  RastH = RastH(1);
2325         x = get(RastH,<span class="string">'x'</span>);  absc = get(RastH,<span class="string">'y'</span>);   kk = tm(1);
2326         x1 = get(hact,<span class="string">'x'</span>);  y1 = get(hact,<span class="string">'y'</span>);
2327         <span class="keyword">if</span> strcmp(get(gcf,<span class="string">'SelectionT'</span>),<span class="string">'alt'</span>) | length(getappdata(hact,<span class="string">'alt'</span>))
2328              setappdata(hact,<span class="string">'alt'</span>,<span class="string">''</span>);
2329              iUlti = getappdata(hact,<span class="string">'ilast'</span>);  x0 = x(iUlti);  y0 = absc(iUlti);
2330              inc = 1 - 2*(iUlti&gt;kk);  passo = max(1,abs(iUlti-kk));
2331              dx = (x1-x0)/passo; dy = (y1-y0)/passo;
2332              <span class="keyword">for</span> k = iUlti:inc:kk x(k)=x0; absc(k)=y0; x0=x0+dx; y0=y0+dy; <span class="keyword">end</span>;
2333         <span class="keyword">else</span>
2334              <span class="keyword">if</span> mksz==sz x(kk)=x1; absc(kk)=y1;
2335              <span class="keyword">else</span>
2336                 ylim = get(Hc(13),<span class="string">'yli'</span>);
2337                 <span class="keyword">if</span> y1&lt;ylim(1) x(kk) = [];  absc(kk) = [];
2338                 <span class="keyword">else</span>          x = [x(1:kk) x1 x(kk+1:end)];
2339                               absc = [absc(1:kk) y1 absc(kk+1:end)];
2340                 <span class="keyword">end</span>;
2341              <span class="keyword">end</span>;
2342         <span class="keyword">end</span>;
2343         set(RastH,<span class="string">'x'</span>,x,<span class="string">'y'</span>,absc);
2344         setappdata(hact,<span class="string">'i'</span>,kk);
2345         setappdata(gcf,<span class="string">'NewData'</span>,1);
2346         <span class="keyword">return</span>;
2347       <span class="keyword">end</span>;
2348       liy = get(hact,<span class="string">'marker'</span>);
2349       p = get(hact,<span class="string">'par'</span>);
2350       v2 = findobj(gcf,<span class="string">'type'</span>,<span class="string">'axes'</span>,<span class="string">'tag'</span>,<span class="string">'click'</span>);
2351       <span class="keyword">if</span> en2==2 sz=sz+4; <span class="keyword">end</span>;
2352       <span class="keyword">switch</span> liy(1)
2353         <span class="keyword">case</span> <span class="string">'^'</span>,  k = 1;
2354         <span class="keyword">case</span> <span class="string">'&gt;'</span>,  k = 2;
2355         <span class="keyword">case</span> <span class="string">'d'</span>,  k = 3;
2356         <span class="keyword">otherwise</span>, k = 0;
2357       <span class="keyword">end</span>;
2358       <span class="keyword">switch</span> k + 4*isempty(getappdata(gcf,<span class="string">'DataEdit'</span>)) + 8*~en2
2359         <span class="keyword">case</span> {1,5},   c = <span class="string">'&gt;'</span>;  b = <span class="string">'plt click EDIT 3;'</span>;
2360         <span class="keyword">case</span> {3,4,7}, c = <span class="string">'^'</span>;  b = <span class="string">'plt click EDIT 4;'</span>;
2361         <span class="keyword">case</span> {0,2,6}, c = <span class="string">'d'</span>;  b = <span class="string">'plt click EDIT 5;'</span>;
2362         <span class="keyword">otherwise</span>,              b = <span class="string">''</span>;
2363       <span class="keyword">end</span>;
2364       <span class="keyword">if</span> p ~= v2  set(v2,<span class="string">'vis'</span>,<span class="string">'of'</span>); <span class="keyword">end</span>;
2365       <span class="keyword">if</span> length(b) ~= length(get(hact,<span class="string">'ButtonD'</span>))
2366         ch = get(p,<span class="string">'child'</span>);
2367         <span class="keyword">if</span> length(b)  a = find(ch==hact);
2368                       setappdata(hact,<span class="string">'swapp'</span>,{a liy mksz});
2369         <span class="keyword">else</span>          a = getappdata(hact,<span class="string">'swapp'</span>);
2370                       c = a{2};  sz = a{3};  a = a{1};
2371                       <span class="keyword">if</span> p ~= v2 set(v2,<span class="string">'vis'</span>,<span class="string">'on'</span>); <span class="keyword">end</span>;
2372         <span class="keyword">end</span>;
2373         sv = ch(a); ch(a) = ch(1); ch(1) = sv;  set(p,<span class="string">'child'</span>,ch);
2374       <span class="keyword">end</span>;
2375       set(hact,<span class="string">'marker'</span>,c,<span class="string">'markersize'</span>,sz,<span class="string">'ButtonD'</span>,b);
2376       axes(AX);
2377     <span class="keyword">end</span>;
2378     <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'grid'</span>,AX,<span class="string">'update'</span>);
2379   <span class="keyword">else</span> y8 = y2/8192;  j = y8(2);
2380        Mtipo = get(gcf,<span class="string">'SelectionT'</span>);
2381        p = {<span class="string">'color'</span>; <span class="string">'marker'</span>; <span class="string">'linestyle'</span>; <span class="string">'linewidth'</span>}; q = {[0 .3 .3] <span class="string">'none'</span> <span class="string">'-'</span> 9};
2382        <span class="keyword">if</span> strcmp(Mtipo,<span class="string">'normal'</span>)
2383           k = y8(1);  s = get(k,<span class="string">'vis'</span>);
2384           mk = getappdata(j,<span class="string">'mk'</span>);
2385           <span class="keyword">if</span> s(2)==<span class="string">'f'</span> set(k,<span class="string">'vis'</span>,<span class="string">'on'</span>); set(j,<span class="string">'fonta'</span>,<span class="string">'nor'</span>,<span class="string">'fontw'</span>,<span class="string">'bol'</span>); set(mk,p,get(k,p));
2386           <span class="keyword">else</span>         set(k,<span class="string">'vis'</span>,<span class="string">'of'</span>); set(j,<span class="string">'fonta'</span>,<span class="string">'ita'</span>,<span class="string">'fontw'</span>,<span class="string">'nor'</span>); set(mk,p,q);
2387           <span class="keyword">end</span>;
2388        <span class="keyword">else</span>
2389           Mtipo = strcmp(Mtipo,<span class="string">'open'</span>);
2390           <span class="keyword">for</span> k = get(get(j,<span class="string">'par'</span>),<span class="string">'child'</span>)'
2391              t = get(k,<span class="string">'ButtonD'</span>);  bk = findstr(t,<span class="string">'['</span>);  w = get(k,<span class="string">'type'</span>);
2392              <span class="keyword">if</span> w(1)==<span class="string">'t'</span> &amp; length(bk)
2393                t = <a href="#_sub8" class="code" title="subfunction v = s2i(s)">s2i</a>(t(bk+1:findstr(t,<span class="string">' '</span>)))/8192;
2394                mk = getappdata(k,<span class="string">'mk'</span>);
2395                <span class="keyword">if</span> Mtipo | k==j  set(t,<span class="string">'vis'</span>,<span class="string">'on'</span>);  set(k,<span class="string">'fonta'</span>,<span class="string">'nor'</span>,<span class="string">'fontw'</span>,<span class="string">'bol'</span>);  set(mk,p,get(t,p));
2396                <span class="keyword">else</span>               set(t,<span class="string">'vis'</span>,<span class="string">'of'</span>);  set(k,<span class="string">'fonta'</span>,<span class="string">'ita'</span>,<span class="string">'fontw'</span>,<span class="string">'nor'</span>);  set(mk,p,q);
2397                <span class="keyword">end</span>;
2398              <span class="keyword">end</span>;
2399           <span class="keyword">end</span>;
2400        <span class="keyword">end</span>;
2401        DuaC = getappdata(AX,<span class="string">'DualCur'</span>);
2402        Lh = getappdata(AX,<span class="string">'Lhandles'</span>);
2403        <span class="keyword">if</span> DuaC v = get(Lh(DuaC),<span class="string">'vis'</span>); <span class="keyword">else</span> v = <span class="string">'off'</span>; <span class="keyword">end</span>;
2404        <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'set'</span>,<span class="string">'aux'</span>,v);
2405        ls = findobj(Lh,<span class="string">'par'</span>,AX);
2406        v = <span class="string">'off'</span>;
2407        <span class="keyword">for</span> k=1:length(ls)
2408          <span class="keyword">if</span> strcmp(get(ls(k),<span class="string">'vis'</span>),<span class="string">'on'</span>) v = <span class="string">'on'</span>;  <span class="keyword">break</span>; <span class="keyword">end</span>;
2409        <span class="keyword">end</span>;
2410        set(get(AX,<span class="string">'Ylabel'</span>),<span class="string">'vis'</span>,v);
2411        <span class="keyword">if</span> AX2
2412          ls = findobj(Lh,<span class="string">'par'</span>,AX2);
2413          v = <span class="string">'off'</span>;  izquC = get(AX2,<span class="string">'color'</span>);
2414          <span class="keyword">for</span> k=1:length(ls)
2415            <span class="keyword">if</span> strcmp(get(ls(k),<span class="string">'vis'</span>),<span class="string">'on'</span>) v = <span class="string">'on'</span>;  izquC = <span class="string">'none'</span>;
2416                                               set(AX2,<span class="string">'xli'</span>,get(AX,<span class="string">'xli'</span>));
2417                                               <span class="keyword">break</span>;
2418            <span class="keyword">end</span>;
2419          <span class="keyword">end</span>;
2420          set(AX2,<span class="string">'vis'</span>,v);  set(AX,<span class="string">'color'</span>,izquC);
2421        <span class="keyword">end</span>;
2422        TIDback = getappdata(get(j,<span class="string">'par'</span>),<span class="string">'TIDcback'</span>);
2423        <span class="keyword">if</span> isempty(TIDback) <span class="keyword">return</span>; <span class="keyword">end</span>;
2424        <a href="#_sub5" class="code" title="subfunction evalRep(a,rep)">evalRep</a>(TIDback,{<span class="string">'@TID'</span>,int2str(y2(2)),<span class="string">'@LINE'</span>,int2str(y2(1))});
2425        axes(AX);
2426   <span class="keyword">end</span>;
2427 
2428 <span class="keyword">case</span> 708,
2429   v2 = getappdata(gcf,<span class="string">'axis'</span>);  v2 = v2(1);
2430   cid = getappdata(gcf,<span class="string">'cid'</span>);  fct = length(cid);
2431   ylbl = get(v2,<span class="string">'Ylabel'</span>);
2432   obj = getappdata(ylbl,<span class="string">'obj'</span>);
2433   <span class="keyword">if</span> length(obj)
2434     setappdata(ylbl,<span class="string">'obj'</span>,[]);
2435     <span class="keyword">for</span> k=1:fct <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cid(k),<span class="string">'set'</span>,<span class="string">'visON'</span>); <span class="keyword">end</span>;
2436     <span class="keyword">if</span> obj(1) set(obj,<span class="string">'vis'</span>,<span class="string">'on'</span>); <span class="keyword">end</span>;
2437   <span class="keyword">else</span>
2438     <span class="keyword">for</span> k=1:fct <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cid(k),<span class="string">'set'</span>,<span class="string">'visOFF'</span>); <span class="keyword">end</span>;
2439     a = findobj(gcf,<span class="string">'str'</span>,<span class="string">'Zout'</span>);
2440     <span class="keyword">if</span> length(a) a = get(a(1),<span class="string">'par'</span>);
2441                  obj = [a; get(a,<span class="string">'child'</span>)];
2442                  set(obj,<span class="string">'vis'</span>,<span class="string">'of'</span>);
2443     <span class="keyword">else</span>         obj = 0;
2444     <span class="keyword">end</span>;
2445     setappdata(ylbl,<span class="string">'obj'</span>,obj);
2446   <span class="keyword">end</span>;
2447 
2448 <span class="keyword">case</span> 944,
2449   h = findobj(gcf,<span class="string">'use'</span>,<span class="string">'TraceID'</span>);
2450   <span class="keyword">if</span> isempty(h) <span class="keyword">return</span>; <span class="keyword">end</span>;
2451   h = flipud(findobj(get(h,<span class="string">'child'</span>),<span class="string">'type'</span>,<span class="string">'text'</span>));
2452   lix = length(h);
2453   e = varargin{2};
2454   e(find(e&gt;lix)) = [];
2455   v = zeros(lix,1);
2456   v(e) = 1;
2457   v = find(xor(v,3-cellfun(<span class="string">'length'</span>,get(getappdata(gcf,<span class="string">'Lhandles'</span>),<span class="string">'vis'</span>))));
2458   <span class="keyword">if</span> isempty(v) <span class="keyword">return</span>; <span class="keyword">end</span>;
2459   b = get(h,<span class="string">'button'</span>);
2460   eval([b{v}]);
2461 
2462 <span class="keyword">case</span> {959, 534},   <span class="keyword">for</span> f = findobj(<span class="string">'type'</span>,<span class="string">'fig'</span>)'
2463                                b = get(f,<span class="string">'ButtonD'</span>);
2464                                <span class="keyword">if</span> length(b)&gt;3 &amp; strcmp(b(1:4),<span class="string">'plt('</span>)
2465                                  set(f,<span class="string">'closereq'</span>,<span class="string">'closereq'</span>);
2466                                  close(f);
2467                                <span class="keyword">end</span>;
2468                              <span class="keyword">end</span>;
2469 <span class="keyword">case</span> 632,  set(flipud(findobj(get(findobj(gcf,<span class="string">'use'</span>,<span class="string">'TraceID'</span>),<span class="string">'child'</span>),<span class="string">'type'</span>,<span class="string">'text'</span>)), <span class="keyword">...</span>
2470                       {<span class="string">'str'</span>},varargin{2}(:));
2471 <span class="keyword">case</span> 774, Volv1 = <span class="string">'11May10'</span>; Volv2 = 0;
2472 <span class="keyword">case</span> 425,    eval(<span class="string">'plt(''helpv'',0);'</span>);
2473 
2474 <span class="keyword">otherwise</span>,
2475 cTRACE  = [0  1  0;   1  0  1;   0  1  1;   1  0  0;  .2 .6  1;
2476            1  1  1;   1 .6 .2;   0  0  1;   1 .2 .6;  .2  1 .6;
2477           .6  1 .2;  .6 .2  1;   1  1  0;   0 .6  0;  .6  0 .6;
2478            0 .6 .6;  .6 .6  0;  .7 .7 .7;  .6  0  0;  .2 .2 .7;
2479           .5 .5 .5;  .7 .2 .2;  .2 .7 .2;   0  0 .6;  .3 .3 .3;
2480            0 .9 .4;   0 .4 .9;  .9 .4  0;  .4 .9  0;  .9  0 .4;
2481           .4  0 .9;  .8 .5 .5;  .5 .8 .5;  .5 .5 .8;];
2482 posFIG  = [9 45 700 525];
2483 posFIGd = 1;
2484 o4      = ones(1,4);
2485 axisPOS = o4;
2486 idPOS   = o4;
2487 POScid  = [3,-.075];
2488 cFIGbk  = [.25 .15 .15];
2489 cPLTbk  = [0   0   0  ];
2490 cXYax   = [1   1   1  ];
2491 cXYlbl  = [.7 .8 .95];
2492 CURcDEF = [1   1   .50];
2493 cCRSR = CURcDEF;
2494 cDELTA  = [1   0   0  ];
2495 cGRID   = [.3  .3 .3  ];
2496 <span class="keyword">for</span> k=35:99 cTRACE = [cTRACE; .75 * cTRACE(k-34,:)]; <span class="keyword">end</span>;
2497 cDEFAULT = cTRACE;
2498 LabelX = <span class="string">'X axis'</span>;
2499 LabelY = <span class="string">'Y axis (Left)'</span>;
2500 LabelYr = <span class="string">'Y axis (Right)'</span>;
2501 Titulo = <span class="string">''</span>;
2502 LiNueva = <span class="string">''</span>;
2503 NombreF = <span class="string">'plt'</span>;
2504 Xlim   = <span class="string">'default'</span>;
2505 Ylim   = <span class="string">'default'</span>;
2506 YlimR  = <span class="string">'default'</span>;
2507 Xscale = <span class="string">'linear'</span>; Xsc = <span class="string">'LinX'</span>;
2508 Yscale = <span class="string">'linear'</span>; Ysc = <span class="string">'LinY'</span>;
2509 Quiv = 0;
2510 cabeQ = [.3 .3];
2511 Reja = <span class="string">'on'</span>;
2512 Mbar = 0;
2513 Xslide = 0;
2514 ayudaF = <span class="string">''</span>;
2515 cFile = <span class="string">'#'</span>;
2516 ENApre = ones(1,2);
2517 ENAcur = ones(1,99);
2518 DISras = 0;
2519 estilo  = 0;
2520 marca = 0;
2521 AXr = 0;
2522 Derecho = [];
2523 DuaC = 0;
2524 TIDcback = <span class="string">''</span>;
2525 Ridcol = 0;
2526 Mcaja = [1 1 1 1 0 1 1 1 1];
2527 RASid = reshape(sprintf(<span class="string">'Line%2d'</span>,1:99),6,99)';
2528 TRACEmk = 0;
2529 Xstring = <span class="string">''</span>;
2530 Ystring = <span class="string">''</span>;
2531 moveCB = <span class="string">''</span>;
2532 axisCB = <span class="string">''</span>;
2533 aConex = 1;
2534 SubPlot = 0;
2535 NoCursor = 0;
2536 GridEr = <span class="string">'norm'</span>;
2537 aLp = {}; aLv = {};
2538 aRp = {}; aRv = {};
2539 lLp = {}; lLv = {};
2540 lRp = {}; lRv = {};
2541 lXp = {}; lXv = {};
2542 sz = posFIG([3 4 3 4]);
2543 posAX   = [.1429  .0933  .8329  .8819];
2544 posPICO = [.0071  .0441  .0286  .0343];
2545 posVALY = [.0071  .0060  .0286  .0343];
2546 posDEL  = [.0386  .0194  .0300  .0457];
2547 posSLDR = [.0071  .0080  .1250  .0200];
2548 posCXL  = [.1386  .0095  .0200  .0410];
2549 posC1X  = [.1643  .0076  .1000  .0450];
2550 posC2X  = [.2686  .0076  .1000  .0450];
2551 posCYL  = [.7609  .0095  .0200  .0410];
2552 posC1Y  = [.7865  .0076  .1000  .0450];
2553 posC2Y  = [.8908  .0076  .1000  .0450];
2554 posAX2  = [.0070  .0870  .0580  .0000];
2555 
2556 Sfuente = (196-get(0,<span class="string">'screenpix'</span>))/10;
2557 <span class="keyword">if</span> sum(lower(varargin{1})) == 310
2558      FIG = varargin{2};  figure(FIG);  set(FIG,<span class="string">'vis'</span>,<span class="string">'of'</span>);
2559 <span class="keyword">else</span> FIG = figure(<span class="string">'menu'</span>,<span class="string">'none'</span>,<span class="string">'number'</span>,<span class="string">'off'</span>,<span class="string">'Back'</span>,<span class="string">'off'</span>,<span class="string">'vis'</span>,<span class="string">'of'</span>);
2560 <span class="keyword">end</span>;
2561 set(FIG,<span class="string">'PaperPositionMode'</span>,<span class="string">'auto'</span>,<span class="string">'invert'</span>,<span class="string">'off'</span>,<span class="string">'PaperOrient'</span>,<span class="string">'land'</span>,<span class="keyword">...</span>
2562         <span class="string">'PaperUnits'</span>,<span class="string">'norm'</span>,<span class="string">'DoubleBuf'</span>,<span class="string">'on'</span>,<span class="string">'Invert'</span>,<span class="string">'on'</span>);
2563 AX = axes(<span class="string">'units'</span>,<span class="string">'nor'</span>,<span class="string">'fontsi'</span>,Sfuente,<span class="string">'Tag'</span>,<span class="string">'click'</span>);
2564 Volv1 = [];  nt = 0;
2565 kparam = [];
2566 k = 1;
2567 pp = 1;
2568 <span class="keyword">while</span> k&lt;=nargin
2569   absc  = varargin{k};  k=k+1;
2570   <span class="keyword">if</span> ischar(absc)
2571     <span class="keyword">if</span> k&gt;nargin
2572        disp(<span class="string">'Error using ==&gt; plt.  Not enough input arguments.'</span>);
2573        disp(<span class="string">'For help on using plt, type &quot;help plt&quot;'</span>);
2574        eval(<span class="string">'plt(''helpv'',0);'</span>);
2575        <span class="keyword">return</span>;
2576     <span class="keyword">end</span>;
2577     kparam = [kparam k-1 k];
2578     absc = lower(absc);  yy = varargin{k};   k=k+1;
2579     pfx = zeros(1,5);
2580     <span class="keyword">while</span> 1
2581       b = findstr(absc(1),<span class="string">'+-&lt;&gt;.'</span>);
2582       <span class="keyword">if</span> isempty(b) <span class="keyword">break</span>; <span class="keyword">end</span>;
2583       pfx(b) = 1;  absc(1) = [];
2584     <span class="keyword">end</span>;
2585     <span class="keyword">switch</span> sum(absc)
2586       <span class="keyword">case</span> 546,     Titulo    = yy;
2587       <span class="keyword">case</span> 442,      Xlim     = yy;
2588       <span class="keyword">case</span> 443,      Ylim     = yy;
2589       <span class="keyword">case</span> 557,     <span class="keyword">if</span> absc(1)==<span class="string">'y'</span>  YlimR = yy;  AXr = 1; <span class="keyword">else</span> cXYax = yy; <span class="keyword">end</span>;
2590       <span class="keyword">case</span> 632,    LabelX   = yy;
2591       <span class="keyword">case</span> 633,    LabelY   = yy;
2592       <span class="keyword">case</span> 747,   LabelYr  = yy;  AXr = 1;
2593       <span class="keyword">case</span> 542,     Derecho    = yy;  AXr = 1;
2594       <span class="keyword">case</span> 752,   DuaC  = yy;
2595       <span class="keyword">case</span> 727,   NombreF  = yy;
2596       <span class="keyword">case</span> 640,    cPLTbk   = yy;
2597       <span class="keyword">case</span> 614,    cFIGbk   = yy;
2598       <span class="keyword">case</span> 626,    cTRACE   = yy;
2599       <span class="keyword">case</span> 621,    cDELTA = yy;
2600       <span class="keyword">case</span> 654,    cXYlbl   = yy;
2601       <span class="keyword">case</span> 769,   cCRSR  = yy;
2602       <span class="keyword">case</span> 521,     <span class="keyword">if</span> any(yy&lt;0) GridEr = <span class="string">'xor'</span>; <span class="keyword">end</span>;
2603                        cGRID    = abs(yy);
2604       <span class="keyword">case</span> 676,    <span class="keyword">if</span> iscell(yy) estilo = char(yy);   <span class="keyword">else</span> estilo = yy;   <span class="keyword">end</span>;
2605       <span class="keyword">case</span> 757,   <span class="keyword">if</span> iscell(yy) marca = char(yy);  <span class="keyword">else</span> marca = yy;  <span class="keyword">end</span>;
2606       <span class="keyword">case</span> 732,   <span class="keyword">if</span> iscell(yy) RASid = char(yy); <span class="keyword">else</span> RASid = yy; <span class="keyword">end</span>;
2607       <span class="keyword">case</span> 743,   <span class="keyword">if</span> length(yy)==1 &amp; yy  yy = [yy (yy+.9)/2 .9]; <span class="keyword">end</span>;
2608                        TRACEmk = yy;
2609       <span class="keyword">case</span> 638,    ENAcur   = yy;
2610       <span class="keyword">case</span> 847,  DISras = yy;
2611       <span class="keyword">case</span> 885,  <span class="keyword">if</span> ~yy(3) yy(3) = yy(4)/.944; <span class="keyword">elseif</span> ~yy(4) yy(4) = yy(3)*.944; <span class="keyword">end</span>;
2612                        posFIG   = yy;
2613                        posFIGd  = 0;
2614       <span class="keyword">case</span> 775,   axisPOS  = yy(1:4);
2615                        <span class="keyword">switch</span> length(yy) <span class="keyword">case</span> 5, idPOS(3)=yy(5); <span class="keyword">case</span> 8, idPOS=yy(5:8); <span class="keyword">end</span>;
2616       <span class="keyword">case</span> 821,  TIDcback = yy;
2617       <span class="keyword">case</span> 975, Ridcol = yy;
2618       <span class="keyword">case</span> 783,   Xstring  = yy;
2619       <span class="keyword">case</span> 784,   Ystring  = yy;
2620       <span class="keyword">case</span> 873,  LiNueva = yy;
2621       <span class="keyword">case</span> 635,    ENApre   = yy;
2622       <span class="keyword">case</span> 668,    Quiv     = yy;  <span class="keyword">if</span> min(yy)&lt;2 disp(<span class="string">'No quiver tail position '</span>); <span class="keyword">return</span>; <span class="keyword">end</span>;
2623       <span class="keyword">case</span> 515,     cabeQ    = yy;
2624       <span class="keyword">case</span> 841,  ayudaF = yy;
2625       <span class="keyword">case</span> 959, cFile    = yy;
2626       <span class="keyword">case</span> 846,  cPLTbk = get(0,<span class="string">'defaultaxescolor'</span>); cGRID = .4*cPLTbk + .3;
2627                        cFIGbk = get(0,<span class="string">'defaultfigurecolor'</span>);
2628                        cXYax  = get(0,<span class="string">'defaultaxesxcolor'</span>);  cXYlbl = cXYax;
2629                        cTRACE = get(0,<span class="string">'defaultaxescolororder'</span>);
2630                        <span class="keyword">if</span> length(yy(1,:))==3 cTRACE = [cTRACE; yy]; <span class="keyword">end</span>;
2631       <span class="keyword">case</span> 636,    moveCB = yy;
2632       <span class="keyword">case</span> 634,    axisCB = yy;
2633       <span class="keyword">case</span> 867,  aConex = yy;
2634       <span class="keyword">case</span> 777,   SubPlot = yy;
2635       <span class="keyword">case</span> 310,
2636       <span class="keyword">case</span> 780,   kq = 0;
2637         <span class="keyword">while</span> kq &lt; length(yy)
2638           kq = kq + 1;
2639           <span class="keyword">switch</span> yy(kq)
2640             <span class="keyword">case</span> <span class="string">'T'</span>, Reja = <span class="string">'off'</span>;
2641             <span class="keyword">case</span> <span class="string">'M'</span>, Mbar = 1;
2642             <span class="keyword">case</span> <span class="string">'X'</span>, Xsc = <span class="string">'LogX'</span>;  Xscale = <span class="string">'Log'</span>;
2643             <span class="keyword">case</span> <span class="string">'Y'</span>, Ysc = <span class="string">'LogY'</span>;  Yscale = <span class="string">'Log'</span>;
2644             <span class="keyword">case</span> <span class="string">'S'</span>, Xslide = 1;
2645             <span class="keyword">case</span> <span class="string">'N'</span>, NoCursor = 1;
2646             <span class="keyword">case</span> <span class="string">'-'</span>, kq = kq + 1;  km =findstr(yy(kq),<span class="string">'HXYGPFMZRA'</span>);
2647                       <span class="keyword">if</span> length(km) <span class="keyword">if</span> km==10 Mcaja=0; <span class="keyword">else</span> Mcaja(km)=0; <span class="keyword">end</span>; <span class="keyword">end</span>;
2648             <span class="keyword">case</span> <span class="string">'+'</span>, kq = kq + 1;  km =findstr(yy(kq),<span class="string">'HXYGPFMZRA'</span>);
2649                       <span class="keyword">if</span> length(km) <span class="keyword">if</span> km==10 Mcaja=ones(1,9);
2650                                     <span class="keyword">else</span> <span class="keyword">if</span> pp &amp; km~=5 Mcaja=0; pp=0; <span class="keyword">end</span>;
2651                                          Mcaja(km)=1;
2652                                     <span class="keyword">end</span>;
2653                       <span class="keyword">end</span>;
2654           <span class="keyword">end</span>;
2655         <span class="keyword">end</span>;
2656       <span class="keyword">otherwise</span>,
2657          <span class="keyword">if</span> sum(pfx)
2658            <span class="keyword">if</span> pfx(1) aLp = [aLp {absc}]; aLv = [aLv {yy}]; <span class="keyword">end</span>;
2659            <span class="keyword">if</span> pfx(2) aRp = [aRp {absc}]; aRv = [aRv {yy}]; <span class="keyword">end</span>;
2660            <span class="keyword">if</span> pfx(3) lLp = [lLp {absc}]; lLv = [lLv {yy}]; <span class="keyword">end</span>;
2661            <span class="keyword">if</span> pfx(4) lRp = [lRp {absc}]; lRv = [lRv {yy}]; <span class="keyword">end</span>;
2662            <span class="keyword">if</span> pfx(5) lXp = [lXp {absc}]; lXv = [lXv {yy}]; <span class="keyword">end</span>;
2663          <span class="keyword">else</span>
2664            <span class="keyword">if</span> iscell(yy)
2665              <span class="keyword">if</span> length(yy)==length(Volv1)
2666                absc = {absc};
2667                yy = yy(:);
2668              <span class="keyword">else</span> fprintf(<span class="string">'Warning: For parameter %s, found %d elements but expected %d\n'</span>,absc,length(yy),length(Volv1));
2669              <span class="keyword">end</span>;
2670            <span class="keyword">end</span>;
2671            set(Volv1,absc,yy);
2672          <span class="keyword">end</span>;
2673     <span class="keyword">end</span>;
2674   <span class="keyword">else</span>
2675      <span class="keyword">if</span> k&lt;=nargin         yy = varargin{k}; <span class="keyword">else</span> yy = <span class="string">'a'</span>; <span class="keyword">end</span>;
2676      <span class="keyword">if</span> ~isreal(absc)        yy = imag(absc);  absc = real(absc);
2677      <span class="keyword">elseif</span> isnumeric(yy) k = k+1;
2678      <span class="keyword">else</span>                 yy=absc; absc=1:length(yy);
2679      <span class="keyword">end</span>;
2680      nxt = length(Volv1) + 1;
2681      <span class="keyword">if</span> length(find(Quiv==nxt))
2682         a = Volv1(colaQ);
2683         x0 = get(a,<span class="string">'x'</span>);  x0 = transpose(x0(:));
2684         y0 = get(a,<span class="string">'y'</span>);  y0 = transpose(y0(:));
2685         x1 = transpose(absc(:));
2686         y1 = transpose(yy(:));
2687         rNaN = repmat(NaN,size(y1));
2688         x01 = x0+x1;  y01 = y0+y1;
2689         a = x01-cabeQ(1)*(x1+cabeQ(2)*y1);
2690         b = x01-cabeQ(1)*(x1-cabeQ(2)*y1);
2691         absc  = [x0; x01; rNaN; a; x01; b; rNaN];
2692         a = y01-cabeQ(1)*(y1-cabeQ(2)*x1);
2693         b = y01-cabeQ(1)*(y1+cabeQ(2)*x1);
2694         yy = [y0; y01; rNaN; a; y01; b; rNaN];
2695         absc = absc(:);  yy = yy(:);
2696         ENAcur(nxt) = 0;
2697         nxt = 0;
2698      <span class="keyword">end</span>;
2699      H = line(absc,yy);  Volv1 = [Volv1; H];   nt = nt + length(H);
2700      <span class="keyword">if</span> nxt colaQ = nt; <span class="keyword">end</span>;
2701   <span class="keyword">end</span>;
2702 <span class="keyword">end</span>;
2703 
2704 <span class="keyword">if</span> iscell(Ylim) YlimR = Ylim{2}; Ylim = Ylim{1}; AXr = 1; <span class="keyword">end</span>;
2705 nSP = length(SubPlot) - 1;
2706 <span class="keyword">if</span> (iscell(LabelX) | iscell(Xlim)) &amp; ~nSP &amp; nt&gt;1 SubPlot = [100 -50 100]; nSP = 2; <span class="keyword">end</span>;
2707 <span class="keyword">if</span> iscell(LabelX) LabelXr = LabelX{2};  LabelX = LabelX{1}; <span class="keyword">else</span> LabelXr = <span class="string">'X axis'</span>; <span class="keyword">end</span>;
2708 <span class="keyword">if</span> iscell(Xlim)   Xlimr   = Xlim{2};    Xlim   = Xlim{1};   <span class="keyword">else</span> Xlimr   = <span class="string">'default'</span>; <span class="keyword">end</span>;
2709 
2710 nSPl = nSP;
2711 nSPr = 0;
2712 SPw = 1;
2713 <span class="keyword">if</span> nSP
2714   SubPlot = SubPlot/100;
2715   k = find(SubPlot&lt;0);
2716   <span class="keyword">if</span> length(k) SPw = -SubPlot(k);
2717                SubPlot(k) = [];      nSP = nSP-1;
2718                nSPr = nSP + 2 - k;   nSPl = nSP - nSPr;
2719   <span class="keyword">end</span>;
2720 <span class="keyword">end</span>;
2721 nID = nt - nSP;
2722 <span class="keyword">if</span> nID&gt;99 &amp; RASid disp(sprintf(<span class="string">'Max # of traceIDs = %d'</span>,99)); <span class="keyword">return</span>; <span class="keyword">end</span>;
2723 <span class="keyword">if</span> ~iscell(LabelY) LabelY = {LabelY}; <span class="keyword">end</span>;
2724 <span class="keyword">if</span> length(LabelY) &gt;= nSP+2  LabelYr = LabelY{nSP+2}; AXr = 1; <span class="keyword">end</span>;
2725 setappdata(FIG,<span class="string">'params'</span>,varargin(kparam));
2726 k = sum(Ridcol);
2727 <span class="keyword">if</span> k  Ridcol = [nID-k Ridcol]; <span class="keyword">else</span> Ridcol = nID; <span class="keyword">end</span>;
2728 ntid = max(Ridcol);
2729 ncol = length(Ridcol);
2730 <span class="keyword">if</span> ncol&gt;1 &amp; all(axisPOS == o4) &amp; all(idPOS == o4)
2731   idPOS(3) = ncol;
2732   axisPOS = [.4 + ncol/2, 1, (210-11*ncol-ncol^2)/200, 1];
2733 <span class="keyword">end</span>;
2734 <span class="keyword">if</span> all(idPOS == o4) &amp; (nt&lt;6 | isempty(LabelY{1})) &amp; ~nSP
2735    idPOS(3) = 1.2;
2736 <span class="keyword">end</span>;
2737 fsep = length(findstr(cFile,filesep));
2738 <span class="keyword">if</span> length(cFile) &amp; ~fsep
2739   foobar = 0;
2740   <span class="keyword">if</span> exist(<span class="string">'foobar'</span>)
2741        liy = feval(<span class="string">'dbstack'</span>);
2742        <span class="keyword">if</span> length(liy)
2743           lix = liy(end).name;
2744           nq = findstr(<span class="string">'('</span>,lix);
2745           <span class="keyword">if</span> length(nq) lix = lix(1:nq(1)-2); <span class="keyword">end</span>;
2746           np = findstr(filesep,lix);
2747           <span class="keyword">if</span> length(np) np=np(end); <span class="keyword">else</span> np=0; <span class="keyword">end</span>;
2748           <span class="keyword">if</span> length(lix)-np&gt;30 &amp; length(liy)&gt;1  lix = liy(end-1).name; <span class="keyword">end</span>;
2749           liy = feval(<span class="string">'which'</span>,lix);
2750        <span class="keyword">end</span>;
2751   <span class="keyword">else</span> liy = GetExe;
2752   <span class="keyword">end</span>;
2753   [pth, name] = fileparts(liy);
2754   <span class="keyword">if</span> cFile(1) == <span class="string">'#'</span> cFile = [name <span class="string">'Color'</span>]; <span class="keyword">end</span>;
2755   cFile = fullfile(pth,[cFile <span class="string">'.mat'</span>]);
2756 <span class="keyword">end</span>;
2757 <span class="keyword">if</span> fsep cFile = [cFile <span class="string">'.mat'</span>]; <span class="keyword">end</span>;
2758 <span class="keyword">if</span> exist(cFile) == 2
2759   load(cFile);
2760 <span class="keyword">end</span>;
2761 <span class="keyword">if</span> length(ENAcur)&lt;nt  ENAcur = [ENAcur ones(1,nt-length(ENAcur))]; <span class="keyword">end</span>;
2762 <span class="keyword">if</span> length(DISras)&lt;nt  DISras = [DISras zeros(1,nt-length(DISras))]; <span class="keyword">end</span>;
2763 nC = length(cTRACE(:,1));
2764 <span class="keyword">if</span> length(Titulo)
2765    axisPOS = axisPOS .* [1 1 1 .96];
2766    ntx = findstr(<span class="string">'[TexOff]'</span>,Titulo);
2767    <span class="keyword">if</span> length(ntx)==1
2768         Titulo(ntx:ntx+7) = [];
2769         title(Titulo,<span class="string">'color'</span>,cXYlbl,<span class="string">'HandleV'</span>,<span class="string">'on'</span>,<span class="string">'interp'</span>,<span class="string">'none'</span>);
2770    <span class="keyword">else</span> title(Titulo,<span class="string">'color'</span>,cXYlbl,<span class="string">'HandleV'</span>,<span class="string">'on'</span>);
2771    <span class="keyword">end</span>;
2772 <span class="keyword">end</span>;
2773 setappdata(AX,<span class="string">'DualCur'</span>,DuaC);
2774 <span class="keyword">if</span> AXr &amp; nID&gt;1
2775    <span class="keyword">if</span> isempty(Derecho) Derecho = nID; <span class="keyword">end</span>;
2776    axisPOS = axisPOS .* [1 1 .94 1];
2777    <span class="keyword">if</span> ischar(YlimR)
2778      mn = inf;  mx = -inf;
2779      <span class="keyword">for</span> k=Derecho
2780        absc = get(Volv1(k),<span class="string">'y'</span>);  mn = min(mn,min(absc));  mx = max(mx,max(absc));
2781      <span class="keyword">end</span>;
2782       df=(mx-mn)/20; YlimR=[mn-df mx+df];
2783       <span class="keyword">if</span> ~diff(YlimR) YlimR = [mn mn+max(1e-12,mn*1e-12)];  <span class="keyword">end</span>;
2784    <span class="keyword">end</span>;
2785    <span class="keyword">if</span> length(Derecho)==1 yclr = cTRACE(mod(Derecho-1,nC)+1,:); <span class="keyword">else</span> yclr = cXYax; <span class="keyword">end</span>;
2786    AXr = axes(<span class="string">'units'</span>,<span class="string">'nor'</span>,<span class="string">'fontsi'</span>,Sfuente,<span class="string">'YAxisLoc'</span>,<span class="string">'right'</span>,<span class="string">'yli'</span>,YlimR,<span class="keyword">...</span>
2787               <span class="string">'color'</span>,cPLTbk,<span class="string">'xcol'</span>,cXYax,<span class="string">'ycol'</span>,yclr,<span class="string">'xtick'</span>,[]);
2788    <span class="keyword">if</span> ~aConex LabelYr = [<span class="string">'\div '</span> LabelYr <span class="string">' \div'</span>]; <span class="keyword">end</span>;
2789    ylabel(LabelYr,<span class="string">'color'</span>,yclr,<span class="string">'HandleV'</span>,<span class="string">'on'</span>,<span class="string">'ButtonD'</span>,<span class="string">'plt click link;'</span>);
2790    set(Volv1(Derecho),<span class="string">'par'</span>,AXr);
2791    axes(AX);
2792    AXrl = [AX AXr];
2793 <span class="keyword">else</span> AXrl = AX; set(AX,<span class="string">'Box'</span>,<span class="string">'On'</span>);
2794 <span class="keyword">end</span>;
2795 mrk = repmat(<span class="string">'+'</span>,1,nt);
2796 mrk(Derecho) = <span class="string">'o'</span>;
2797 <span class="keyword">if</span> DuaC
2798   <span class="keyword">if</span> length(find(DuaC==Derecho)) mrk(DuaC)=<span class="string">'s'</span>; <span class="keyword">else</span> mrk(DuaC) = <span class="string">'*'</span>; <span class="keyword">end</span>;
2799 <span class="keyword">end</span>;
2800 ceq = isequal(cCRSR,CURcDEF);  cEXcaja = cCRSR;
2801 <span class="keyword">if</span> ceq &amp; sum(cPLTbk)&gt;2 cEXcaja=1-cEXcaja; cCRSR=1-cCRSR; <span class="keyword">end</span>;
2802 curclr = [.7 .7 .7; 0 0 0; cEXcaja; cDELTA];
2803 ENAcurS = sum(ENAcur(1:nt));
2804 <span class="keyword">if</span> ceq &amp; ENAcurS&gt;1 cCRSR = [0 0 0]; <span class="keyword">end</span>;
2805 <span class="keyword">for</span> k=1:nt  set(Volv1(k),<span class="string">'color'</span>,cTRACE(mod(k-1,nC)+1,:));
2806             <span class="keyword">if</span> ENAcur(k) curclr=[curclr; cCRSR]; <span class="keyword">else</span>  set(Volv1(k),<span class="string">'Tag'</span>,<span class="string">'SkipCur'</span>); <span class="keyword">end</span>;
2807 <span class="keyword">end</span>;
2808 <span class="keyword">if</span> estilo  <span class="keyword">if</span> length(estilo(:,1)) &lt; nt estilo=estilo'; <span class="keyword">end</span>;
2809           <span class="keyword">for</span> k=1:nt
2810             <span class="keyword">if</span> length(findstr(estilo(k,1),<span class="string">'+o*.xsd^v&lt;&gt;ph'</span>))
2811                   set(Volv1(k),<span class="string">'LineStyle'</span>,<span class="string">'none'</span>,<span class="string">'Marker'</span>,estilo(k,1));
2812             <span class="keyword">else</span>  set(Volv1(k),<span class="string">'LineStyle'</span>,estilo(k,:));  <span class="keyword">end</span>;
2813           <span class="keyword">end</span>;
2814 <span class="keyword">end</span>;
2815 <span class="keyword">if</span> marca <span class="keyword">if</span> length(marca(:,1)) &lt; nt marca=marca'; <span class="keyword">end</span>;
2816           <span class="keyword">for</span> k=1:nt set(Volv1(k),<span class="string">'Marker'</span>,marca(k,:)); <span class="keyword">end</span>;
2817 <span class="keyword">end</span>;
2818 <span class="keyword">for</span> k=1:nt <span class="keyword">if</span> DISras(k) set(Volv1(k),<span class="string">'vis'</span>,<span class="string">'of'</span>); <span class="keyword">end</span>; <span class="keyword">end</span>;
2819 
2820 Ret1a = Volv1;
2821 axS = [];
2822 <span class="keyword">if</span> nSP
2823   <span class="keyword">if</span> posFIGd posFIG([3 4]) = [840 570]; <span class="keyword">end</span>;
2824   ySP = .11;  ySPr = ySP;
2825   ySP  = cumsum([ySP   (1-ySP)*SubPlot(1:nSPl+1)]);
2826   hSP  = diff(ySP)  - .03;  ySP  = ySP  + .012;
2827   dx = ((AXr&gt;0)*.025 - .07) * (nSPr&gt;0);
2828   posAX = [posAX(1) ySP(1) (posAX(3)+dx)*SPw hSP(1)];
2829   dx = posFIG(3);  dx1 = 64/dx;  dx2 = 14/dx;  dx3 = 67/dx;  dx4 = 19/dx;
2830   dy = posFIG(4);  dy1 = 20/dy;  y1a = .0076;  y2a = y1a + 24/dy;
2831   x1 = .1386;  x2 = x1+dx4;  x3 = x2+dx3;  x4 = x2+nSPl*dx3;
2832   posCXL = [x1 y2a dx2 dy1];
2833   posCYL = [x1 y1a dx2 dy1];
2834   posC1X = [x2 y2a dx1 dy1];
2835   posC2X = [x3 y2a dx1 dy1];
2836   posC1Y = [x4 y1a dx1 dy1];
2837   posC2Y = posC1Y + [dx3 0 0 0];
2838   <span class="keyword">if</span> nSPr
2839     ySPr = cumsum([ySPr (1-ySPr)*SubPlot(nSPl+2:end)]);
2840     hSPr = diff(ySPr) - .03;  ySPr = ySPr + .012;
2841     SPx = sum(posAX([1 3])) + .075;
2842     x1 = SPx-.03;  x2 = x1+dx4;  x3 = x2+dx3;  x4 = x2+(nSPr-1)*dx3;
2843     posCXLr = [x1 y2a dx2 dy1];
2844     posCYLr = [x1 y1a dx2 dy1];
2845     posC1Xr = [x2 y2a dx1 dy1];
2846     posC2Xr = [x3 y2a dx1 dy1];
2847     posC1Yr = [x4 y1a dx1 dy1];
2848     posC2Yr = posC1Yr + [dx3 0 0 0];
2849     p2r = [posCXLr;posCYLr;posC1Xr;posC2Xr;posC1Yr;posC2Yr];
2850   <span class="keyword">end</span>;
2851   <span class="keyword">for</span> k=1:nSP
2852     l = Volv1(nt+k-nSP);
2853     Ret1a(nt+k-nSP) = 0;
2854     c = get(l,<span class="string">'color'</span>);
2855     a = axes(<span class="string">'ycol'</span>,c,<span class="string">'xcol'</span>,c);
2856     setappdata(a,<span class="string">'Lhandles'</span>,l);
2857     set(l,<span class="string">'par'</span>,a);
2858     <span class="keyword">if</span> length(LabelY)&gt;k ylabel(LabelY{k+1}); <span class="keyword">end</span>;
2859     <span class="keyword">if</span> k == nSPl+1 xlabel(LabelXr); <span class="keyword">end</span>;
2860     axS = [axS a];
2861   <span class="keyword">end</span>;
2862 <span class="keyword">end</span>;
2863 set(AXrl,<span class="string">'pos'</span>,posAX.*axisPOS,<span class="string">'Xscale'</span>,Xscale,<span class="string">'Yscale'</span>,Yscale);
2864 <span class="keyword">if</span> ischar(Ylim)
2865    Ylim = get(AX,<span class="string">'yli'</span>);
2866 <span class="keyword">end</span>;
2867 Ret1a(find(~Ret1a)) = [];
2868 setappdata(AX,<span class="string">'Lhandles'</span>,Ret1a);
2869 setappdata(FIG,<span class="string">'Lhandles'</span>,Volv1);
2870 axData = [AX axS];
2871 <span class="keyword">if</span> AXr axData = [axData AXr]; <span class="keyword">end</span>;
2872 setappdata(FIG,<span class="string">'axis'</span>,axData);
2873 
2874 pb = [posPICO;posVALY;posDEL];
2875 <span class="keyword">if</span> Xslide
2876    posAX2(2) = posAX2(2) + .028;  pb(:,2) = pb(:,2) + .028;  pb = [pb; posSLDR];
2877 <span class="keyword">end</span>;
2878 cador = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,AXrl,<span class="string">'init'</span>,<span class="keyword">...</span>
2879   [posCXL;posCYL;posC1X;posC2X;posC1Y;posC2Y;pb],<span class="keyword">...</span>
2880   curclr,<span class="string">''</span>, mrk, 0.8*Sfuente,<span class="string">''</span>,<span class="string">'on'</span>,[],LiNueva);
2881 
2882 set(findobj(gcf,<span class="string">'style'</span>,<span class="string">'push'</span>,<span class="string">'str'</span>,<span class="string">'D'</span>),<span class="string">'use'</span>,cDEFAULT,<span class="string">'tag'</span>,cFile);
2883 rasHT = sprintf(<span class="string">'plt(''cursor'',%d,'</span>,cador);
2884 set(AXrl,<span class="string">'use'</span>,cador);
2885 Izqu = setdiff(1:nt-nSP,Derecho);
2886 nIzqu = length(Izqu);
2887 <span class="keyword">if</span> (AXr | nSP) &amp; nIzqu==1
2888   yclr = cTRACE(mod(Izqu-1,nC)+1,:); leftclr=yclr;
2889 <span class="keyword">else</span> yclr = cXYax;  leftclr = cXYlbl;
2890 <span class="keyword">end</span>;
2891 set(AX,<span class="string">'xcol'</span>,cXYax,<span class="string">'ycol'</span>,yclr);
2892 <span class="keyword">if</span> ischar(Xlim)
2893   <span class="keyword">if</span> nIzqu Xlim = get(AX,<span class="string">'xli'</span>); <span class="keyword">else</span> Xlim = get(AXr,<span class="string">'xli'</span>); <span class="keyword">end</span>;
2894 <span class="keyword">end</span>;
2895 [prefix xmult] = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'metricp'</span>,max(abs((Xlim))));
2896 <span class="keyword">if</span> ENApre(1) &amp; xmult~=1
2897   <span class="keyword">for</span> k=1:nt set(Volv1(k),<span class="string">'x'</span>,xmult*get(Volv1(k),<span class="string">'x'</span>)); <span class="keyword">end</span>;
2898   LabelX = [prefix LabelX];
2899 <span class="keyword">else</span> xmult = 1;
2900 <span class="keyword">end</span>;
2901 set(AXrl,<span class="string">'xli'</span>,Xlim*xmult);
2902 [prefix mult] = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'metricp'</span>,max(abs((Ylim))));
2903 ymult = ones(1,nt);
2904 <span class="keyword">if</span> ENApre(2) &amp; mult~=1
2905   <span class="keyword">for</span> k=1:nIzqu
2906      kk = Volv1(Izqu(k));
2907      set(kk,<span class="string">'y'</span>,mult*get(kk,<span class="string">'y'</span>));
2908      ymult(Izqu(k)) = mult;
2909   <span class="keyword">end</span>;
2910   LabelY{1} = [prefix LabelY{1}];
2911 <span class="keyword">else</span> mult = 1;
2912 <span class="keyword">end</span>;
2913 set(AX,<span class="string">'yli'</span>,Ylim*mult);
2914 setappdata(FIG,<span class="string">'xymult'</span>,[xmult ymult]);
2915 xlabel(LabelX,<span class="string">'color'</span>,cXYlbl,<span class="string">'HandleV'</span>,<span class="string">'on'</span>);
2916 hYlab = ylabel(LabelY{1},<span class="string">'color'</span>,leftclr,<span class="string">'HandleV'</span>,<span class="string">'on'</span>);
2917 <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'set'</span>,<span class="string">'moveCB2'</span>,[rasHT <span class="string">'''MVcur'');'</span>]);
2918 <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'grid'</span>,AX,<span class="string">'init'</span>,cGRID,GridEr);
2919 set(AX,<span class="string">'TickLen'</span>,(1-<a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'grid'</span>,AX,Reja))*[.01 .025]);
2920 axes(<span class="string">'pos'</span>,posCYL+[0 0 .2 0],<span class="string">'vis'</span>,<span class="string">'of'</span>);
2921 text(-.02,.45,<span class="string">''</span>,<span class="string">'fontsi'</span>,Sfuente,<span class="string">'horiz'</span>,<span class="string">'right'</span>,<span class="string">'ButtonD'</span>,<span class="string">'plt click RMS;'</span>,<span class="string">'use'</span>,<span class="string">'idcur'</span>);
2922 <span class="keyword">if</span> length(Xstring)
2923   <span class="keyword">if</span> ischar(Xstring) &amp; Xstring(1) == <span class="string">'?'</span>
2924         Xstring(1)=[];
2925         a = uicontrol(<span class="string">'sty'</span>,<span class="string">'edit'</span>,<span class="string">'units'</span>,<span class="string">'nor'</span>,<span class="string">'pos'</span>,posC2X.*[1 1 1.7 1],<span class="string">'horiz'</span>,<span class="string">'cent'</span>,<span class="keyword">...</span>
2926                  <span class="string">'backg'</span>,[.2 .2 .2],<span class="string">'foreg'</span>,[1 1 .3]);
2927   <span class="keyword">else</span>  a = text(-2.22,.45,<span class="string">''</span>,<span class="string">'color'</span>,cXYlbl);
2928   <span class="keyword">end</span>;
2929   set(a,<span class="string">'fontsi'</span>,Sfuente,<span class="string">'tag'</span>,<span class="string">'xstr'</span>);
2930   setappdata(a,<span class="string">'evl'</span>,Xstring);
2931   ch = get(FIG,<span class="string">'child'</span>);
2932   ch([1 end-1]) = ch([end-1 1]);  set(FIG,<span class="string">'child'</span>,ch);
2933 <span class="keyword">end</span>;
2934 <span class="keyword">if</span> length(Ystring)
2935   <span class="keyword">if</span> ischar(Ystring) &amp; Ystring(1) == <span class="string">'?'</span>
2936         Ystring(1)=[];
2937         a = uicontrol(<span class="string">'sty'</span>,<span class="string">'edit'</span>,<span class="string">'units'</span>,<span class="string">'nor'</span>,<span class="string">'pos'</span>,posC2Y,<span class="string">'horiz'</span>,<span class="string">'cent'</span>,<span class="keyword">...</span>
2938                  <span class="string">'backg'</span>,[.2 .2 .2],<span class="string">'foreg'</span>,[1 1 .3]);
2939   <span class="keyword">else</span>  a = text(.6,.45,<span class="string">''</span>,<span class="string">'color'</span>,cXYlbl);
2940   <span class="keyword">end</span>;
2941   set(a,<span class="string">'fontsi'</span>,Sfuente,<span class="string">'tag'</span>,<span class="string">'ystr'</span>);
2942   setappdata(a,<span class="string">'evl'</span>,Ystring);
2943   ch = get(FIG,<span class="string">'child'</span>);
2944   ch([1 end-2]) = ch([end-2 1]);  set(FIG,<span class="string">'child'</span>,ch);
2945 <span class="keyword">end</span>;
2946 nMenu = sum(Mcaja);
2947 aid = 0;
2948 ahi = .035*nMenu;
2949 <span class="keyword">if</span> nID&gt;1 &amp; RASid
2950   h = 19*ntid;
2951   ahip = ahi * sz(2);
2952   hr = (sz(2)-85) / (h+ahip);
2953   <span class="keyword">if</span> hr&lt;1 ahi = ahi*hr;  h = h*hr;  <span class="keyword">end</span>;
2954   aidp = idPOS.*[3 sz(2)-4-h 50 h]./sz;
2955   aid = axes(<span class="string">'xli'</span>,[0 ncol],<span class="string">'yli'</span>,[-ntid 0]-.5,<span class="string">'color'</span>,cPLTbk,<span class="string">'xcol'</span>,cFIGbk,<span class="string">'ycol'</span>,cFIGbk,<span class="string">'XtickL'</span>,<span class="string">' '</span>,<span class="string">'YtickL'</span>,<span class="string">' '</span>,<span class="string">'TickLen'</span>,[0 0]',<span class="string">'use'</span>,<span class="string">'TraceID'</span>,<span class="keyword">...</span>
2956         <span class="string">'units'</span>,<span class="string">'nor'</span>,<span class="string">'pos'</span>,aidp);
2957   setappdata(aid,<span class="string">'TIDcback'</span>,TIDcback);
2958   cRid = cPLTbk + .16*(2*(cPLTbk&lt;.5)-1);
2959   fila = 1;  col = 1;
2960   bln = 0;
2961   lpl = {<span class="string">'color'</span>; <span class="string">'marker'</span>; <span class="string">'linestyle'</span>; <span class="string">'linewidth'</span>};
2962   [tn tw] = size(RASid);
2963   <span class="keyword">if</span> nID&gt;tn RASid = [RASid; repmat(<span class="string">' '</span>,nID-tn,tw)]; <span class="keyword">end</span>;
2964   <span class="keyword">for</span> k=1:nID
2965     <span class="keyword">if</span> length(find(k==Derecho)) cR=cRid; line(col-[1 .05],[0 0]-fila,<span class="string">'color'</span>,cR,<span class="string">'LineWidth'</span>,9);
2966     <span class="keyword">else</span>                      cR=cPLTbk;
2967     <span class="keyword">end</span>;
2968     s = RASid(k,:);
2969     <span class="keyword">if</span> all(s==<span class="string">' '</span>) bln=bln+1; <span class="keyword">continue</span>; <span class="keyword">end</span>;
2970     d = text(col-.93,-fila,s);
2971     ms = sprintf(<span class="string">'plt(''click'',[%d %d]);'</span>,8192*Volv1(k),8192*d);
2972     set(d,<span class="string">'fontsi'</span>,Sfuente,<span class="string">'fontw'</span>,<span class="string">'bol'</span>,<span class="string">'color'</span>,cTRACE(mod(k-1,nC)+1,:),<span class="string">'ButtonD'</span>,ms);<span class="keyword">...</span>
2973     <span class="keyword">if</span> TRACEmk
2974       mk = line(TRACEmk,TRACEmk*0-k,lpl,get(Volv1(k),lpl),<span class="string">'ButtonD'</span>,ms);
2975       setappdata(d,<span class="string">'mk'</span>,mk);
2976       <span class="keyword">if</span> TRACEmk(1)&lt;.25 set(d,<span class="string">'color'</span>,cR); <span class="keyword">end</span>;
2977     <span class="keyword">else</span> mk = [];
2978     <span class="keyword">end</span>;
2979     <span class="keyword">if</span> DISras(k) set(d,<span class="string">'fonta'</span>,<span class="string">'ita'</span>,<span class="string">'fontw'</span>,<span class="string">'nor'</span>); set(mk,lpl,{[0 .3 .3] <span class="string">'none'</span> <span class="string">'-'</span> 9}); <span class="keyword">end</span>;
2980     fila = fila+1;
2981     <span class="keyword">if</span> fila&gt;Ridcol(col) col=col+1; fila=1; <span class="keyword">end</span>;
2982   <span class="keyword">end</span>;
2983   <span class="keyword">if</span> bln &amp; ncol==1
2984      dy = aidp(4) * (1 - (nID-bln)/nID);
2985      set(aid,<span class="string">'yli'</span>,[bln-nID 0]-.5,<span class="string">'pos'</span>,aidp+[0 dy 0 -dy]);
2986   <span class="keyword">end</span>;
2987 <span class="keyword">end</span>;
2988 <span class="keyword">if</span> nMenu
2989   posAX2(4) = ahi;  c = (cXYax + cFIGbk)/2;
2990   amb = axes(<span class="string">'units'</span>,<span class="string">'nor'</span>,<span class="string">'pos'</span>,posAX2,<span class="string">'yli'</span>,[-nMenu 0]-.45,<span class="string">'Box'</span>,<span class="string">'On'</span>,<span class="string">'XaxisLoc'</span>,<span class="string">'top'</span>,<span class="keyword">...</span>
2991            <span class="string">'color'</span>,cFIGbk,<span class="string">'xcol'</span>,c,<span class="string">'ycol'</span>,c,<span class="string">'XtickL'</span>,<span class="string">' '</span>,<span class="string">'YtickL'</span>,<span class="string">' '</span>,<span class="string">'TickLen'</span>,[0 0]',<span class="string">'Tag'</span>,<span class="string">'MenuBox'</span>);
2992   b=0; t=[];
2993   txt = { <span class="string">'Help'</span>,    Xsc,       Ysc,       <span class="string">'Grid'</span>,    <span class="string">'Print'</span>,   <span class="string">'Menu'</span>,    <span class="string">'Mark'</span>,    <span class="string">'Zout'</span>,   <span class="string">'XY\leftrightarrow'</span>};
2994   btn = { <span class="string">'plt(''helpv'',1);'</span>; <span class="string">'plt(''click'',''TGLlogx'');'</span>; <span class="string">'plt(''click'',''TGLlogy'');'</span>; <span class="string">'plt(''click'',''TGLgrid'');'</span>; <span class="string">'plt(''hcpy'',''init'',gcf);'</span>; <span class="string">'plt(''click'',''TGLmenu'');'</span>; <span class="string">'plt(''click'',''mark'');'</span>; <span class="string">'plt(''click'',''ZoomOut'');'</span>; <span class="string">''</span>   };
2995   <span class="keyword">for</span> k=1:length(Mcaja)
2996     <span class="keyword">if</span> Mcaja(k)
2997        b=b-1;  t = [t text(.5,b,txt{k},<span class="string">'interp'</span>,<span class="string">'tex'</span>)];  bt = btn{k};
2998        <span class="keyword">if</span> isempty(bt) bt = [rasHT <span class="string">'''scale'',''old'');'</span>]; <span class="keyword">end</span>;
2999        set(t(end),<span class="string">'ButtonD'</span>,bt);
3000        <span class="keyword">if</span> k==1 set(t(1),<span class="string">'use'</span>,ayudaF); <span class="keyword">end</span>;
3001     <span class="keyword">end</span>;
3002   <span class="keyword">end</span>;
3003   set(t,<span class="string">'fontsi'</span>,Sfuente,<span class="string">'color'</span>,cXYlbl,<span class="string">'horiz'</span>,<span class="string">'cent'</span>);
3004 <span class="keyword">end</span>;
3005 CurPri = getappdata(0,<span class="string">'CurMain'</span>);
3006 Hc = get(CurPri(cador),<span class="string">'use'</span>);
3007 set(Hc(4),<span class="string">'ButtonD'</span>,<span class="string">'plt click EDIT 1;'</span>);
3008 set(Hc(6),<span class="string">'ButtonD'</span>,<span class="string">'plt click EDIT 2;'</span>);
3009 <span class="keyword">if</span> posFIG(1)&lt;0 posFIG = abs(posFIG);
3010 <span class="keyword">else</span> <span class="keyword">for</span> k=fliplr(findobj(<span class="string">'Type'</span>,<span class="string">'figure'</span>)')
3011       <span class="keyword">if</span> get(k,<span class="string">'pos'</span>) == posFIG  posFIG = posFIG + [30 25 0 0]; <span class="keyword">end</span>;
3012      <span class="keyword">end</span>;
3013 <span class="keyword">end</span>;
3014 set(FIG,<span class="string">'pos'</span>,posFIG,<span class="string">'Name'</span>,NombreF,<span class="string">'color'</span>,cFIGbk,<span class="string">'CloseReq'</span>,<span class="keyword">...</span>
3015  [rasHT <span class="string">'''clear'');delete(findobj(''type'',''fig'',''user'',gcf));closereq;'</span>]);
3016 <span class="keyword">if</span> Mbar <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'click'</span>,<span class="string">'TGLmenu'</span>); <span class="keyword">end</span>;
3017 ac = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'get'</span>,<span class="string">'activeLine'</span>);
3018 t = Volv1(ac); x=get(t,<span class="string">'x'</span>); absc=get(t,<span class="string">'y'</span>); k=round(length(x)/2);
3019 set(AX,aLp,aLv);
3020 set(get(AX,<span class="string">'Ylabel'</span>),lLp,lLv);
3021 set(get(AX,<span class="string">'Xlabel'</span>),lXp,lXv);
3022 <span class="keyword">if</span> AXr set(AXr,aRp,aRv);
3023        set(get(AXr,<span class="string">'Ylabel'</span>),lRp,lRv);
3024 <span class="keyword">end</span>;
3025 xyll = get(AX,{<span class="string">'xli'</span> <span class="string">'yli'</span>});
3026 <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'mainCur'</span>,k,x(k),absc(k),0,get(t,<span class="string">'color'</span>));
3027 setappdata(AX,<span class="string">'xstr'</span>,findobj(gcf,<span class="string">'tag'</span>,<span class="string">'xstr'</span>));
3028 setappdata(AX,<span class="string">'ystr'</span>,findobj(gcf,<span class="string">'tag'</span>,<span class="string">'ystr'</span>));
3029 set(AX,{<span class="string">'xli'</span> <span class="string">'yli'</span>},xyll);
3030 <span class="keyword">if</span> DuaC &amp; ~DISras(DuaC) <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'auxCur'</span>);
3031 <span class="keyword">else</span>                            <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'set'</span>,<span class="string">'aux'</span>,<span class="string">'off'</span>);
3032 <span class="keyword">end</span>;
3033 v = <span class="string">'off'</span>;
3034 <span class="keyword">for</span> k=1:nIzqu
3035   <span class="keyword">if</span> strcmp(get(Volv1(Izqu(k)),<span class="string">'vis'</span>),<span class="string">'on'</span>) v = <span class="string">'on'</span>; <span class="keyword">break</span>; <span class="keyword">end</span>;
3036 <span class="keyword">end</span>;
3037 set(hYlab,<span class="string">'vis'</span>,v,<span class="string">'ui'</span>,uicontextmenu(<span class="string">'call'</span>,<span class="string">'plt hideCur;'</span>));
3038 izquC = cPLTbk;
3039 <span class="keyword">if</span> AXr
3040   ls = Volv1(Derecho)';
3041   set(Hc(14+Derecho),<span class="string">'par'</span>,AXr,<span class="string">'erase'</span>,<span class="string">'xor'</span>);
3042   v = <span class="string">'off'</span>;
3043   <span class="keyword">for</span> k=1:length(ls)
3044     <span class="keyword">if</span> strcmp(get(ls(k),<span class="string">'vis'</span>),<span class="string">'on'</span>)
3045        v = <span class="string">'on'</span>;
3046        izquC = <span class="string">'none'</span>;
3047        <span class="keyword">break</span>;
3048     <span class="keyword">end</span>;
3049   <span class="keyword">end</span>;
3050   set(AXr,<span class="string">'vis'</span>,v);
3051 <span class="keyword">end</span>;
3052 <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'MVcur'</span>);
3053 <span class="keyword">if</span> length(moveCB) <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'set'</span>,<span class="string">'moveCB'</span>,moveCB); <span class="keyword">end</span>;
3054 <span class="keyword">if</span> length(axisCB) <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'set'</span>,<span class="string">'axisCB'</span>,axisCB); <span class="keyword">end</span>;
3055 set(AX,<span class="string">'color'</span>,izquC);
3056 cidS = cador;
3057 <span class="keyword">if</span> nSP
3058   <span class="keyword">if</span> aid &amp; all(idPOS([1 2 4]) == [1 1 1])
3059     set(aid,<span class="string">'units'</span>,<span class="string">'nor'</span>);
3060     p = get(aid,<span class="string">'pos'</span>);
3061     p(2) = ySP(2)-p(4)-.025;
3062     <span class="keyword">if</span> p(2) &lt; sum(posAX2([2 4]))+.015
3063        p(2) = posAX2(2);  posAX2(2) = p(2) + p(4) + .02;
3064        set(amb,<span class="string">'pos'</span>,posAX2);
3065     <span class="keyword">end</span>;
3066     set(aid,<span class="string">'pos'</span>,p);
3067   <span class="keyword">end</span>;
3068   h = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'get'</span>,<span class="string">'obj'</span>);
3069   q = [-1 .1 .1 .1];  u = [q;q;q;q];
3070   py1 = get(h(5),<span class="string">'pos'</span>);   p1 = [u;py1;u];
3071   p = {<span class="string">'pos'</span> <span class="string">'Xlim'</span> <span class="string">'color'</span> <span class="string">'Xscale'</span> <span class="string">'FontSize'</span> <span class="string">'TickLength'</span> <span class="string">'Box'</span>};
3072   v = get(AX,p);
3073   <span class="keyword">if</span> ischar(v{3}) v{3} = get(AXr,<span class="string">'color'</span>); <span class="keyword">end</span>;
3074   <span class="keyword">for</span> k=1:nSPl
3075     v{1}([2 4]) = [ySP(k+1) hSP(k+1)];
3076     set(axS(k),p,v);
3077     p1(5,1) = p1(5,1) - dx3;
3078     cidS = [cidS <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,axS(k),<span class="string">'init'</span>,p1,<span class="string">''</span>,<span class="string">''</span>,<span class="string">'+'</span>,8)];
3079     set(axS(k),<span class="string">'use'</span>,cidS(end));
3080   <span class="keyword">end</span>;
3081   <span class="keyword">if</span> nSPr
3082     v{1}([1 3]) = [SPx .98-SPx];  p2r = [p2r;q;q;q];
3083     <span class="keyword">if</span> ischar(Xlimr) k = get(Volv1(end),<span class="string">'x'</span>);  v{2} = [min(k) max(k)];
3084     <span class="keyword">else</span>             v{2} = Xlimr;
3085     <span class="keyword">end</span>;
3086     <span class="keyword">for</span> k=1:nSPr
3087       kr = k+nSPl;
3088       v{1}([2 4]) = [ySPr(k) hSPr(k)];
3089       set(axS(kr),p,v);
3090       cidS = [cidS <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,axS(kr),<span class="string">'init'</span>,p2r,<span class="string">''</span>,<span class="string">''</span>,<span class="string">'+'</span>,8)];
3091       set(axS(kr),<span class="string">'use'</span>,cidS(end));
3092       <span class="keyword">if</span> k==1 p2r([1 2 3 4 6],:) = [u;q]; <span class="keyword">end</span>;
3093       p2r(5,1) = p2r(5,1) - dx3;
3094     <span class="keyword">end</span>;
3095   <span class="keyword">end</span>;
3096   creq = [];
3097   s = <span class="string">'plt(''cursor'','</span>;
3098   cidSS = {[s int2str(cidS(1))]};
3099   <span class="keyword">for</span> k=1:nSP
3100     SS = [s int2str(cidS(k+1))];
3101     cidSS = [cidSS {SS}];
3102     creq = [creq SS <span class="string">',''clear'');'</span>];
3103     <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'grid'</span>,axS(k),<span class="string">'init'</span>,cGRID,GridEr);
3104     <span class="keyword">if</span> length(Reja)==3 <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'grid'</span>,axS(k),<span class="string">'off'</span>); <span class="keyword">end</span>;
3105   <span class="keyword">end</span>;
3106   set(FIG,<span class="string">'closereq'</span>,[creq get(FIG,<span class="string">'closereq'</span>)]);
3107   setappdata(FIG,<span class="string">'c'</span>,0);
3108   s1a = <span class="string">'if getappdata(gcf,&quot;c&quot;)==%d setappdata(gcf,&quot;c&quot;,0); else setappdata(gcf,&quot;c&quot;,getappdata(gcf,&quot;c&quot;)+1);'</span>;
3109   s1 = sprintf(s1a,nSPl);
3110   s2 = <span class="string">',&quot;set&quot;,&quot;activeLine&quot;,0,@IDX); end'</span>;
3111   s3 = <span class="string">',&quot;set&quot;,&quot;xlim&quot;,get(gca,&quot;xlim&quot;)); end'</span>;
3112   <span class="keyword">for</span> k=0:nSPl
3113     <span class="keyword">if</span> k==nSPl j=1; <span class="keyword">else</span> j=k+2; <span class="keyword">end</span>;
3114     <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cidS(k+1),<span class="string">'set'</span>,<span class="string">'moveCB'</span>,[s1 cidSS{j} s2]);
3115     <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cidS(k+1),<span class="string">'set'</span>,<span class="string">'axisCB'</span>,[s1 cidSS{j} s3]);
3116   <span class="keyword">end</span>;
3117   xk = Xlim(1) + diff(Xlim)/9;
3118   [a xk] = min(abs(x-xk));
3119   <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'mainCur'</span>,xk);
3120   <span class="keyword">if</span> nSPr
3121     s1 = sprintf(s1a,nSPr);
3122     <span class="keyword">for</span> k=1:nSPr
3123       kr = k+nSPl+1;
3124       <span class="keyword">if</span> k==nSPr j=nSPl+2; <span class="keyword">else</span> j=kr+1; <span class="keyword">end</span>;
3125       <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cidS(kr),<span class="string">'set'</span>,<span class="string">'moveCB'</span>,[s1 cidSS{j} s2]);
3126       <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cidS(kr),<span class="string">'set'</span>,<span class="string">'axisCB'</span>,[s1 cidSS{j} s3]);
3127     <span class="keyword">end</span>;
3128     <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cidS(nSPl+2),<span class="string">'mainCur'</span>,round(length(get(Volv1(end),<span class="string">'x'</span>))/9));
3129     axS(nSPl+1) = [];
3130   <span class="keyword">end</span>;
3131   set(axS,<span class="string">'xticklabel'</span>,[]);
3132   set(findobj(FIG,<span class="string">'use'</span>,<span class="string">'idcur'</span>),<span class="string">'vis'</span>,<span class="string">'of'</span>);
3133 <span class="keyword">end</span>;
3134 setappdata(FIG,<span class="string">'cid'</span>,cidS);
3135 <span class="keyword">if</span> NoCursor <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'cursor'</span>,cador,<span class="string">'set'</span>,<span class="string">'visOFF'</span>); <span class="keyword">end</span>;
3136 axes(AX);
3137 <span class="keyword">if</span> length(Reja)==2 <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(<span class="string">'grid'</span>,AX); <span class="keyword">end</span>;
3138 set(FIG,<span class="string">'vis'</span>,<span class="string">'on'</span>);
3139 drawnow;
3140 <span class="keyword">end</span>;
3141 
3142 <a name="_sub1" href="#_subfunctions" class="code">function fixMark()</a>
3143   markR = findobj(gcf,<span class="string">'tag'</span>,<span class="string">'markR'</span>)';
3144   <span class="keyword">if</span> isempty(markR) <span class="keyword">return</span>; <span class="keyword">end</span>;
3145   <span class="keyword">for</span> l = markR
3146     u = get(l,<span class="string">'use'</span>);
3147     t = u(1);  v2 = u(2);  axr = u(3);  ylim = u(4:5);  rlim = u(6:7);
3148     <span class="keyword">if</span> ishandle(t) p = get(t,<span class="string">'pos'</span>);  <span class="keyword">else</span> p = [0 0]; <span class="keyword">end</span>;
3149     absc = [get(l,<span class="string">'y'</span>) p(2)];
3150     absc = rlim(1) + diff(rlim) * (absc - ylim(1)) / diff(ylim);
3151     rlim = get(axr,<span class="string">'yli'</span>);   ylim = get(v2,<span class="string">'yli'</span>);
3152     absc = ylim(1) + diff(ylim) * (absc - rlim(1)) / diff(rlim);
3153     set(l,<span class="string">'y'</span>,absc(1),<span class="string">'use'</span>,[u(1:3) ylim rlim]);
3154     <span class="keyword">if</span> ishandle(t) p(2) = absc(2);  set(t,<span class="string">'pos'</span>,p); <span class="keyword">end</span>;
3155   <span class="keyword">end</span>;
3156 
3157 <a name="_sub2" href="#_subfunctions" class="code">function r2 = plt2nd(v)</a>
3158   [r1 r2] = <a href="plt.html" class="code" title="function [Volv1,Volv2] = plt(varargin);">plt</a>(v{:});
3159 
3160 <a name="_sub3" href="#_subfunctions" class="code">function r = get8192(h,prop)</a>
3161   r = get(h/8192,prop);
3162 
3163 <a name="_sub4" href="#_subfunctions" class="code">function evalQ(a)</a>
3164   <span class="keyword">if</span> ischar(a)     a = strrep(a,<span class="string">'&quot;'</span>,<span class="string">''''</span>);
3165                    eval(a);
3166   <span class="keyword">elseif</span> iscell(a) feval(a{:});
3167   <span class="keyword">else</span>             feval(a);
3168   <span class="keyword">end</span>;
3169 
3170 <a name="_sub5" href="#_subfunctions" class="code">function evalRep(a,rep)</a>
3171   <span class="keyword">if</span> ischar(a)     <span class="keyword">for</span> k=1:2:length(rep) a = strrep(a,rep{k},rep{k+1}); <span class="keyword">end</span>;
3172                    a = strrep(a,<span class="string">'&quot;'</span>,<span class="string">''''</span>);
3173                    eval(a);
3174   <span class="keyword">elseif</span> iscell(a) feval(a{:});
3175   <span class="keyword">else</span>             feval(a);
3176   <span class="keyword">end</span>;
3177 
3178 <a name="_sub6" href="#_subfunctions" class="code">function r = evalRep2(a,rep)</a>
3179   <span class="keyword">if</span> ischar(a)     <span class="keyword">for</span> k=1:2:length(rep) a = strrep(a,rep{k},rep{k+1}); <span class="keyword">end</span>;
3180                    a = strrep(a,<span class="string">'&quot;'</span>,<span class="string">''''</span>);
3181                    r = eval(a);
3182   <span class="keyword">elseif</span> iscell(a) r = feval(a{:});
3183   <span class="keyword">else</span>             r = feval(a);
3184   <span class="keyword">end</span>;
3185 
3186 <a name="_sub7" href="#_subfunctions" class="code">function v = s2d(s)</a>
3187    v = sscanf(s,<span class="string">'%f'</span>);
3188 
3189 <a name="_sub8" href="#_subfunctions" class="code">function v = s2i(s)</a>
3190    v = sscanf(s,<span class="string">'%d'</span>);</pre></div>
<hr><address>Generated on Fri 27-Jan-2012 16:18:41 by <strong><a href="http://www.artefact.tk/software/matlab/m2html/" title="Matlab Documentation in HTML">m2html</a></strong> &copy; 2005</address>
</body>
</html>